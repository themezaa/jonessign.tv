function TS_VCSC_WaveFillGaugeDefaultSettings(){return{minValue:0,maxValue:100,valueCountUp:!0,displayPercent:!0,circleThickness:.05,circleFillGap:.05,circleColor:"#178BCA",circleFadeTime:1e3,waveHeight:.05,waveCount:1,waveRiseTime:1e3,waveAnimateTime:18e3,waveRise:!0,waveHeightScaling:!0,waveAnimate:!0,waveColor:"#178BCA",waveOffset:0,textVertPosition:.5,textSize:1,textColor:"#045681",waveTextColor:"#A4DBf8"}}function TS_VCSC_WaveFillGaugeClickUpdate(t,a,e){jQuery("#"+t).on("click",function(){var t=a.attr("data-gauge-value"),r=a.attr("data-gauge-second"),i="true"==a.attr("data-gauge-alternate")?!0:!1;i?(e.update(t),a.attr("data-gauge-alternate","false")):(e.update(r),a.attr("data-gauge-alternate","true"))})}function TS_VCSC_LoadLiquidFillGauge(t,a,e){function r(){W.attr("transform","translate("+P(W.attr("T"))+",0)"),W.transition().duration(e.waveAnimateTime*(1-W.attr("T"))).ease("linear").attr("transform","translate("+P(1)+",0)").attr("T",1).each("end",function(){W.attr("T",0),r(e.waveAnimateTime)})}function i(){this.update=function(t){var a=parseFloat(t).toFixed(2),i=function(t){return Math.round(t)};parseFloat(a)!=parseFloat(i(a))&&(i=function(t){return parseFloat(t).toFixed(1)}),parseFloat(a)!=parseFloat(i(a))&&(i=function(t){return parseFloat(t).toFixed(2)});var l=function(){var a=d3.interpolate(this.textContent,parseFloat(t).toFixed(2));return function(t){this.textContent=i(a(t))+p}};H.transition().duration(e.waveRiseTime).tween("text",l),b.transition().duration(e.waveRiseTime).tween("text",l);var o,s=Math.max(e.minValue,Math.min(e.maxValue,t))/e.maxValue,u=h*n(100*s),d=d3.scale.linear().range([w+2*h+u,w-u]).domain([0,1]),c=d(s),v=d3.scale.linear().range([0,y]).domain([0,1]),g=d3.scale.linear().range([0,u]).domain([0,1]);o=e.waveHeightScaling?d3.svg.area().x(function(t){return v(t.x)}).y0(function(t){return g(Math.sin(2*Math.PI*e.waveOffset*-1+2*Math.PI*(1-e.waveCount)+2*t.y*Math.PI))}).y1(function(){return 2*h+u}):Q;var f=e.waveAnimate?P(1):0;W.transition().duration(0).transition().duration(e.waveAnimate?e.waveAnimateTime*(1-W.attr("T")):e.waveRiseTime).ease("linear").attr("d",o).attr("transform","translate("+f+",0)").attr("T","1").each("end",function(){e.waveAnimate&&(W.attr("transform","translate("+P(0)+",0)"),r(e.waveAnimateTime))}),z.transition().duration(e.waveRiseTime).attr("transform","translate("+L+","+c+")")}}null==e&&(e=TS_VCSC_WaveFillGaugeDefaultSettings());var n,l=d3.select("#"+t),o=Math.min(parseInt(l.style("width")),parseInt(l.style("height")))/2,s=parseInt(l.style("width"))/2-o,u=parseInt(l.style("height"))/2-o,d=Math.max(e.minValue,Math.min(e.maxValue,a))/e.maxValue;n=e.waveHeightScaling?d3.scale.linear().range([0,e.waveHeight,0]).domain([0,50,100]):d3.scale.linear().range([e.waveHeight,e.waveHeight]).domain([0,100]);var c=e.textSize*o/2,v=parseFloat(a).toFixed(2),g=e.valueCountUp?e.minValue:v,p=e.displayPercent?"%":"",f=e.circleThickness*o,m=e.circleFillGap*o,w=f+m,h=o-w,x=h*n(100*d),C=2*h/e.waveCount,T=1+e.waveCount,y=C*T,F=function(t){return Math.round(t)};parseFloat(v)!=parseFloat(F(v))&&(F=function(t){return parseFloat(t).toFixed(1)}),parseFloat(v)!=parseFloat(F(v))&&(F=function(t){return parseFloat(t).toFixed(2)});for(var S=[],I=0;40*T>=I;I++)S.push({x:I/(40*T),y:I/40});var V=d3.scale.linear().range([0,2*Math.PI]).domain([0,1]),_=d3.scale.linear().range([0,o]).domain([0,o]),M=d3.scale.linear().range([0,y]).domain([0,1]),A=d3.scale.linear().range([0,x]).domain([0,1]),G=d3.scale.linear().range([w+2*h+x,w-x]).domain([0,1]),P=d3.scale.linear().range([0,y-2*h]).domain([0,1]),R=d3.scale.linear().range([w+2*h,w+.7*c]).domain([0,1]),k=l.append("g").attr("transform","translate("+s+","+u+")"),j=d3.svg.arc().startAngle(V(0)).endAngle(V(1)).outerRadius(_(o)).innerRadius(_(o-f)),q=k.append("path").attr("class","liquidFillGaugeCircle").attr("d",j).style("fill",e.circleColor).attr("transform","translate("+o+","+o+")");jQuery(q[0]).fadeTo(0,0),jQuery(q[0]).fadeTo(e.circleFadeTime,1);var H=k.append("text").text(F(g)+p).attr("class","liquidFillGaugeText").attr("text-anchor","middle").attr("font-size",c+"px").style("fill",e.textColor).attr("transform","translate("+o+","+R(e.textVertPosition)+")"),Q=d3.svg.area().x(function(t){return M(t.x)}).y0(function(t){return A(Math.sin(2*Math.PI*e.waveOffset*-1+2*Math.PI*(1-e.waveCount)+2*t.y*Math.PI))}).y1(function(){return 2*h+x}),z=k.append("defs").append("clipPath").attr("id","clipWave"+t),W=z.append("path").datum(S).attr("d",Q).attr("T",0),U=k.append("g").attr("clip-path","url(#clipWave"+t+")");U.append("circle").attr("cx",o).attr("cy",o).attr("r",h).style("fill",e.waveColor);var b=U.append("text").text(F(g)+p).attr("class","liquidFillGaugeText").attr("text-anchor","middle").attr("font-size",c+"px").style("fill",e.waveTextColor).attr("transform","translate("+o+","+R(e.textVertPosition)+")");if(e.valueCountUp){var D=function(){var t=d3.interpolate(this.textContent,v);return function(a){this.textContent=F(t(a))+p}};H.transition().duration(e.waveRiseTime).tween("text",D),b.transition().duration(e.waveRiseTime).tween("text",D)}var L=w+2*h-y;return e.waveRise?z.attr("transform","translate("+L+","+G(0)+")").transition().duration(e.waveRiseTime).attr("transform","translate("+L+","+G(d)+")").each("start",function(){W.attr("transform","translate(1,0)")}):z.attr("transform","translate("+L+","+G(d)+")"),e.waveAnimate&&r(),new i}!function(t){t(document).ready(function(){function t(){jQuery(".ts-liquid-gauge-wrapper").each(function(){var t=jQuery(this),a=t.attr("data-randomizer"),e=t.attr("data-circle-position");if("center"==e)var r="margin: 0 auto; float: none;";else if("left"==e)var r="margin: 0 auto; float: left;";else if("right"==e)var r="margin: 0 auto; float: right;";{var i=parseInt(t.attr("data-current")),n=parseInt(t.attr("data-circle-maxsize")),l=t.width();t.width()}if(l>n)var o=n;else var o=l;var s=t.find("svg"),u="ts-liquid-gauge-svg-"+a,d="true"==t.attr("data-gauge-click")?!0:!1,c="true"==t.attr("data-viewport-active")?!0:!1,v="true"==t.attr("data-viewport-mobile")?!0:!1,g=t.attr("data-viewport-offset"),p=parseInt(t.attr("data-viewport-delay")),f="true"==t.attr("data-viewport-triggered")?!0:!1;if(0==TS_VCSC_MobileDevice||1==TS_VCSC_MobileDevice&&1==v)var m=!0;else var m=!1;if(s.length>0&&i!=l)s.off().remove(),s=null;else if(i==l)return!1;t.attr("data-current",l),t.append('<svg id="'+u+'" class="ts-liquid-gauge-svg" width="'+o+'" height="'+o+'" style="display: block; padding: 0; '+r+'"></svg>'),s=t.find("svg");var w=TS_VCSC_WaveFillGaugeDefaultSettings();if(w.minValue=parseInt(t.attr("data-gauge-min")),w.maxValue=parseInt(t.attr("data-gauge-max")),w.valueCountUp="true"==t.attr("data-gauge-countup")?!0:!1,w.displayPercent="true"==t.attr("data-gauge-percent")?!0:!1,w.circleColor=t.attr("data-circle-color"),w.circleThickness=parseInt(t.attr("data-circle-thickness"))/100,w.circleFillGap=parseInt(t.attr("data-circle-gap"))/100,w.textColor=t.attr("data-circle-text"),w.waveTextColor=t.attr("data-wave-text"),w.waveColor=t.attr("data-wave-color"),w.waveHeight=parseInt(t.attr("data-wave-height"))/100,w.waveCount=parseInt(t.attr("data-wave-count")),w.waveHeightScaling=!0,w.waveAnimate="true"==t.attr("data-wave-animateallow")?!0:!1,w.waveAnimateTime=parseInt(t.attr("data-wave-animatetime")),w.waveRise="true"==t.attr("data-wave-riseallow")?!0:!1,w.waveRiseTime=parseInt(t.attr("data-wave-risetime")),w.waveOffset=parseInt(t.attr("data-wave-offset")),w.textVertPosition=parseInt(t.attr("data-circle-label"))/100,w.textSize=1,c&&!f&&"undefined"!=typeof jQuery.fn.waypoint&&1==m)var h=t.waypoint({handler:function(){var a=jQuery(this);setTimeout(function(){if("false"==t.attr("data-viewport-triggered")){var e=TS_VCSC_LoadLiquidFillGauge(u,parseInt(t.attr("data-gauge-value")),w);d&&TS_VCSC_WaveFillGaugeClickUpdate(u,t,e)}t.attr("data-viewport-triggered","true");try{a.waypoint("destroy")}catch(r){}try{h.destroy()}catch(r){}},p)},offset:g,triggerOnce:!0});else{var x=TS_VCSC_LoadLiquidFillGauge(u,parseInt(t.attr("data-gauge-value")),w);d&&TS_VCSC_WaveFillGaugeClickUpdate(u,t,x)}})}t(),jQuery(window).on("debouncedresize",function(){t()})})}(jQuery);
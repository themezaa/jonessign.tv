!function(t){t.fn.TS_VCSC_PolaroidGallery=function(e){function o(){sa.hide()}function r(){}function n(){}function s(t){var e=oa.find("div.ts-polaroid-gallery-slide"),o=oa.find("div.ts-polaroid-gallery-item-"+t),r=fa-1,n=o.prevAll().length,s=0,l=[];if(q>=fa)e.removeClass("ts-polaroid-gallery-slide-active").addClass("ts-polaroid-gallery-slide-sibling"),o.removeClass("ts-polaroid-gallery-slide-sibling").addClass("ts-polaroid-gallery-slide-active");else{if(t==r){for(a=r-1;a>r-q;a--)l.push(a);l.push(0)}else if(0==t){for(a=r;a>r-q+1;a--)l.push(a);l.push(1)}else if(q>n){for(s=q-n,a=t-q+1;t>a;a++)l.push(a>=0?a:a+n+s+1);l.push(t+1)}else if(n>=q){for(a=t-q+1;t>a;a++)l.push(a);l.push(t+1)}for(e.removeClass("ts-polaroid-gallery-slide-active").removeClass("ts-polaroid-gallery-slide-sibling").addClass("ts-polaroid-gallery-slide-hidden"),i=0;fa>i;i++)i==t?o.removeClass("ts-polaroid-gallery-slide-hidden").addClass("ts-polaroid-gallery-slide-active"):jQuery.inArray(i,l)>=0&&oa.find("div.ts-polaroid-gallery-item-"+i).removeClass("ts-polaroid-gallery-slide-hidden").addClass("ts-polaroid-gallery-slide-sibling");G&&na.text(fa-t+" / "+fa)}}function l(){var a,e,i,n,s,l,d,c,p,h,f,g,m=0,v=oa.find("div.ts-polaroid-gallery-slide");fa=v.length,v.each(function(){_a.push(t(this))});var b=t(_a[0]);for(ga=b.width(),ma=b.height(),da=ma/ga,ca=ga/ma,c=b.find("div.ts-polaroid-gallery-wrapper"),ua=c.height()/c.width(),pa=(b.width()-c.width())/2,m=0;fa>m;m++){if(l=t(_a[m]),l.attr("data-current-id",m),l.attr("data-original-id",m),l.addClass("ts-polaroid-gallery-item-"+m),l.css("zIndex",m+Ca).transition({top:"0px",left:"0px",rotate:"0deg"}),X?(d=Q(Qa,Wa),Math.abs(d)>Ia&&(Ia=Math.abs(d),f=Math.abs(d),g=m),m!=fa-1&&l.css({rotate:d+"deg"})):(p=35*Math.random(),h=25*Math.random(),p>La&&(La=p),h>za&&(za=h),Aa>p&&(Aa=p),Pa>h&&(Pa=h),l.css("top",p+"px"),l.css("left",h+"px"),l.data("origTop",p),l.data("origLeft",h)),l.find("a.ts-polaroid-gallery-link-lightbox").on("click",function(t){return t.preventDefault(),Ea=!0,N&&I(),r(),!1}),W(Ta,m))if(l.bind("dragstart",function(t){return t.preventDefault(),!1}).bind("selectstart",function(t){return t.preventDefault(),!1}),1==$TS_VCSC_Hammer_ReleaseNew){var w=document.getElementById(l.attr("id")),x=new Hammer(w,{prevent_default:!0});x.on("swipeleft",function(t){return t.preventDefault(),C("left"),!1}).on("swiperight",function(t){return t.preventDefault(),C("right"),!1})}else{Hammer(l).on("swipeleft",function(){return C("left"),!1}).on("swiperight",function(){return C("right"),!1})}for(j=0,n=l.find("div.ts-polaroid-gallery-caption"),Ha.push(n),a=n.find("div"),e=a.length,i=[],j;e>j;j++)s=a.eq(j),s.css("opacity",0),i.push(s);e>0&&(l.data("caption_list",n),l.data("captionSubArr",i))}Qa=Ia,Wa=-Ia,X?(l=t(_a[g]),l.data("max_rot",f),va=ga,ba=ma):(va=za+ga-Pa,ba=La+ma-Aa),u(),y(fa-1),ia.css("opacity",1),Ka&&(Ka.css("opacity",0),Ka.css("display","block"),Ka.stop().transition({opacity:1,duration:1e3,easing:"easeOutSine",complete:function(){}})),G?na.show().css("opacity",1):na.hide().css("opacity",0),ta=!0,o()}function d(t){var a=t*Math.PI/180,e=Math.cos(a),i=Math.sin(a),o=ga,r=ma;wa=Math.round(o*Math.abs(e)+r*Math.abs(i)),xa=Math.round(o*Math.abs(i)+r*Math.abs(e)),$a=xa-ma,Va=wa-ga}function c(t,a,e){var i=t*Math.PI/180,o=Math.cos(i),r=Math.sin(i),n=a,s=e,l=o*n,d=r*n,c=-r*s,u=o*s,p=o*n-r*s,h=r*n+o*s,f=Math.min(0,l,c,p),g=Math.max(0,l,c,p),m=Math.min(0,d,u,h),v=Math.max(0,d,u,h);ya=Math.round(g-f),Ma=Math.round(v-m)}function u(){var a,e,i,o,r=0,n=0,s=0,l=0,u=0;currentRotation=0,stackHeightTop=0,stackHeightBottom=0,stackHeightFinal=0;var h=parseInt(ia.attr("data-lastwidth")),f=ia.width();if(h==f&&ta)return!1;X&&d(Ia);var g=O("w"),m=O("h");for(r;fa>r;r++){if(a=t(_a[r]),e=a.find("div.ts-polaroid-gallery-wrapper"),J||va>g||ba>m||wa>g||xa>m){if(X){var v={};v.width=m/(ma+$a)*ga,v.height=m,c(Ia,v.width,v.width*da),Sa="width",(ya-1>g||Ma-1>m)&&(v.height=g/(ga+Va)*ma,v.width=g,Sa="height")}else var v=p(ia,ga,ma,!0);i=v.width,o=v.height}else i=ga,o=ma;a&&("width"==Sa?(a.width(i),a.height(i*da)):(a.height(o),a.width(o*ca))),e&&("width"==Sa?(e.width(i-2*pa),e.height(a.width()*da-2*pa)):(e.height(o-2*pa),e.width(a.height()*ca-2*pa)))}oa.css(X?"width"==Sa?{left:"50%",top:"50%",width:i+"px",height:a.width()*da+"px",marginLeft:-i/2+"px",marginTop:-(a.width()*da)/2+"px"}:{left:"50%",top:"50%",height:o+"px",width:a.height()*ca+"px",marginLeft:-(a.height()*ca)/2+"px",marginTop:-(a.width()*da)/2+"px"}:{left:"50%",top:"50%",width:i+"px",height:a.width()*da+"px",marginLeft:-i/2-(za+Pa)/2+"px",marginTop:-(a.width()*da)/2-(La+Aa)/2+"px"});var b,w,r=0,x=Ha.length;for(r;x>r;r++)b=t(Ha[r]),b.find("div").each(function(){w=t(this),w.removeClass("ts-polaroid-gallery-caption-small").removeClass("ts-polaroid-gallery-caption-medium").removeClass("ts-polaroid-gallery-caption-large"),O("w")<=570||O("h")<=320?w.addClass("ts-polaroid-gallery-caption-small"):O("w")<=767||O("h")<=570?w.addClass("ts-polaroid-gallery-caption-medium"):(O("w")<=959||O("h")<=767)&&w.addClass("ts-polaroid-gallery-caption-large")});for(r=0;fa>r;r++)div=t(_a[r]),div.height()>n&&(n=div.height()),div.width()>s&&(s=div.width()),X&&(currentRotation=div.css("rotate").replace("deg",""),currentRotation>l&&(l=currentRotation),u>currentRotation&&(u=currentRotation));stackHeightTop=M(l,s,n),stackHeightBottom=M(u,s,n),stackHeightFinal=stackHeightTop[1]>stackHeightBottom[1]?Math.ceil(stackHeightTop[1])+2*Y:Math.ceil(stackHeightBottom[1])+2*Y,stackHeightFinal>0?(ia.css("height",(stackHeightFinal>V?V:stackHeightFinal)+"px"),ia.attr("data-lastheight",stackHeightFinal>V?V:stackHeightFinal)):(ia.css("height",(n+2*Y>V?V:n+2*Y)+"px"),ia.attr("data-lastheight",n+2*Y>V?V:n+2*Y)),ia.attr("data-lastwidth",f),oa.show(),na.show(),Ka.show(),sa.hide()}function p(t,a,e,i){var o={},r=0,n=0,s=O("w")-(va-ga),l=O("h")-(ba-ma),d=a,c=e,u=(s-r)/(l-n),p=d/c;return u>p?i?(o.width=(l-n)/c*d,o.height=l-n):(o.height=(s-r)/d*c,o.width=s-r):p>u?i?(o.height=(s-r)/d*c,o.width=s-r):(o.width=(l-n)/c*d,o.height=l-n):(o.width=s-r,o.height=l-n),o}function h(){var a=t(_a[0]);X?(Oa=a.outerHeight()+100,ka=a.outerWidth()+50):(Oa=a.outerHeight()+10,ka=a.outerWidth()+5)}function f(a,e){var i=fa-1,o=parseInt(t(_a[i]).attr("data-original-id"),10);n(o),void 0!=_a[i].data("captionSubArr")&&x(i);var r;r=t(a?e?B(a):P(a):P(i));var s=Q(Fa,Da),l=Q(Qa,Wa),d=0,c=0;if(h(),"verticalAbove"==K||"verticalRound"==K)X?ea?r.animate({top:-Oa+"px"},{duration:ja,easing:"easeOutSine",step:function(t){c=Math.round(t*ja/Oa),d=-(c*s/ja),setTimeout(function(){r.css("-webkit-transform","rotate("+d+"deg)")},65)},complete:function(){m(r,l,d,a,e)}}):r.transition({rotate:s+"deg",top:-Oa+"px",duration:ja,easing:"easeOutCubic",complete:function(){m(r,l,d,a,e)}}):r.transition({top:-Oa+"px",duration:ja,easing:"easeOutCubic",complete:function(){m(r,l,d,a,e)}});else{var u="horizontalLeft"==K?-ka:ka;X?ea?r.animate({left:u+"px"},{duration:ja,easing:"easeOutSine",step:function(t){c=Math.round(t*ja/u),d="horizontalLeft"==K?c*s/ja:-(c*s/ja),setTimeout(function(){r.css("-webkit-transform","rotate("+d+"deg)")},65)},complete:function(){v(r,l,d,a,e)}}):r.transition({rotate:s+"deg",left:u+"px",duration:ja,easing:"easeOutCubic",complete:function(){v(r,l,d,a,e)}}):r.transition({left:u+"px",duration:ja,easing:"easeOutCubic",complete:function(){v(r,l,d,a,e)}})}}function g(){var a=t(_a[fa-1]).attr("data-current-id"),e=parseInt(t(_a[a]).attr("data-original-id"),10);n(e),void 0!=_a[a].data("captionSubArr")&&x(a);var i=t(P(0)),o=Q(Fa,Da),r=Q(Qa,Wa),s=0,l=0;if(h(),"verticalAbove"==K||"verticalRound"==K){var d="verticalRound"==K?Oa:-Oa;X?ea?i.animate({top:d+"px"},{duration:ja,easing:"easeOutSine",step:function(t){l=Math.round(t*ja/d),s="verticalRound"==K?-(l*o/ja):l*o/ja,setTimeout(function(){i.css("-webkit-transform","rotate("+s+"deg)")},65)},complete:function(){b(i,r,s)}}):i.transition({rotate:o+"deg",top:d+"px",duration:ja,easing:"easeOutCubic",complete:function(){b(i,r)}}):i.transition({top:d+"px",duration:ja,easing:"easeOutCubic",complete:function(){b(i)}})}else{var c="horizontalLeft"==K?-ka:ka;X?ea?i.animate({left:c+"px"},{duration:ja,easing:"easeOutSine",step:function(t){l=Math.round(t*ja/c),s="horizontalLeft"==K?-(l*o/ja):l*o/ja,setTimeout(function(){i.css("-webkit-transform","rotate("+s+"deg)")},65)},complete:function(){w(i,r,s)}}):i.transition({rotate:o+"deg",left:c+"px",duration:ja,easing:"easeOutCubic",complete:function(){w(i,r)}}):i.transition({left:c+"px",duration:ja,easing:"easeOutCubic",complete:function(){w(i)}})}}function m(a,e,i,o,r){if(o){if(r){var n=t(B(o));o=n.attr("data-current-id")}var s=_a[o];_a.splice(o,1),_a.push(s),F()}else _a.unshift(_a.pop()),F();void 0!=a.data("max_rot")&&(e=parseInt(a.data("max_rot"),10));var l=e;if(X)if(ea){var d,c,u,p=0,h=0,f=i,g=parseInt(a.css("top"),10);o&&(e=0),0>i&&0>e&&i>e?(d=Math.abs(Math.abs(i)-Math.abs(e)),c="-"):i>0&&e>0&&i>e?(d=i-e,c="-"):i>0&&0>e?(d=i+Math.abs(e),c="-"):0>i&&0>e&&e>i?(d=Math.abs(Math.abs(i)-Math.abs(e)),c="+"):i>0&&e>0&&e>i?(d=e-i,c="+"):0>i&&e>0?(d=Math.abs(i)+e,c="+"):0==i&&e>0?(d=e,c="+"):i>0&&0==e?(d=i,c="-"):0>i&&0==e?(d=Math.abs(i),c="+"):0==i&&0>e&&(d=Math.abs(e),c="-"),a.animate({top:"0px"},{duration:Ba,easing:"easeOutSine",step:function(t){h=-Math.round(t*Ba/g-Ba),p=h*d/Ba,setTimeout(function(){"+"==c?(u=f+p,a.css("-webkit-transform","rotate("+u+"deg)")):(u=f-p,a.css("-webkit-transform","rotate("+u+"deg)"))},65)}})}else a.transition(o?{rotate:"0deg",top:"0px",duration:Ba,easing:"easeOutExpo"}:{rotate:e+"deg",top:"0px",duration:Ba,easing:"easeOutExpo"});else{var m=0;void 0!=a.data("origTop")&&(m=parseInt(a.data("origTop"),10)),a.transition({top:m+"px",duration:Ba,easing:"easeOutExpo"})}if(X)if(o){var v=t(_a[fa-2]);v.transition({rotate:l+"deg",duration:Ba,easing:"easeOutSine"})}else{var b=t(_a[fa-1]);b.transition({rotate:"0deg",duration:Ba,easing:"easeOutExpo"})}ha&&clearTimeout(ha),ha=setTimeout(k,Ba)}function v(a,e,i,o,r){if(o){if(r){var n=t(B(o));o=n.attr("data-current-id")}var s=_a[o];_a.splice(o,1),_a.push(s),F()}else _a.unshift(_a.pop()),F();void 0!=a.data("max_rot")&&(e=parseInt(a.data("max_rot"),10));var l=e;if(X)if(ea){var d,c,u,p=0,h=0,f=i,g=parseInt(a.css("left"),10);o&&(e=0),0>i&&0>e&&i>e?(d=Math.abs(Math.abs(i)-Math.abs(e)),c="-"):i>0&&e>0&&i>e?d="-":i>0&&0>e?(d=i+Math.abs(e),c="-"):0>i&&0>e&&e>i?(d=Math.abs(Math.abs(i)-Math.abs(e)),c="+"):i>0&&e>0&&e>i?(d=e-i,c="+"):0>i&&e>0?(d=Math.abs(i)+e,c="+"):0==i&&e>0?(d=e,c="+"):i>0&&0==e?(d=i,c="-"):0>i&&0==e?(d=Math.abs(i),c="+"):0==i&&0>e&&(d=Math.abs(e),c="-"),a.animate({left:"0px"},{duration:Ba,easing:"easeOutSine",step:function(t){h=-Math.round(t*Ba/g-Ba),p=h*d/Ba,setTimeout(function(){"+"==c?(u=f+p,a.css("-webkit-transform","rotate("+u+"deg)")):(u=f-p,a.css("-webkit-transform","rotate("+u+"deg)"))},65)}})}else a.transition(o?{rotate:"0deg",left:"0px",duration:Ba,easing:"easeOutExpo"}:{rotate:e+"deg",left:"0px",duration:Ba,easing:"easeOutExpo"});else{var m=0;void 0!=a.data("origLeft")&&(m=parseInt(a.data("origLeft"),10)),a.transition({left:m+"px",duration:Ba,easing:"easeOutExpo"})}if(X)if(o){var v=t(_a[fa-2]);v.transition({rotate:l+"deg",duration:Ba,easing:"easeOutSine"})}else{var b=t(_a[fa-1]);b.transition({rotate:"0deg",duration:Ba,easing:"easeOutExpo"})}ha&&clearTimeout(ha),ha=setTimeout(k,Ba)}function b(a,e,i){if(_a.push(_a.shift()),D(),void 0!=a.data("max_rot")&&(e=parseInt(a.data("max_rot"),10)),X){var o=t(_a[fa-2]);if(o.transition({rotate:e+"deg",duration:Ba,easing:"easeOutSine"}),ea){var r,n,s=Math.abs(i),l=0,d=0,c=i,u=parseInt(a.css("top"),10);i>0?r="-":0>i&&(r="+"),a.animate({top:"0px"},{duration:Ba,easing:"easeOutSine",step:function(t){d=-Math.round(t*Ba/u-Ba),l=d*s/Ba,setTimeout(function(){"+"==r?(n=Math.floor(c+l),a.css("-webkit-transform","rotate("+n+"deg)")):(n=Math.floor(c-l),a.css("-webkit-transform","rotate("+n+"deg)"))},65)},complete:function(){y(a.attr("data-current-id"))}})}else a.transition({rotate:"0deg",top:"0px",duration:Ba,easing:"easeOutExpo",complete:function(){y(a.attr("data-current-id"))}})}else{var p=0;void 0!=a.data("origTop")&&(p=parseInt(a.data("origTop"),10)),a.transition({top:p+"px",duration:Ba,easing:"easeOutExpo",complete:function(){y(a.attr("data-current-id"))}})}}function w(a,e,i){if(_a.push(_a.shift()),D(),void 0!=a.data("max_rot")&&(e=parseInt(a.data("max_rot"),10)),X){var o=t(_a[fa-2]);if(o.transition({rotate:e+"deg",duration:Ba,easing:"easeOutSine"}),ea){var r,n,s=Math.abs(i),l=0,d=0,c=i,u=parseInt(a.css("left"),10);i>0?r="-":0>i&&(r="+"),a.animate({left:"0px"},{duration:Ba,easing:"easeOutSine",step:function(t){d=-Math.round(t*Ba/u-Ba),l=d*s/Ba,setTimeout(function(){"+"==r?(n=Math.floor(c+l),a.css("-webkit-transform","rotate("+n+"deg)")):(n=Math.floor(c-l),a.css("-webkit-transform","rotate("+n+"deg)"))},65)},complete:function(){y(a.attr("data-current-id"))}})}else a.transition({rotate:"0deg",left:"0px",duration:Ba,easing:"easeOutExpo",complete:function(){y(a.attr("data-current-id"))}})}else{var p=0;void 0!=a.data("origLeft")&&(p=parseInt(a.data("origLeft"),10)),a.transition({left:p+"px",duration:Ba,easing:"easeOutExpo",complete:function(){y(a.attr("data-current-id"))}})}}function x(a){var e,i=0,o=_a[a].data("captionSubArr"),r=_a[a].data("caption_list"),n=o.length;for(i;n>i;i++)e=t(o[i]),e.stop().transition(i!=n-1?{opacity:0,duration:Ga,easing:"easeOutSine",complete:function(){}}:{opacity:0,duration:Ga,easing:"easeOutSine",complete:function(){r.css("display","none")}})}function y(a){var e=parseInt(t(_a[a]).attr("data-original-id"),10);if(s(e),void 0!=_a[a].data("captionSubArr")){var i,o=0,r=_a[a].data("captionSubArr"),n=_a[a].data("caption_list"),l=r.length;for(n.css("display","block"),o;l>o;o++)i=t(r[o]),i.css("opacity",0),i.css("left","-100px"),o!=l-1?i.delay(qa*o).transition({opacity:1,left:"0px",duration:Ga,easing:"easeOutQuart",complete:function(){}}):o==l-1&&i.delay(qa*o).transition({opacity:1,left:"0px",duration:Ga,easing:"easeOutQuart",complete:function(){_("on"),Ra=!1,T()}})}else _("on"),Ra=!1,T()}function M(t,a,e){var i=[],o=t/180*Math.PI;return $intWidthRotated=e*Math.abs(Math.sin(o))+a*Math.abs(Math.cos(o)),$intHeightRotated=e*Math.abs(Math.cos(o))+a*Math.abs(Math.sin(o)),i.push($intWidthRotated),i.push($intHeightRotated),i}function O(t){return"w"==t?ia.width():ia.height()}function k(){ha&&clearTimeout(ha),y(t(_a[fa-1]).attr("data-current-id"))}function C(t){return ta?("right"==t?E():"left"==t&&R(),!1):!1}function T(){N&&!Xa&&S()}function I(){la&&clearTimeout(la),Ua.find("span").alterClass("ts-ecommerce-*","ts-ecommerce-play")}function S(){la&&clearTimeout(la),la=setTimeout(H,U),Ua.find("span").alterClass("ts-ecommerce-*","ts-ecommerce-pause")}function H(){Ra=!0,_("off"),f()}function _(t){"on"==t?(Na.css("cursor","pointer"),Ja.css("cursor","pointer")):(Na.css("cursor","default"),Ja.css("cursor","default"))}function R(){Ra=!0,_("off"),g()}function E(){Ra=!0,_("off"),f()}function L(a){if(!ta)return!1;if(!a)var a=window.event;a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation();var e=a.currentTarget,i=t(e).attr("class");if("ts-polaroid-gallery-controls-prev"==i){if(Ra)return;R()}else if("ts-polaroid-gallery-controls-play"==i)$();else if("ts-polaroid-gallery-controls-next"==i){if(Ra)return;E()}return!1}function z(a){if(!ta)return!1;if(!a)var a=window.event;a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation();var e=a.currentTarget,i=t(e).attr("class"),o=t(e).find("span");return"ts-polaroid-gallery-controls-prev"==i?o.attr("class","ts-ecommerce-arrowleft2"):"ts-polaroid-gallery-controls-play"==i?N?o.attr("class","ts-ecommerce-pause"):o.attr("class","ts-ecommerce-play"):"ts-polaroid-gallery-controls-next"==i&&o.attr("class","ts-ecommerce-arrowright2"),!1}function A(a){if(!ta)return!1;if(!a)var a=window.event;a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation();var e=a.currentTarget,i=t(e).attr("class"),o=t(e).find("span");return"ts-polaroid-gallery-controls-prev"==i?o.attr("class","ts-ecommerce-arrowleft2"):"ts-polaroid-gallery-controls-play"==i?N?o.attr("class","ts-ecommerce-pause"):o.attr("class","ts-ecommerce-play"):"ts-polaroid-gallery-controls-next"==i&&o.attr("class","ts-ecommerce-arrowright2"),!1}function P(a){var e,i,o=0;for(o;fa>o&&(e=t(_a[o]),i=e.attr("data-current-id"),i!=a);o++);return e}function B(a){var e,i,o=0;for(o;fa>o&&(e=t(_a[o]),i=e.attr("data-original-id"),i!=a);o++);return e}function F(){var a,e=0;for(e;fa>e;e++)a=t(_a[e]),a.attr("data-current-id",e),a.css("zIndex",e+Ca)}function D(){var a,e=0;for(e;fa>e;e++)a=t(_a[e]),a.attr("data-current-id",e),a.css("zIndex",e+Ca)}function Q(t,a){return Math.random()*(a-t)+t}function W(t,a){for(var e=t.length;e--;)if(parseInt(t[e],10)===a)return!0;return!1}function $(){N?(I(),N=!1):(N=!0,Ra||S())}var V=(e.polaroidExternal,e.polaroidMaxHeight),q=e.polaroidStack,G=e.imageCounter,K=e.slideshowLayout,N=e.slideshowOn,U=e.slideshowDelay,J=e.fullSize,X=e.useRotation,Y=e.rotationMargin,Z=e.swipeOn,ta=!1,aa=function(){var t=document.createElement("div"),a="Khtml Ms O Moz Webkit".split(" "),e=a.length;return function(i){if(i in t.style)return!0;for(i=i.replace(/^[a-z]/,function(t){return t.toUpperCase()});e--;)if(a[e]+i in t.style)return!0;return!1}}();if(aa("transform"))var ea=!1;else var ea=!0;var ia=t(this),oa=ia.find(".ts-polaroid-gallery-images"),ra=oa.find(".ts-polaroid-gallery-slide"),na=ia.find(".ts-polaroid-gallery-counter"),sa=ia.find(".ts-polaroid-gallery-preloader");oa.css("zIndex",0);var la,da,ca,ua,pa,ha,fa,ga,ma,va,ba,wa,xa,ya,Ma,Oa,ka,Ca=1,Ta=Z.split(","),Ia=0,Sa="width",Ha=[],_a=[],Ra=!1,Ea=!1,La=0,za=0,Aa=500,Pa=500,ja=500,Ba=500,Fa=-25,Da=-15,Qa=10,Wa=-10,$a=0,Va=0,qa=150,Ga=500,Ka=ia.find(".ts-polaroid-gallery-controls"),Na=Ka.find(".ts-polaroid-gallery-controls-prev"),Ua=Ka.find(".ts-polaroid-gallery-controls-play"),Ja=Ka.find(".ts-polaroid-gallery-controls-next");Na.bind("click touchstart",L),Ua.bind("click touchstart",L),Ja.bind("click touchstart",L),Na.bind("mouseover",z),Ua.bind("mouseover",z),Ja.bind("mouseover",z),Na.bind("mouseout",A),Ua.bind("mouseout",A),Ja.bind("mouseout",A),N?Ua.find("span").alterClass("ts-ecommerce-*","ts-ecommerce-pause"):Ua.find("span").alterClass("ts-ecommerce-*","ts-ecommerce-play");var Xa=!1;return oa.mouseenter(function(){Xa=!0,N&&I()}).mouseleave(function(){Xa=!1,Ra||!N||Ea||S()}),jQuery(window).on("debouncedresize",function(){if(!ta)return!1;var t=parseInt(ia.attr("data-maxheight")),a=parseInt(ia.attr("data-lastwidth")),e=(parseInt(ia.attr("data-lastheight")),ia.width()),i=0,o=oa.width()*Math.cos(Fa)+oa.height()*Math.sin(Fa);return e>o&&(i=(e-o)/2),na.css("topright"==ia.attr("data-position")||"bottomright"==ia.attr("data-position")?{right:Math.abs(i)+"px"}:{left:Math.abs(i)+"px"}),a==e?!1:(oa.hide(),na.hide(),Ka.hide(),sa.show(),ia.css({height:t+"px"}),oa.css({width:"100%",height:"100%"}),ra.css({width:"100%",height:"100%"}),setTimeout(function(){u()},1e3),void 0)}),l(),this}}(jQuery);
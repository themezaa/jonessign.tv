function strip_tags(t,e){e=(((e||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var i=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,n=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return t.replace(n,"").replace(i,function(t,i){return e.indexOf("<"+i.toLowerCase()+">")>-1?t:""})}var NextendSmartSliderAdminStorage=function(){this.timelineManager=null,this.timelineControl=null,this.slide=null,this.frontend=null,this.generator=null,this.layerManager=null,this.history=null,this.oneSecWidth=200,this.oneSecMs=1e3,this.fps=20,this.pxToFrame=this.oneSecWidth/this.fps,this.$currentSlideElement=null};NextendSmartSliderAdminStorage.prototype.durationToOffsetX=function(t){return t*this.oneSecWidth},NextendSmartSliderAdminStorage.prototype.offsetXToDuration=function(t){return t/this.oneSecWidth},NextendSmartSliderAdminStorage.prototype.normalizeOffsetX=function(t){return Math.round(t/this.pxToFrame)*this.pxToFrame},NextendSmartSliderAdminStorage.prototype.startEditor=function(t,e,i,n,a,o){return null===this.slide&&window[t].started(function(){new SmartSliderAdminSlide(t,e,i,n,a,o)}),this.slide},window.nextend.pre="div#n2-ss-0 ",window.nextend.smartSlider=new NextendSmartSliderAdminStorage,function(t,e,i){function n(){this.type="backgroundanimation",NextendVisualManagerMultipleSelection.prototype.constructor.apply(this,arguments)}n.prototype=Object.create(NextendVisualManagerMultipleSelection.prototype),n.prototype.constructor=n,n.prototype.loadDefaults=function(){NextendVisualManagerMultipleSelection.prototype.loadDefaults.apply(this,arguments),this.type="backgroundanimation",this.labels={visual:"Background animation",visuals:"Background animations"}},n.prototype.initController=function(){return new NextendBackgroundAnimationEditorController},n.prototype.createVisual=function(t,e){return new NextendVisualWithSetRowMultipleSelection(t,e,this)},i.NextendBackgroundAnimationManager=n}(nextend.smartSlider,n2,window),function(t,e){function i(){this.parameters={shiftedBackgroundAnimation:0},NextendVisualEditorController.prototype.constructor.call(this,!1),this.bgAnimationElement=t(".n2-bg-animation"),this.slides=t(".n2-bg-animation-slide"),this.bgImages=t(".n2-bg-animation-slide-bg"),NextendTween.set(this.bgImages,{rotationZ:1e-4}),this.directionTab=new NextendElementRadio("n2-background-animation-preview-tabs",["0","1"]),this.directionTab.element.on("nextendChange.n2-editor",t.proxy(this.directionTabChanged,this)),nModernizr.csstransforms3d&&nModernizr.csstransformspreserve3d||nextend.notificationCenter.error("Background animations are not available in your browser. It works if the <i>transform-style: preserve-3d</i> feature available. ")}i.prototype=Object.create(NextendVisualEditorController.prototype),i.prototype.constructor=i,i.prototype.loadDefaults=function(){NextendVisualEditorController.prototype.loadDefaults.call(this),this.type="backgroundanimation",this.current=0,this.animationProperties=!1,this.direction=0},i.prototype.get=function(){return null},i.prototype.load=function(t,e,i,n){this.lightbox.addClass("n2-editor-loaded")},i.prototype.setTabs=function(t){},i.prototype.directionTabChanged=function(){this.direction=parseInt(this.directionTab.element.val())},i.prototype.start=function(){this.animationProperties&&(this.timeline?this.timeline.play():this.next())},i.prototype.pause=function(){this.timeline&&this.timeline.pause()},i.prototype.next=function(){this.timeline=new NextendTimeline({paused:!0,onComplete:t.proxy(this.ended,this)});var e=this.bgImages.eq(this.current),i=this.bgImages.eq(1-this.current);nModernizr.csstransforms3d&&nModernizr.csstransformspreserve3d?(this.currentAnimation=new window["NextendSmartSliderBackgroundAnimation"+this.animationProperties.type](this,e,i,this.animationProperties,1,this.direction),this.slides.eq(this.current).css("zIndex",2),this.slides.eq(1-this.current).css("zIndex",3),this.timeline.to(this.slides.eq(this.current),.5,{opacity:0},this.currentAnimation.getExtraDelay()),this.timeline.to(this.slides.eq(1-this.current),.5,{opacity:1},this.currentAnimation.getExtraDelay()),this.currentAnimation.postSetup()):(this.timeline.to(this.slides.eq(this.current),1.5,{opacity:0},0),this.timeline.to(this.slides.eq(1-this.current),1.5,{opacity:1},0)),this.current=1-this.current,this.timeline.play()},i.prototype.ended=function(){this.currentAnimation&&this.currentAnimation.ended(),this.next()},i.prototype.setAnimationProperties=function(t){var e=this.animationProperties;this.animationProperties=t,e||this.next()},e.NextendBackgroundAnimationEditorController=i}(n2,window),function(t,e){function i(e){this.createSliderModal=null,this.ajaxUrl=e,t(".n2-ss-create-slider").click(t.proxy(function(t){t.preventDefault(),t.stopImmediatePropagation(),this.showModal()},this)),this.notificationStack=new NextendNotificationCenterStackModal(t("body")),t(".n2-ss-demo-slider").click(t.proxy(function(e){e.preventDefault(),e.stopImmediatePropagation(),nextend.smartSlider.license.isActiveAsync().done(t.proxy(this.showDemoSliders,this))},this)),"createslider"==window.location.hash.substring(1)&&this.showModal()}i.prototype.showModal=function(){if(!this.createSliderModal){var e=this.ajaxUrl,i=[];i.push({key:"default",name:n2_("Default"),image:"$ss$/admin/images/sliderpresets/default.png"}),i.push({key:"fullwidth",name:n2_("Full width"),image:"$ss$/admin/images/sliderpresets/fullwidth.png"}),i.push({key:"fullpage",name:n2_("Full page"),image:"$ss$/admin/images/sliderpresets/fullpage.png"}),i.push({key:"block",name:n2_("Block"),image:"$ss$/admin/images/sliderpresets/block.png"}),i.push({key:"carousel",name:n2_("Carousel"),image:"$ss$/admin/images/sliderpresets/carousel.png"}),i.push({key:"showcase",name:n2_("Showcase"),image:"$ss$/admin/images/sliderpresets/showcase.png"}),i.push({key:"thumbnailhorizontal",name:n2_("Thumbnail - horizontal"),image:"$ss$/admin/images/sliderpresets/thumbnailhorizontal.png"}),i.push({key:"thumbnailvertical",name:n2_("Thumbnail - vertical"),image:"$ss$/admin/images/sliderpresets/thumbnailvertical.png"}),i.push({key:"caption",name:n2_("Caption"),image:"$ss$/admin/images/sliderpresets/caption.png"}),i.push({key:"horizontalaccordion",name:n2_("Horizontal accordion"),image:"$ss$/admin/images/sliderpresets/horizontalaccordion.png"}),i.push({key:"verticalaccordion",name:n2_("Vertical accordion"),image:"$ss$/admin/images/sliderpresets/verticalaccordion.png"}),this.createSliderModal=new NextendModal({zero:{size:[N2SSPRO?750:550,N2SSPRO?630:520],title:n2_("Create Slider"),back:!1,close:!0,content:'<form class="n2-form"></form>',controls:['<a href="#" class="n2-button n2-button-big n2-button-green n2-uc n2-h4">'+n2_("Create")+"</a>"],fn:{show:function(){var n=this.controls.find(".n2-button-green"),a=this.content.find(".n2-form").on("submit",function(t){t.preventDefault(),n.trigger("click")});a.append(this.createInput(n2_("Slider name"),"slidertitle","width: 240px;")),a.append(this.createInputUnit(n2_("Width"),"sliderwidth","px","width: 30px;")),a.append(this.createInputUnit(n2_("Height"),"sliderheight","px","width: 30px;")),new NextendElementAutocompleteSimple("sliderwidth",["1920","1400","1000","800","600","400"]),new NextendElementAutocompleteSimple("sliderheight",["800","600","500","400","300","200"]);var o=t("#slidertitle").val(n2_("Slider")).focus(),r=t("#sliderwidth").val(900),s=t("#sliderheight").val(500);r.parent().addClass("n2-form-element-autocomplete ui-front"),s.parent().addClass("n2-form-element-autocomplete ui-front"),this.createHeading(n2_("Preset")).appendTo(this.content);var l=this.createImageRadio(i).css("height",N2SSPRO?360:100).appendTo(this.content),d=l.find("input");n.on("click",t.proxy(function(){NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(e,{nextendaction:"create"}),data:{sliderTitle:o.val(),sliderSizeWidth:r.val(),sliderSizeHeight:s.val(),preset:d.val()},dataType:"json"}).done(t.proxy(function(t){NextendAjaxHelper.startLoading()},this))},this))}}}})}this.createSliderModal.show()},i.prototype.showDemoSliders=function(){var e=this;t("body").css("overflow","hidden");var i=0;i=1;var n=t('<iframe src="//smartslider3.com/demo-import/?pro='+i+"&utm_campaign="+N2SS3C+"&utm_source=import-slider-frame&utm_medium=smartslider-"+N2PLATFORM+"-"+(i?"pro":"free")+'" frameborder="0"></iframe>').css({position:"fixed",zIndex:1e5,left:0,top:0,width:"100%",height:"100%"}).appendTo("body"),a=function(){t("body").css("overflow",""),n.remove(),window.removeEventListener("message",r,!1),e.notificationStack.popStack()},o=function(t){NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(e.ajaxUrl,{nextendaction:"importDemo"}),data:{key:Base64.encode(t.replace(/^(http(s)?:)?\/\//,"//"))},dataType:"json"}).fail(function(){})},r=function(t){if("http://smartslider3.com"===t.origin||"https://smartslider3.com"===t.origin){var e=t.data;switch(e.key){case"importSlider":return void o(e.data.href);case"closeWindow":a()}}};this.notificationStack.enableStack(),NextendEsc.add(t.proxy(function(){return a(),!0},this)),window.addEventListener("message",r,!1)},e.NextendSmartSliderCreateSlider=i}(n2,window),Array.prototype.filter||(Array.prototype.filter=function(t){"use strict";if(void 0===this||null===this)throw new TypeError;var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var n=[],a=arguments[1],o=0;i>o;o++)if(o in e){var r=e[o];t.call(a,r,o,e)&&n.push(r)}return n}),function(t,e,i){function n(){this.$input=t('<input type="text" name="name" />').on({mouseup:function(t){t.stopPropagation()},keyup:t.proxy(function(t){27==t.keyCode&&this.cancel()},this),blur:t.proxy(this.save,this)}),this.$form=t('<form class="n2-inline-form"></form>').append(this.$input).on("submit",t.proxy(this.save,this))}n.prototype.injectNode=function(t,e){this.$input.val(e),t.append(this.$form),this.$input.focus()},n.prototype.save=function(t){t.preventDefault(),this.$input.trigger("valueChanged",[this.$input.val()]),this.$input.off("blur"),this.destroy()},n.prototype.cancel=function(){this.$input.trigger("cancel"),this.destroy()},n.prototype.destroy=function(){this.$input.off("blur"),this.$form.remove()},e.NextendSmartSliderAdminInlineField=n}(n2,window),function(t,e,i){function n(){NextendVisualManagerEditableSets.prototype.constructor.apply(this,arguments)}function a(){NextendVisualWithSetRow.prototype.constructor.apply(this,arguments)}n.prototype=Object.create(NextendVisualManagerEditableSets.prototype),n.prototype.constructor=n,n.prototype.loadDefaults=function(){NextendVisualManagerEditableSets.prototype.loadDefaults.apply(this,arguments),this.type="layout",this.labels={visual:"layout",visuals:"layouts"},this.fontClassName=""},n.prototype.initController=function(){return new NextendLayoutEditorController},n.prototype.createVisual=function(t,e){return new a(t,e,this)},i.NextendLayoutManager=n,a.prototype=Object.create(NextendVisualWithSetRow.prototype),a.prototype.constructor=a,a.prototype.activate=function(i){"undefined"!=typeof i&&i.preventDefault();var n=e.proxy(function(e,i){t.slide.loadLayout(this.value,e,i)},this);new NextendModal({zero:{size:[500,140],title:n2_("Load layout"),back:!1,close:!0,content:"",controls:['<a href="#" class="n2-button n2-button-big n2-button-grey n2-uc n2-h4">'+n2_("Load whole slide")+"</a>",'<a href="#" class="n2-button n2-button-big n2-button-green n2-uc n2-h4">'+n2_("Load only layers")+"</a>"],fn:{show:function(){this.controls.find(".n2-button-green").on("click",e.proxy(function(t){t.preventDefault(),n(!1,!1),this.hide(t)},this)),this.controls.find(".n2-button-grey").on("click",e.proxy(function(t){t.preventDefault(),n(!0,!0),this.hide(t)},this))}}}},!0)},i.NextendSmartSliderLayout=a}(nextend.smartSlider,n2,window),function(t,e){function i(){NextendVisualEditorController.prototype.constructor.call(this,!1)}i.prototype=Object.create(NextendVisualEditorController.prototype),i.prototype.constructor=i,i.prototype.loadDefaults=function(){NextendVisualEditorController.prototype.loadDefaults.call(this),this.type="layout",this.preview=null},i.prototype.get=function(){return window.nextend.smartSlider.slide.getLayout()},e.NextendLayoutEditorController=i}(n2,window),function(t,e,i,n){"use strict";function a(){this.historyStates=50,this.isEnabled=0!=this.historyStates,this.historyAddAllowed=!0,this.isBatched=!1,this.index=-1,this.history=[],this.preventUndoRedo=!1,this.undoBTN=e("#n2-ss-undo").on("click",e.proxy(this.undo,this)),this.redoBTN=e("#n2-ss-redo").on("click",e.proxy(this.redo,this)),this.updateUI()}a.prototype.updateUI=function(){0==this.index||0==this.history.length?this.undoBTN.removeClass("n2-active"):this.undoBTN.addClass("n2-active"),-1==this.index||this.index>=this.history.length?this.redoBTN.removeClass("n2-active"):this.redoBTN.addClass("n2-active")},a.prototype.throttleUndoRedo=function(){return this.preventUndoRedo?!0:(this.preventUndoRedo=!0,setTimeout(e.proxy(function(){this.preventUndoRedo=!1},this),100),!1)},a.prototype.add=function(t){this.isEnabled&&this.historyAddAllowed&&(-1!=this.index&&this.history.splice(this.index,this.history.length),this.index=-1,this.isBatched?this.history[this.history.length-1].push(t()):(this.history.push([t()]),this.isBatched=!0,setTimeout(e.proxy(function(){this.isBatched=!1},this),100)),this.history.length>this.historyStates&&this.history.unshift(),this.updateUI())},a.prototype.off=function(){this.historyAddAllowed=!1},a.prototype.on=function(){this.historyAddAllowed=!0},a.prototype.undo=function(t){if(t&&t.preventDefault(),this.throttleUndoRedo())return!1;if(this.off(),-1==this.index?this.index=this.history.length-1:this.index--,this.index>=0)for(var e=this.history[this.index],i=e.length-1;i>=0;i--){var n=e[i];n[0].history(n[1],n[3],n[4],n)}else this.index=0;this.on(),this.updateUI()},a.prototype.redo=function(t){if(t&&t.preventDefault(),this.throttleUndoRedo())return!1;if(this.off(),-1!=this.index&&this.index<this.history.length){var e=this.history[this.index];this.index++;for(var i=0;i<e.length;i++){var n=e[i];n[0].history(n[1],n[2],n[4],n)}}this.on(),this.updateUI()},a.prototype.changeFuture=function(t,e){for(var i=0;i<this.history.length;i++)for(var n=0;n<this.history[i].length;n++){this.history[i][n][0]===t&&(this.history[i][n][0]=e);for(var a=0;a<this.history[i][n][4].length;a++)this.history[i][n][4][a]===t&&(this.history[i][n][4][a]=e)}},n2(window).ready(function(){t.history=new a})}(nextend.smartSlider,n2,window),function(t,e){function i(e,i,n){nextend.smartSlider.license=this,this.addLicenseModal=!1,this.hasKey=e,this.maybeActive=i,this.ajaxUrl=n,this.boxAddLicense=t(".n2-box-add-license"),this.boxDeAuthorize=t(".n2-box-license-activated"),window.addLicense=t.proxy(this.addLicense,this),window.checkLicense=t.proxy(this.checkLicense,this)}i.prototype.checkLicense=function(t,e){return NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendaction:"check",cacheAccepted:t+0,verbose:e+0}),dataType:"json"})},i.prototype.addLicense=function(){if(this._deferred=t.Deferred(),!this.addLicenseModal){var e=this,i=!1;this.addLicenseModal=new NextendModal({zero:{size:[500,230],title:n2_("Add license"),back:!1,close:!0,content:'<form class="n2-form"></form>',controls:['<a href="#" class="n2-button n2-button-big n2-button-green n2-uc n2-h4">'+n2_("Authorize")+"</a>"],fn:{show:function(){i=!1;var n=this.controls.find(".n2-button-green"),a=this.content.find(".n2-form").on("submit",function(t){t.preventDefault(),n.trigger("click")});a.append(this.createInput(n2_("License key")+' - <a style="font-size:11px;" href="http://secure.nextendweb.com/" target="_blank">'+n2_("Forgot your license key?")+"</a>","license-key","width: 440px;"));var o=t("#license-key").val("").focus();n.on("click",t.proxy(function(n){NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(e.ajaxUrl,{nextendaction:"add"}),data:{licenseKey:o.val().replace(/\s/g,"")},dataType:"json"}).done(t.proxy(function(t){t.data.valid&&(e.boxAddLicense.addClass("n2-ss-license-has-active-key"),e.boxDeAuthorize.removeClass("n2-ss-license-no-active-key").find("code").html("License code valid"),e.hasKey=!0,e.maybeActive=!0,i=!0,this.hide(n),e._deferred.resolve(),nextend.notificationCenter.notice("Smart Slider 3 activated!"))},this))},this))},hide:function(){i||"pending"!=e._deferred.state()||e._deferred.reject()}}}})}return this.addLicenseModal.show(),this._deferred},i.prototype.isActiveAsync=function(){var e=t.Deferred(),i=t.proxy(function(){this.addLicense().done(function(){e.resolve()}).fail(function(){e.reject()})},this);return this.hasKey?this.maybeActive?e.resolve():this.checkLicense(!0,!1).done(function(){e.resolve()}).fail(function(){i()}):i(),e.fail(t.proxy(function(){this.maybeActive=!1},this)),e},e.NextendSmartSliderLicense=i}(n2,window),function(t,e,i){function n(){this.type="postbackgroundanimation",NextendVisualManagerMultipleSelection.prototype.constructor.apply(this,arguments)}n.prototype=Object.create(NextendVisualManagerMultipleSelection.prototype),n.prototype.constructor=n,n.prototype.loadDefaults=function(){NextendVisualManagerMultipleSelection.prototype.loadDefaults.apply(this,arguments),this.type="postbackgroundanimation",this.labels={visual:"Ken Burns effect",visuals:"Ken Burns effects"}},n.prototype.initController=function(){return new NextendPostBackgroundAnimationEditorController},n.prototype.createVisual=function(t,e){return new NextendVisualWithSetRowMultipleSelection(t,e,this)},n.prototype.show=function(t,e){var i=[];""!=t&&(t=t.split("|*|"),i[0]=t[0],i[1]=t[1],t=t[2]),NextendVisualManagerMultipleSelection.prototype.show.call(this,t,e,i)},n.prototype.getAsString=function(){return this.controller.transformOrigin+"|*|"+NextendVisualManagerMultipleSelection.prototype.getAsString.call(this)},i.NextendPostBackgroundAnimationManager=n}(nextend.smartSlider,n2,window),function(t,e){function i(){NextendVisualEditorController.prototype.constructor.call(this,!1),this.bgAnimationElement=t(".n2-postbg-animation-slider").on("click",t.proxy(this.clickFocusPoint,this)),this.bgImage=this.bgAnimationElement.find(".n2-postbg-animation-slide"),nModernizr.csstransforms3d||nextend.notificationCenter.error("Background animations are not available in your browser. It works if the <i>3D transform</i> feature available. "),this.transformOriginField=t("#n2-post-backgroundtransformorigin").on("nextendChange",t.proxy(this.changeFocus,this))}i.prototype=Object.create(NextendVisualEditorController.prototype),i.prototype.constructor=i,i.prototype.loadDefaults=function(){NextendVisualEditorController.prototype.loadDefaults.call(this),this.type="postbackgroundanimation",this.tween=null,this.animationProperties=!1,this.transformOrigin="50||50"},i.prototype.clickFocusPoint=function(t){var e=this.bgAnimationElement.offset(),i=Math.round((t.pageX-e.left)/this.bgAnimationElement.width()*100),n=Math.round((t.pageY-e.top)/this.bgAnimationElement.height()*100);this.transformOriginField.data("field").insideChange(i+"|*|"+n)},i.prototype.changeFocus=function(){this.transformOrigin=this.transformOriginField.val(),this.animationProperties&&this.setAnimationProperties(this.animationProperties)},i.prototype.setImage=function(){if(nextend&&nextend.smartSlider&&nextend.smartSlider.frontend){var t=nextend.smartSlider.frontend;if("undefined"!=typeof t){var e=t.backgroundImages.getBackgroundImages();this.bgImage.html(""),e[t.currentSlideIndex].image.clone().appendTo(this.bgImage);var i=this.bgAnimationElement.parent().width()-40,n=t.dimensions.width,a=t.dimensions.height;n>i&&(a=a*i/n,n=i),this.bgAnimationElement.css({width:n,height:a})}}},i.prototype.get=function(){return null},i.prototype.load=function(t,e,i,n){this.lightbox.addClass("n2-editor-loaded")},i.prototype.setTabs=function(t){},i.prototype.start=function(t){this.setImage(),this.transformOriginField.data("field").insideChange(t[0]+"|*|"+t[1])},i.prototype.pause=function(){this.tween&&this.tween.pause()},i.prototype.next=function(){var e=t.extend(!0,{},this.animationProperties);"undefined"==typeof e.from.transformOrigin&&NextendTween.set(this.bgImage,{transformOrigin:this.transformOrigin.split("|*|").join("% ")+"%"}),e.to.delay=.5,e.to.onComplete=t.proxy(this.next,this),this.tween=NextendTween.fromTo(this.bgImage,e.duration,e.from,e.to)},i.prototype.setAnimationProperties=function(t){this.animationProperties=t,this.pause(),NextendTween.set(this.bgImage,{scale:1,x:0,y:0,rotationZ:1e-4,transformOrigin:"50% 50%"}),this.next()},e.NextendPostBackgroundAnimationEditorController=i}(n2,window),function(t,e,i){function n(e){var i=t("#n2-quick-slides-edit");i.length<1||(this.ajaxUrl=e,i.on("click",t.proxy(this.openEdit,this)))}n.prototype.openEdit=function(e){e.preventDefault();var i=t("#n2-ss-slides .n2-box-slide"),n=this;this.modal=new NextendModal({zero:{fit:!0,fitX:!1,overflow:"auto",size:[1200,700],title:n2_("Quick Edit - Slides"),back:!1,close:!0,content:'<form class="n2-form"><table></table></form>',controls:['<a href="#" class="n2-button n2-button-big n2-button-green n2-uc n2-h4">'+n2_("Save")+"</a>"],fn:{show:function(){var e=this.controls.find(".n2-button-green"),a=this.content.find(".n2-form").on("submit",function(t){t.preventDefault(),e.trigger("click")}),o=a.find("table");i.each(t.proxy(function(e,i){var a=t(i),r=t("<tr />").appendTo(o),s=a.data("slideid");r.append(t("<td />").append('<img src="'+a.data("image")+'" style="width:100px;"/>')),r.append(t("<td />").append(n.createInput("Name","title-"+s,a.data("title"),"width: 240px;"))),r.append(t("<td />").append(n.createTextarea("Description","description-"+s,a.data("description"),"width: 330px;height:24px;")));var l=a.data("link").split("|*|");r.append(t("<td />").append(n.createLink("Link","link-"+s,l[0],"width: 180px;"))),r.append(t("<td />").append(n.createTarget("Target","target-"+s,l.length>1?l[1]:"_self",""))),new NextendElementUrl("link-"+s,nextend.NextendElementUrlParams)},this)),e.on("click",t.proxy(function(e){var a={};i.each(t.proxy(function(e,i){var n=t(i),o=n.data("slideid"),r=t("#title-"+o).val(),s=t("#description-"+o).val(),l=t("#link-"+o).val()+"|*|"+t("#target-"+o).val();r==n.data("title")&&s==n.data("description")&&l==n.data("link")||(a[o]={name:r,description:s,link:l})},this)),jQuery.isEmptyObject(a)?this.hide(e):(this.hide(e),NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(n.ajaxUrl),data:{changed:Base64.encode(JSON.stringify(a))},dataType:"json"}).done(t.proxy(function(e){var i=e.data;for(var n in i){var a=t('.n2-box-slide[data-slideid="'+n+'"]');a.find(".n2-box-placeholder a.n2-h4").html(i[n].title),a.attr("data-title",i[n].rawTitle),a.data("title",i[n].rawTitle),a.attr("data-description",i[n].rawDescription),a.data("description",i[n].rawDescription),a.attr("data-link",i[n].rawLink),a.data("link",i[n].rawLink)}},this)))},this))}}}}),this.modal.setCustomClass("n2-ss-quick-slides-edit-modal"),this.modal.show()},n.prototype.createInput=function(e,i,n){var a="";4==arguments.length&&(a=arguments[3]);var o=t('<div class="n2-form-element-mixed"><div class="n2-mixed-group"><div class="n2-mixed-label"><label for="'+i+'">'+e+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-text n2-border-radius"><input type="text" id="'+i+'" class="n2-h5" autocomplete="off" style="'+a+'"></div></div></div></div>');return o.find("input").val(n),o},n.prototype.createTextarea=function(e,i,n){var a="";4==arguments.length&&(a=arguments[3]);var o=t('<div class="n2-form-element-mixed"><div class="n2-mixed-group"><div class="n2-mixed-label"><label for="'+i+'">'+e+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-textarea n2-border-radius"><textarea id="'+i+'" class="n2-h5" autocomplete="off" style="resize:y;'+a+'"></textarea></div></div></div></div>');return o.find("textarea").val(n),o},n.prototype.createLink=function(e,i,n){var a="";4==arguments.length&&(a=arguments[3]);var o=t('<div class="n2-form-element-mixed"><div class="n2-mixed-group"><div class="n2-mixed-label"><label for="'+i+'">'+e+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-text n2-border-radius"><input type="text" id="'+i+'" class="n2-h5" autocomplete="off" style="'+a+'"><a href="#" class="n2-form-element-clear"><i class="n2-i n2-it n2-i-empty n2-i-grey-opacity"></i></a><a id="'+i+'_button" class="n2-form-element-button n2-h5 n2-uc" href="#">Link</a></div></div></div></div>');return o.find("input").val(n),o},n.prototype.createTarget=function(e,i,n){var a="";4==arguments.length&&(a=arguments[3]);var o=t('<div class="n2-form-element-mixed"><div class="n2-mixed-group"><div class="n2-mixed-label"><label for="'+i+'">'+e+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-list"><select id="'+i+'" autocomplete="off" style="'+a+'"><option value="_self">Self</option><option value="_blank">Blank</option></select</div></div></div></div>');return o.find("select").val(n),o},e.NextendSmartSliderQuickSlides=n}(n2,window),function(t,e,i){function n(e,i,n,o,r,s){this.quickPostModal=null,this.quickVideoModal=null,this.parameters=n,this.slides=[],this.ajaxUrl=e,this.contentAjaxUrl=i,this.slidesPanel=t("#n2-ss-slides"),this.slidesContainer=this.slidesPanel.find(".n2-ss-slides-container"),this.initSlidesOrderable();for(var l=this.slidesContainer.find(".n2-box-slide"),d=0;d<l.length;d++)this.slides.push(new a(this,l.eq(d)));if(this.slides.length>0&&this.slidesPanel.addClass("n2-ss-has-slides"),t(".n2-add-quick-image").on("click",t.proxy(this.addQuickImage,this)),t(".n2-box-slide-add").on("click",t.proxy(this.addQuickImage,this)),t(".n2-add-quick-video").on("click",t.proxy(this.addQuickVideo,this)),t(".n2-add-quick-post").on("click",t.proxy(this.addQuickPost,this)),this.initBulk(),0==t("#n2-ss-slide-editor-main-tab").length&&new NextendSmartSliderSidebarSlides,!o){var p=[];this.slidesContainer.fileupload({url:r,pasteZone:!1,dropZone:this.slidesContainer,dataType:"json",paramName:"image",add:t.proxy(function(t,e){e.formData={path:"/"+s},e.submit()},this),done:t.proxy(function(t,e){var i=e.result;i.data&&i.data.name?p.push({title:i.data.name,description:"",image:i.data.url}):NextendAjaxHelper.notification(i)},this),fail:t.proxy(function(t,e){NextendAjaxHelper.notification(e.jqXHR.responseJSON)},this),start:function(){NextendAjaxHelper.startLoading()},stop:t.proxy(function(){p.length?this._addQuickImages(p):setTimeout(function(){NextendAjaxHelper.stopLoading()},100),p=[]},this)});var h=null;this.slidesContainer.on("dragover",t.proxy(function(e){null!==h?(clearTimeout(h),h=null):this.slidesContainer.addClass("n2-drag-over"),h=setTimeout(t.proxy(function(){this.slidesContainer.removeClass("n2-drag-over"),h=null},this),400)},this))}}function a(e,i){this.selected=!1,this.manager=e,this.box=i.data("slide",this).addClass("n2-clickable"),this.normalMode(),this.box.find(".n2-slide-first").on("click",t.proxy(this.setFirst,this)),this.publishElement=this.box.find(".n2-slide-published").on("click",t.proxy(this.switchPublished,this)),this.box.find(".n2-slide-duplicate").on("click",t.proxy(this.duplicate,this)),this.box.find(".n2-slide-delete").on("click",t.proxy(this["delete"],this))}n.prototype.changed=function(){this.slides.length>0?this.slidesPanel.addClass("n2-ss-has-slides"):this.slidesPanel.removeClass("n2-ss-has-slides")},n.prototype.initSlidesOrderable=function(){this.slidesContainer.sortable({items:".n2-box-slide",tolerance:"pointer",stop:t.proxy(this.saveSlideOrder,this),helper:"clone",placeholder:"n2-box-placeholder n2-box"})},n.prototype.saveSlideOrder=function(e){for(var i=this.slidesContainer.find(".n2-box-slide"),n=[],a=[],o=[],r=0;r<i.length;r++){var s=i.eq(r).data("slide");n.push(s),a.push(s.getId())}for(var r=0;r<this.slides.length;r++)o.push(this.slides[r].getId());if(JSON.stringify(o)!=JSON.stringify(a)){t(window).triggerHandler("SmartSliderSidebarSlidesOrderChanged");var l={nextendcontroller:"slides",nextendaction:"order"};NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,l),data:{slideorder:a}}),this.slides=n,this.changed()}},n.prototype.initSlides=function(){for(var e=(this.slides.length,this.slidesContainer.find(".n2-box-slide")),i=[],n=0;n<e.length;n++){var a=e.eq(n).data("slide");i.push(a)}this.slides=i,this.changed(),t(window).triggerHandler("SmartSliderSidebarSlidesChanged")},n.prototype.unsetFirst=function(){for(var t=0;t<this.slides.length;t++)this.slides[t].unsetFirst();this.changed()},n.prototype.addQuickImage=function(e){e.preventDefault(),nextend.imageHelper.openMultipleLightbox(t.proxy(this._addQuickImages,this))},n.prototype._addQuickImages=function(e){NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendaction:"quickImages"}),data:{images:Base64.encode(JSON.stringify(e))}}).done(t.proxy(function(e){var i=t(e.data).insertBefore(this.slidesContainer.find(".n2-clear"));i.each(t.proxy(function(e,i){new a(this,t(i))},this)),this.initSlides()},this))},n.prototype.addQuickVideo=function(e){e.preventDefault();var i=this;this.quickVideoModal||(this.quickVideoModal=new NextendModal({zero:{size:[500,350],title:n2_("Add video"),back:!1,close:!0,content:'<form class="n2-form"></form>',controls:['<a href="#" class="n2-button n2-button-big n2-button-green n2-uc n2-h4">'+n2_("Add video")+"</a>"],fn:{show:function(){var e=this.controls.find(".n2-button"),n=(this.content.find(".n2-form").on("submit",function(t){t.preventDefault(),e.trigger("click")}).append(this.createInput(n2_("Video url"),"n2-slide-video-url","width: 446px;")),this.content.find("#n2-slide-video-url").focus());this.content.append(this.createHeading(n2_("Examples"))),this.content.append(this.createTable([["YouTube","https://www.youtube.com/watch?v=MKmIwHAFjSU"],["Vimeo","https://vimeo.com/144598279"]],["",""])),e.on("click",t.proxy(t.proxy(function(e){e.preventDefault();var a=n.val(),o=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,r=a.match(o),s=/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/,l=a.match(s),d=a.match(/\.(mp4|ogv|ogg|webm)/i);r?NextendAjaxHelper.getJSON("https://www.googleapis.com/youtube/v3/videos?id="+encodeURI(r[2])+"&part=snippet&key=AIzaSyC3AolfvPAPlJs-2FgyPJdEEKS6nbPHdSM").done(t.proxy(function(t){if(t.items.length){var e=t.items[0].snippet,n=t.items[0].snippet.thumbnails,o=n.maxres||n.standard||n.high||n.medium||n["default"];i._addQuickVideo(this,{type:"youtube",title:e.title,description:e.description,image:o.url,video:a})}},this)).fail(function(t){nextend.notificationCenter.error(t.error.errors[0].message)}):l?NextendAjaxHelper.getJSON("https://vimeo.com/api/v2/video/"+l[3]+".json").done(t.proxy(function(t){i._addQuickVideo(this,{type:"vimeo",title:t[0].title,description:t[0].description,video:l[3],image:t[0].thumbnail_large})},this)).fail(function(t){nextend.notificationCenter.error(t.responseText)}):d?i._addQuickVideo(this,{type:"video",title:a,description:"",format:d[1],video:a,image:""}):nextend.notificationCenter.error("This video url is not supported!")},this)))}}}})),this.quickVideoModal.show()},n.prototype._addQuickVideo=function(e,i){NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendaction:"quickVideo"}),data:{video:Base64.encode(JSON.stringify(i))}}).done(t.proxy(function(e){var i=t(e.data).insertBefore(this.slidesContainer.find(".n2-clear"));new a(this,i),this.initSlides()},this)),e.hide()},n.prototype.addQuickPost=function(e){if(e.preventDefault(),!this.quickPostModal){var i=this,n={},a=t.proxy(function(t){return"undefined"==typeof n[t]&&(n[t]=NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(this.contentAjaxUrl),data:{keyword:t},dataType:"json"})),n[t]},this);this.quickPostModal=new NextendModal({zero:{size:[600,430],title:n2_("Add post"),back:!1,close:!0,content:'<div class="n2-form"></div>',fn:{show:function(){this.content.find(".n2-form").append(this.createInput(n2_("Keyword"),"n2-ss-keyword","width:546px;"));
var e=t("#n2-ss-keyword"),n=this.createHeading("").appendTo(this.content),o=this.createResult().appendTo(this.content),r="";e.on("keyup",t.proxy(function(){r=e.val(),a(r).done(t.proxy(function(a){if(e.val()==r){""==r?n.html(n2_("No search term specified. Showing recent items.")):n.html(n2_printf(n2_('Showing items match for "%s"'),r));for(var s=a.data,l=[],d=this,p=0;p<s.length;p++)l.push([s[p].title,s[p].info,t('<div class="n2-button n2-button-green n2-button-x-small n2-uc n2-h5">'+n2_("Select")+"</div>").on("click",{post:s[p]},function(t){i._addQuickPost(d,t.data.post)})]);o.html(""),this.createTable(l,["width:100%;","",""]).appendTo(this.createTableWrap().appendTo(o))}},this))},this)).trigger("keyup").focus()}}}})}this.quickPostModal.show()},n.prototype._addQuickPost=function(e,i){i.image||(i.image=""),NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendaction:"quickPost"}),data:{post:i}}).done(t.proxy(function(e){var i=t(e.data).insertBefore(this.slidesContainer.find(".n2-clear"));new a(this,i),this.initSlides()},this)),e.hide()},n.prototype.initBulk=function(){t(".n2-slides-bulk").on("click",t.proxy(this.enterBulk,this)),t(".n2-bulk-cancel").on("click",t.proxy(this.leaveBulk,this));var e=t(".n2-bulk-select").find("a");e.eq(0).on("click",t.proxy(function(t){t.preventDefault(),this.bulkSelect(function(t){t.invertSelection()})},this)),e.eq(1).on("click",t.proxy(function(t){t.preventDefault(),this.bulkSelect(function(t){t.select()})},this)),e.eq(2).on("click",t.proxy(function(t){t.preventDefault(),this.bulkSelect(function(t){t.deSelect()})},this)),e.eq(3).on("click",t.proxy(function(t){t.preventDefault(),this.bulkSelect(function(t){t.publishElement.hasClass("n2-active")?t.select():t.deSelect()})},this)),e.eq(4).on("click",t.proxy(function(t){t.preventDefault(),this.bulkSelect(function(t){t.publishElement.hasClass("n2-active")?t.deSelect():t.select()})},this));var i=t(".n2-bulk-action").find("a");i.eq(0).on("click",t.proxy(function(t){t.preventDefault(),this.bulkAction("deleteSlides")},this)),i.eq(1).on("click",t.proxy(function(t){t.preventDefault(),this.bulkAction("duplicateSlides")},this)),i.eq(2).on("click",t.proxy(function(t){t.preventDefault(),this.bulkAction("publishSlides")},this)),i.eq(3).on("click",t.proxy(function(t){t.preventDefault(),this.bulkAction("unPublishSlides")},this))},n.prototype.bulkSelect=function(t){for(var e=0;e<this.slides.length;e++)t(this.slides[e])},n.prototype.bulkAction=function(t){var e=[],i=[];this.bulkSelect(function(t){t.selected&&(e.push(t),i.push(t.getId()))}),i.length?this[t](i,e):nextend.notificationCenter.notice("Please select one or more slides for the action!")},n.prototype.enterBulk=function(){this.slidesContainer.sortable("option","disabled",!0),t("#n2-admin").addClass("n2-slide-bulk-mode");for(var e=0;e<this.slides.length;e++)this.slides[e].selectMode()},n.prototype.leaveBulk=function(){this.slidesContainer.sortable("option","disabled",!1),t("#n2-admin").removeClass("n2-slide-bulk-mode");for(var e=0;e<this.slides.length;e++)this.slides[e].normalMode()},n.prototype.deleteSlides=function(e,i){var n=i[0].box.find(".n2-box-button a").text();i.length>1&&(n+=" and "+(i.length-1)+" more"),NextendDeleteModal("slide-delete",n,t.proxy(function(){NextendAjaxHelper.ajax({url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendaction:"delete"}),type:"POST",data:{slides:e}}).done(t.proxy(function(){for(var t=0;t<i.length;t++)i[t].deleted();this.initSlides()},this))},this))},n.prototype.duplicateSlides=function(e,i){for(var n=0;n<this.slides.length;n++)this.slides[n].selected&&this.slides[n].duplicate(t.Event("click",{currentTarget:this.slides[n].box.find(".n2-slide-duplicate")})).done(function(t){t.selectMode()})},n.prototype.publishSlides=function(e,i){NextendAjaxHelper.ajax({url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendaction:"publish"}),type:"POST",data:{slides:e}}).done(t.proxy(function(){for(var t=0;t<i.length;t++)i[t].published();this.changed()},this))},n.prototype.unPublishSlides=function(e,i){NextendAjaxHelper.ajax({url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendaction:"unpublish"}),type:"POST",data:{slides:e}}).done(t.proxy(function(){for(var t=0;t<i.length;t++)i[t].unPublished();this.changed()},this))},e.NextendSmartSliderAdminSidebarSlides=n,a.prototype.getId=function(){return this.box.data("slideid")},a.prototype.setFirst=function(e){e.stopPropagation(),e.preventDefault(),NextendAjaxHelper.ajax({url:NextendAjaxHelper.makeAjaxUrl(this.manager.ajaxUrl,{nextendaction:"first"}),type:"POST",data:{id:this.getId()}}).done(t.proxy(function(){this.manager.unsetFirst(),this.box.addClass("n2-first-slide")},this))},a.prototype.unsetFirst=function(){this.box.removeClass("n2-first-slide")},a.prototype.switchPublished=function(t){t.stopPropagation(),t.preventDefault(),this.isPublished()?this.manager.unPublishSlides([this.getId()],[this]):this.manager.publishSlides([this.getId()],[this])},a.prototype.isPublished=function(){return this.publishElement.hasClass("n2-active")},a.prototype.published=function(){this.publishElement.addClass("n2-active")},a.prototype.unPublished=function(){this.publishElement.removeClass("n2-active")},a.prototype.goToEdit=function(t,e){"A"!=t.target.tagName&&("undefined"!=typeof e&&e?window.open(this.box.data("editurl"),"_blank"):window.location=this.box.data("editurl"))},a.prototype.duplicate=function(e){e.stopPropagation(),e.preventDefault();var i=t.Deferred();return NextendAjaxHelper.ajax({url:NextendAjaxHelper.makeAjaxUrl(t(e.currentTarget).attr("href"),{nextendaction:"duplicate"})}).done(t.proxy(function(e){var n=t(e.data).insertAfter(this.box),o=new a(this.manager,n);this.manager.initSlides(),i.resolve(o)},this)),i},a.prototype["delete"]=function(t){t.stopPropagation(),t.preventDefault(),this.manager.deleteSlides([this.getId()],[this])},a.prototype.deleted=function(){this.box.remove()},a.prototype.selectMode=function(){this.box.off(".n2-slide"),this.box.on("click.n2-slide",t.proxy(this.invertSelection,this))},a.prototype.normalMode=function(){this.box.off(".n2-slide"),this.box.on({"click.n2-slide":t.proxy(this.goToEdit,this),"mousedown.n2-slide":t.proxy(function(t){2!=t.which&&4!=t.which||(t.preventDefault(),this.goToEdit(t,!0))},this)}),this.deSelect()},a.prototype.invertSelection=function(t){t&&t.preventDefault(),this.selected?this.deSelect():this.select()},a.prototype.select=function(){this.selected=!0,this.box.addClass("n2-active")},a.prototype.deSelect=function(){this.selected=!1,this.box.removeClass("n2-active")},e.NextendSmartSliderAdminSlide=a}(n2,window),function(t,e,i,n){function a(){NextendAdminVerticalPane.prototype.constructor.call(this,e(".n2-layers-tab"),e("#n2-ss-layers-items-list").css("overflow","auto"),e("#n2-tabbed-layer-item-animation-tabs > .n2-tabs").css("overflow","auto")),t.sidebarManager=this,this.panelHeading=e("#layeritemeditorpanel").find(".n2-sidebar-tab-switcher .n2-td");var i=e("#n2-ss-slide-sidebar"),n=i.parent().siblings(".n2-td").offset().top-e("#wpadminbar, .navbar").height(),a=e.proxy(function(){e(window).scrollTop()>n?i.addClass("n2-sidebar-fixed"):i.removeClass("n2-sidebar-fixed")},this);this.lateInit(),e(window).scroll(a),a(),new o}function o(){var t=e("#n2-ss-slides");NextendAdminSinglePane.prototype.constructor.call(this,t,t.find(".n2-ss-slides-container").css("overflow","auto")),e(".n2-slides-tab-label").on("click.n2-slides-init",e.proxy(function(t){this.lateInit(),e(t.target).off("click.n2-slides-init")},this))}function r(){var t=e("#n2-ss-slides"),i=t.parents(".n2-sidebar-inner"),n=i.parent().siblings(".n2-td").offset().top-e("#wpadminbar, .navbar").height();e(window).scroll(e.proxy(function(){e(window).scrollTop()>n?i.addClass("n2-sidebar-fixed"):i.removeClass("n2-sidebar-fixed")},this)).trigger("scroll"),NextendAdminSinglePane.prototype.constructor.call(this,t,t.find(".n2-ss-slides-container").css("overflow","auto")),this.lateInit()}a.prototype=Object.create(NextendAdminVerticalPane.prototype),a.prototype.constructor=a,a.prototype.loadDefaults=function(){NextendAdminVerticalPane.prototype.loadDefaults.apply(this,arguments),this.key="smartsliderSlideSidebarRatio"},a.prototype.switchTab=function(t){this.panelHeading.eq(t).trigger("click")},a.prototype.getExcludedHeight=function(){var t=0;return t+=e("#n2-ss-slide-editor-main-tab").outerHeight(),t+=e("#n2-ss-item-container").outerHeight(),t+=e("#n2-tabbed-layer-item-animation-tabs > .n2-labels").outerHeight(),t+=this.tab.find(".n2-sidebar-pane-sizer").outerHeight(),t+=1},i.NextendSmartSliderSidebar=a,o.prototype=Object.create(NextendAdminSinglePane.prototype),o.prototype.constructor=o,o.prototype.getExcludedHeight=function(){var t=0;return t+=e("#n2-ss-slide-editor-main-tab").outerHeight(),t+=e(".n2-slides-tab .n2-definition-list").outerHeight(!0),t+=2},i.NextendSmartSliderEditorSidebarSlides=o,r.prototype=Object.create(NextendAdminSinglePane.prototype),r.prototype.constructor=r,r.prototype.getExcludedHeight=function(){var t=0;return t+=e("#n2-ss-slide-editor-main-tab").outerHeight(),t+=e(".n2-sidebar .n2-definition-list").outerHeight(!0),t+=2},i.NextendSmartSliderSidebarSlides=r}(nextend.smartSlider,n2,window),function(t,e,i,n){function a(i,n,a,o,r,s){this.options=e.extend({slideAsFile:0},s),this.readyDeferred=e.Deferred(),t.slide=this,this._warnInternetExplorerUsers(),this.$slideContentElement=e("#"+n),this.slideStartValue=this.$slideContentElement.val(),this.$sliderElement=e("#"+i),t.frontend=window["n2-ss-0"];var l=this.$sliderElement.data("fontsize");nextend.fontManager.setFontSize(l),nextend.styleManager.setFontSize(l),t.$currentSlideElement=t.frontend.adminGetCurrentSlideElement(),new SmartSliderAdminGenerator,t.$currentSlideElement.addClass("n2-ss-currently-edited-slide");var d=t.frontend.parameters.isStaticEdited;new NextendSmartSliderAdminSlideLayerManager(t.$currentSlideElement.data("slide"),d,a,o,r),d||this._initializeBackgroundChanger(),this.readyDeferred.resolve(),e("#smartslider-form").on({checkChanged:e.proxy(this.prepareFormForCheck,this),submit:e.proxy(this.onSlideSubmit,this)}),this.createHistory()}a.prototype.ready=function(t){this.readyDeferred.done(t)},a.prototype.prepareFormForCheck=function(){var e=JSON.stringify(t.layerManager.getData()),i=JSON.stringify(JSON.parse(Base64.decode(this.slideStartValue)));this.$slideContentElement.val(i==e?this.slideStartValue:Base64.encode(e))},a.prototype.onSlideSubmit=function(i){if(!nextend.isPreview)if(t.timelineControl.exitPreviewMode(),this.prepareForm(),i.preventDefault(),nextend.askToSave=!1,this.options.slideAsFile&&typeof window.FormData!==n&&"undefined"!=typeof window.File){var a=new FormData,o=e("#smartslider-form").serializeArray();e.each(o,function(t,e){"slide[slide]"==e.name?a.append("slide",new File([e.value],"slide.txt")):a.append(e.name,e.value)}),NextendAjaxHelper.ajax({url:NextendAjaxHelper.makeAjaxUrl(window.location.href),type:"POST",data:a,contentType:!1,processData:!1}).done(function(){nextend.askToSave=!0,e("#smartslider-form").trigger("saved")})}else NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(window.location.href),data:e("#smartslider-form").serialize(),dataType:"json"}).done(function(){nextend.askToSave=!0,e("#smartslider-form").trigger("saved")})},a.prototype.prepareForm=function(){this.$slideContentElement.val(Base64.encode(JSON.stringify(t.layerManager.getData())))},a.prototype._initializeBackgroundChanger=function(){this.background={slideBackgroundColorField:e("#slidebackgroundColor"),slideBackgroundImageField:e("#slidebackgroundImage"),slideBackgroundImageOpacity:e("#slidebackgroundImageOpacity"),slidebackgroundFocusX:e("#slidebackgroundFocusX"),slidebackgroundFocusY:e("#slidebackgroundFocusY"),slideBackgroundModeField:e("#slidebackgroundMode"),backgroundImageElement:t.$currentSlideElement.find(".nextend-slide-bg"),canvas:t.$currentSlideElement.find(".n2-ss-slide-background")},this.background.slideBackgroundColorField.on("nextendChange",e.proxy(this.__onAfterBackgroundColorChange,this)),this.background.slideBackgroundImageField.on("nextendChange",e.proxy(this.__onAfterBackgroundImageChange,this)),this.background.slideBackgroundImageOpacity.on("nextendChange",e.proxy(this.__onAfterBackgroundImageOpacityChange,this)),this.background.slideBackgroundModeField.on("nextendChange",e.proxy(this.__onAfterBackgroundImageChange,this)),this.background.slidebackgroundFocusX.on("nextendChange",e.proxy(this.__onAfterBackgroundImageChange,this)),this.background.slidebackgroundFocusY.on("nextendChange",e.proxy(this.__onAfterBackgroundImageChange,this));var i=e("#slidethumbnail");if(""==i.val()){var n=e("#item_imageimage"),a=e.proxy(function(t){""!=t&&"$system$/images/placeholder/image.png"!=t&&(i.val(t).trigger("change"),this.background.slideBackgroundImageField.off(".slidethumbnail"),n.off(".slidethumbnail"))},this);this.background.slideBackgroundImageField.on("nextendChange.slidethumbnail",e.proxy(function(){a(this.background.slideBackgroundImageField.val())},this)),n.on("nextendChange.slidethumbnail",e.proxy(function(){a(n.val())},this))}},a.prototype.__onAfterBackgroundColorChange=function(){var t=this.background.slideBackgroundColorField.val();"00"==t.substr(6,8)?this.background.canvas.css("background",""):this.background.canvas.css("background","#"+t.substr(0,6)).css("background",N2Color.hex2rgbaCSS(t))},a.prototype.__onAfterBackgroundImageOpacityChange=function(){t.$currentSlideElement.data("slideBackground").setOpacity(this.background.slideBackgroundImageOpacity.val()/100)},a.prototype.__onAfterBackgroundImageChange=function(){t.$currentSlideElement.data("slideBackground").changeDesktop(t.generator.fill(this.background.slideBackgroundImageField.val()),"",this.background.slideBackgroundModeField.val(),this.background.slidebackgroundFocusX.val(),this.background.slidebackgroundFocusY.val()),this.__onAfterBackgroundImageOpacityChange()},a.prototype._warnInternetExplorerUsers=function(){var t=this.__isInternetExplorer();t&&10>t&&alert(window.ss2lang.The_editor_was_tested_under_Internet_Explorer_10_Firefox_and_Chrome_Please_use_one_of_the_tested_browser)},a.prototype.__isInternetExplorer=function(){var t=navigator.userAgent.toLowerCase();return-1!=t.indexOf("msie")?parseInt(t.split("msie")[1]):!1},a.prototype.getLayout=function(){for(var i=e("#smartslider-form").serializeArray(),n={},a=0;a<i.length;a++){var o=i[a].name.match(/slide\[(.*?)\]/);o&&(n[o[1]]=i[a].value)}return delete n.generator,delete n.published,delete n.publishdates,delete n["record-start"],delete n["record-slides"],delete n.slide,n.slide=t.layerManager.getData(),n},a.prototype.loadLayout=function(i,n,a){var o=i.slide;if(delete i.slide,a?t.layerManager.loadData(o,!0):t.layerManager.loadData(o,!1),n)for(var r in i)e("#slide"+r).val(i[r]).trigger("change");i.slide=o},a.prototype.createHistory=function(){this.slideValues={},n2("#smartslider-form").find('input[id][name^="slide"], textarea[id][name^="slide"]').not("#slideslide").each(e.proxy(function(i,n){var a=e(n),o=a.data("field"),r=a.attr("id");this.slideValues[r]=a.val(),a.on("nextendChange",e.proxy(function(){var i=a.val(),n=this.slideValues[r];this.slideValues[r]=i,t.history.add(e.proxy(function(){return[this,"slideValueChange",i,n,[a,o]]},this))},this))},this))},a.prototype.history=function(t,e,i){switch(t){case"slideValueChange":i[1].insideChange(e)}},i.SmartSliderAdminSlide=a}(nextend.smartSlider,n2,window),function(t,e,i){function n(){NextendVisualManagerSetsAndMore.prototype.constructor.apply(this,arguments),this.setFontSize(16)}function a(){NextendVisualWithSetRow.prototype.constructor.apply(this,arguments)}n.prototype=Object.create(NextendVisualManagerSetsAndMore.prototype),n.prototype.constructor=n,n.prototype.loadDefaults=function(){NextendVisualManagerSetsAndMore.prototype.loadDefaults.apply(this,arguments),this.type="splittextanimation",this.labels={visual:"Split text animation",visuals:"Split text animations"},this.styleClassName="",this.fontClassName=""},n.prototype.initController=function(){return new NextendSplitTextAnimationEditorController},n.prototype.createVisual=function(t,e){return new a(t,e,this)},n.prototype.setConnectedStyle=function(t){this.styleClassName=e("#"+t).data("field").renderStyle()},n.prototype.setConnectedFont=function(t){this.fontClassName=e("#"+t).data("field").renderFont()},n.prototype.setFontSize=function(t){this.controller.setFontSize(t)},n.prototype.setVisualAsStatic=function(t){if(null!==this.transformOriginElement){var e=this.transformOriginElement.data("field");e.insideChange(this.controller.transformOrigin),e.triggerOutsideChange()}switch(t.preventDefault(),this.mode){case"static":this.setAndClose(this.getBase64(n2_("Static"))),this.hide(t);break;default:NextendVisualManagerSetsAndMore.prototype.setVisualAsStatic.call(this,t)}},n.prototype.getBase64=function(t){return Base64.encode(JSON.stringify({name:t,data:this.controller.get("set")}))},n.prototype.show=function(t,i,n){this.transformOriginElement=n.transformOrigin,NextendVisualManagerSetsAndMore.prototype.show.call(this,t,i,n),""==t&&e.when(this.activeSet._loadVisuals()).done(e.proxy(function(){for(var t in this.activeSet.visuals){this.activeSet.visuals[t].activate();break}},this))},i.NextendSplitTextAnimationManager=n,a.prototype=Object.create(NextendVisualWithSetRow.prototype),a.prototype.constructor=a,a.prototype.activate=function(t){"undefined"!=typeof t&&t.preventDefault(),this.visualManager.changeActiveVisual(this),"undefined"!=typeof this.value.transformOrigin&&this.visualManager.controller.loadTransformOrigin(this.value.transformOrigin),this.visualManager.controller.load(this.value.animation,!1,this.visualManager.showParameters)},i.NextendSplitTextAnimation=a}(nextend.smartSlider,n2,window),function($,scope){function NextendSplitTextAnimationEditorController(){this.timeline=new NextendTimeline,NextendVisualEditorControllerWithEditor.prototype.constructor.apply(this,arguments),this.preview=$("#n2-splittextanimation-editor-preview"),this.initBackgroundColor()}function NextendSplitTextAnimationEditor(){NextendVisualEditor.prototype.constructor.apply(this,arguments),this.fields={mode:{element:$("#n2-splittextanimation-editormode"),events:{"outsideChange.n2-editor":$.proxy(this.changeMode,this)}},sort:{element:$("#n2-splittextanimation-editorsort"),events:{"outsideChange.n2-editor":$.proxy(this.changeSort,this)}},duration:{element:$("#n2-splittextanimation-editorduration"),events:{"outsideChange.n2-editor":$.proxy(this.changeDuration,this)}},stagger:{element:$("#n2-splittextanimation-editorstagger"),events:{"outsideChange.n2-editor":$.proxy(this.changeStagger,this)}},easing:{element:$("#n2-splittextanimation-editoreasing"),events:{"outsideChange.n2-editor":$.proxy(this.changeEasing,this)}},opacity:{element:$("#n2-splittextanimation-editoropacity"),events:{"outsideChange.n2-editor":$.proxy(this.changeOpacity,this)}},offset:{element:$("#n2-splittextanimation-editoroffset"),events:{"outsideChange.n2-editor":$.proxy(this.changeOffset,this)}},rotate:{element:$("#n2-splittextanimation-editorrotate"),events:{"outsideChange.n2-editor":$.proxy(this.changeRotate,this)}},scale:{element:$("#n2-splittextanimation-editorscale"),events:{"outsideChange.n2-editor":$.proxy(this.changeScale,this)}},transformOrigin:{element:$("#n2-splittextanimation-editortransformorigin"),events:{"outsideChange.n2-editor":$.proxy(this.changeTransformOrigin,this)}}}}NextendSplitTextAnimationEditorController.prototype=Object.create(NextendVisualEditorControllerWithEditor.prototype),NextendSplitTextAnimationEditorController.prototype.constructor=NextendSplitTextAnimationEditorController,NextendSplitTextAnimationEditorController.prototype.loadDefaults=function(){NextendVisualEditorControllerWithEditor.prototype.loadDefaults.call(this),this.type="splittextanimation",this.group="in",this.preview=null,this.playing=!1,this.transformOrigin="0|*|0|*|0",this.mySplitText=null,this.repeatTimeout=null},NextendSplitTextAnimationEditorController.prototype.initRenderer=function(){return new NextendVisualRenderer(this)},NextendSplitTextAnimationEditorController.prototype.initEditor=function(){return new NextendSplitTextAnimationEditor},NextendSplitTextAnimationEditorController.prototype._load=function(t,e,i){this.group=i.group,NextendVisualEditorControllerWithEditor.prototype._load.call(this,$.extend(!0,{},this.getEmptyVisual(),t),e,i),this.render(i.previewHTML)},NextendSplitTextAnimationEditorController.prototype.propertyChanged=function(t,e,i){NextendVisualEditorControllerWithEditor.prototype.propertyChanged.call(this,t,e,i),this.refreshTimeline()},NextendSplitTextAnimationEditorController.prototype.get=function(t){return"saveAsNew"==t?{transformOrigin:this.transformOrigin,animation:this.currentVisual}:this.currentVisual},NextendSplitTextAnimationEditorController.prototype.getEmptyVisual=function(){return{mode:"chars",sort:"normal",duration:.4,stagger:.05,ease:"easeOutCubic",opacity:1,scale:1,x:0,y:0,rotationX:0,rotationY:0,rotationZ:0}},NextendSplitTextAnimationEditorController.prototype.initBackgroundColor=function(){new NextendElementText("n2-splittextanimation-editor-background-color"),new NextendElementColor("n2-splittextanimation-editor-background-color",0);var t=this.lightbox.find(".n2-editor-preview-box");$("#n2-splittextanimation-editor-background-color").on("nextendChange",function(){t.css("background","#"+$(this).val())})},NextendSplitTextAnimationEditorController.prototype.render=function(html){var fontClassName=nextend.splittextanimationManager.fontClassName,styleClassName=nextend.splittextanimationManager.styleClassName;html=html.replace(/\{([^]*?)\}/g,function(match,script){return eval(script)}),this.preview.html(html),this.visible&&this.refreshTimeline()},NextendSplitTextAnimationEditorController.prototype.refreshTimeline=function(){this.killPreview();var t=$.extend({},this.currentVisual),e=t.mode;"chars"==e&&(e+=",words"),this.mySplitText=new NextendSplitText(this.preview.find("span"),{type:e});var i=[];switch(t.mode){case"words":i=this.mySplitText.words;break;case"lines":i=this.mySplitText.lines;break;default:i=this.mySplitText.chars}delete t.mode,this.timeline=new NextendTimeline({repeat:-1});var n=t.duration,a=t.stagger;delete t.duration,delete t.stagger,NextendTween.set(i,{transformOrigin:this.transformOrigin.split("|*|").join("% ")+"px"});var o=null;switch(t.sort){case"reversed":i.reverse();break;case"random":var r=function(t,e,i,n){for(i=t.length;i;)e=Math.random()*i--|0,n=t[i],t[i]=t[e],t[e]=n};r(i);break;case"side":case"center":var s=[];for(o=[];i.length>1;)s.push(i.shift()),o.push(i.pop());1==i.length&&s.push(i.shift()),i=s,"center"==t.sort&&(i.reverse(),o.reverse());break;case"sideShifted":case"centerShifted":for(var s=[];i.length>1;)s.push(i.shift()),s.push(i.pop());1==i.length&&s.push(i.shift()),i=s,"centerShifted"==t.sort&&i.reverse()}if(delete t.sort,"out"==this.group){var l=this.getEmptyVisual();delete l.mode,delete l.sort,delete l.duration,delete l.easing,delete l.stagger,this.timeline.staggerFromTo(i,n,l,t,-a,.3),o&&o.length&&this.timeline.staggerFromTo(o,n,l,t,-a,.3)}else this.timeline.staggerFrom(i,n,t,a,.3),o&&o.length&&this.timeline.staggerFrom(o,n,t,a,.3);this.timeline.eventCallback("onComplete",$.proxy(function(){this.repeatTimeout=setTimeout($.proxy(function(){this.timeline.play(0,!1)},this),500)},this)),this.timeline.play()},NextendSplitTextAnimationEditorController.prototype.killPreview=function(){this.repeatTimeout&&clearTimeout(this.repeatTimeout),this.timeline.pause(),this.mySplitText&&this.mySplitText.revert()},NextendSplitTextAnimationEditorController.prototype.show=function(){this.loadTransformOrigin(nextend.splittextanimationManager.transformOriginElement.val()),NextendVisualEditorControllerWithEditor.prototype.show.call(this),this.refreshTimeline()},NextendSplitTextAnimationEditorController.prototype.close=function(){this.killPreview(),NextendVisualEditorControllerWithEditor.prototype.close.call(this)},NextendSplitTextAnimationEditorController.prototype.loadTransformOrigin=function(t){this.editor.fields.transformOrigin.element.data("field").insideChange(t),this.refreshTransformOrigin(t,!1)},NextendSplitTextAnimationEditorController.prototype.refreshTransformOrigin=function(t,e){this.transformOrigin=t,NextendTween.set(this.preview.parent().get(0),{perspective:"1000px"}),e&&this.refreshTimeline()},NextendSplitTextAnimationEditorController.prototype.setFontSize=function(t){this.preview.css("fontSize",t),this.preview.css("margin","100px 30px")},scope.NextendSplitTextAnimationEditorController=NextendSplitTextAnimationEditorController,NextendSplitTextAnimationEditor.prototype=Object.create(NextendVisualEditor.prototype),NextendSplitTextAnimationEditor.prototype.constructor=NextendSplitTextAnimationEditor,NextendSplitTextAnimationEditor.prototype.load=function(t){this._off(),this.fields.mode.element.data("field").insideChange(t.mode),t.sort||(t.sort="normal"),this.fields.sort.element.data("field").insideChange(t.sort),this.fields.duration.element.data("field").insideChange(1e3*t.duration),this.fields.stagger.element.data("field").insideChange(1e3*t.stagger),this.fields.easing.element.data("field").insideChange(t.ease),this.fields.opacity.element.data("field").insideChange(100*t.opacity),this.fields.offset.element.data("field").insideChange(t.x+"|*|"+t.y),this.fields.rotate.element.data("field").insideChange(t.rotationX+"|*|"+t.rotationY+"|*|"+t.rotationZ),this.fields.scale.element.data("field").insideChange(100*t.scale),this.fields.transformOrigin.element.data("field").insideChange(nextend.splittextanimationManager.controller.transformOrigin),this._on()},NextendSplitTextAnimationEditor.prototype.changeMode=function(){this.trigger("mode",this.fields.mode.element.val())},NextendSplitTextAnimationEditor.prototype.changeSort=function(){this.trigger("sort",this.fields.sort.element.val())},NextendSplitTextAnimationEditor.prototype.changeDuration=function(){this.trigger("duration",this.fields.duration.element.val()/1e3)},NextendSplitTextAnimationEditor.prototype.changeStagger=function(){this.trigger("stagger",this.fields.stagger.element.val()/1e3)},NextendSplitTextAnimationEditor.prototype.changeEasing=function(){this.trigger("ease",this.fields.easing.element.val())},NextendSplitTextAnimationEditor.prototype.changeOpacity=function(){this.trigger("opacity",this.fields.opacity.element.val()/100)},NextendSplitTextAnimationEditor.prototype.changeOffset=function(){var t=this.fields.offset.element.val().split("|*|");this.trigger("x",t[0]),this.trigger("y",t[1])},NextendSplitTextAnimationEditor.prototype.changeRotate=function(){var t=this.fields.rotate.element.val().split("|*|");this.trigger("rotationX",t[0]),this.trigger("rotationY",t[1]),this.trigger("rotationZ",t[2])},NextendSplitTextAnimationEditor.prototype.changeScale=function(){this.trigger("scale",this.fields.scale.element.val()/100)},NextendSplitTextAnimationEditor.prototype.changeTransformOrigin=function(){nextend.splittextanimationManager.controller.refreshTransformOrigin(this.fields.transformOrigin.element.val(),!0)},scope.NextendSplitTextAnimationEditor=NextendSplitTextAnimationEditor}(n2,window),function(t,e,i,n){function a(t){this.key="n2-ss-editor-device-lock-mode",this.devices={unknownUnknown:e("<div />")},this.responsive=t,this.responsive.setOrientation("portrait"),this.responsive.parameters.onResizeEnabled=0,this.responsive.parameters.forceFull=0,this.responsive._getDevice=this.responsive._getDeviceZoom,this.lock=e("#n2-ss-lock").on("click",e.proxy(this.switchLock,this));var i=t.parameters.sliderWidthToDevice.desktopPortrait;this.container=this.responsive.containerElement.closest(".n2-ss-container-device").addBack(),this.container.width(i),this.containerWidth=i,this.initZoom();var n=e("#n2-ss-devices .n2-tr"),a=t.parameters.deviceModes;this.devices.desktopPortrait=e('<div class="n2-td n2-panel-option" data-device="desktop" data-orientation="portrait"><i class="n2-i n2-it n2-i-v-desktop"></i></div>').appendTo(n),a.desktopLandscape?this.devices.desktopLandscape=e('<div class="n2-td n2-panel-option" data-device="desktop" data-orientation="landscape"><i class="n2-i n2-it n2-i-v-desktop-landscape"></i></div>').appendTo(n):this.devices.desktopLandscape=this.devices.desktopPortrait,a.tabletPortrait?this.devices.tabletPortrait=e('<div class="n2-td n2-panel-option" data-device="tablet" data-orientation="portrait"><i class="n2-i n2-it n2-i-v-tablet"></i></div>').appendTo(n):this.devices.tabletPortrait=this.devices.desktopPortrait,a.tabletLandscape?this.devices.tabletLandscape=e('<div class="n2-td n2-panel-option" data-device="tablet" data-orientation="landscape"><i class="n2-i n2-it n2-i-v-tablet-landscape"></i></div>').appendTo(n):this.devices.tabletLandscape=this.devices.desktopLandscape,a.mobilePortrait?this.devices.mobilePortrait=e('<div class="n2-td n2-panel-option" data-device="mobile" data-orientation="portrait"><i class="n2-i n2-it n2-i-v-mobile"></i></div>').appendTo(n):this.devices.mobilePortrait=this.devices.tabletPortrait,a.mobileLandscape?this.devices.mobileLandscape=e('<div class="n2-td n2-panel-option" data-device="mobile" data-orientation="landscape"><i class="n2-i n2-it n2-i-v-mobile-landscape"></i></div>').appendTo(n):this.devices.mobileLandscape=this.devices.tabletLandscape,this.deviceOptions=e("#n2-ss-devices .n2-panel-option"),e("#n2-ss-devices").css("width",62*this.deviceOptions.length+"px"),this.deviceOptions.each(e.proxy(function(t,i){e(i).on("click",e.proxy(this.setDeviceMode,this))},this)),t.sliderElement.on("SliderDeviceOrientation",e.proxy(this.onDeviceOrientationChange,this))}nextend.ssBeforeResponsive=function(){new a(this)},a.prototype.onDeviceOrientationChange=function(t,i){e("#n2-admin").removeClass("n2-ss-mode-"+i.lastDevice).addClass("n2-ss-mode-"+i.device),this.devices[i.lastDevice+i.lastOrientation].removeClass("n2-active"),this.devices[i.device+i.orientation].addClass("n2-active")},a.prototype.setDeviceMode=function(i){var n=e(i.currentTarget);if((i.ctrlKey||i.metaKey)&&t.layerManager){var a=n.data("orientation");t.layerManager.copyOrResetMode(n.data("device")+a[0].toUpperCase()+a.substr(1))}else this.responsive.setOrientation(n.data("orientation")),this.responsive.setMode(n.data("device"))},a.prototype.switchLock=function(t){t.preventDefault(),this.lock.toggleClass("n2-active"),this.lock.hasClass("n2-active")?(this.setZoomSyncMode(),this.zoomChange(this.zoom.slider("value"),"sync",!1),e.jStorage.set(this.key,"sync")):(this.setZoomFixMode(),e.jStorage.set(this.key,"fix"))},a.prototype.initZoom=function(){var t=e("#n2-ss-slider-zoom");if(t.length>0){"undefined"!=typeof t[0].slide&&(t[0].slide=null),this.zoom=t.slider({range:"min",step:1,value:1,min:0,max:102}),this.responsive.sliderElement.on("SliderResize",e.proxy(this.sliderResize,this)),"fix"==e.jStorage.get(this.key,"sync")?this.setZoomFixMode():(this.setZoomSyncMode(),this.lock.addClass("n2-active"));var i=t.parent(),n=e.proxy(function(t){var e=this.zoom.slider("value");this.zoom.slider("value",e+t)},this),a=null,o=e.proxy(function(t){n(t),a=setInterval(e.proxy(n,this,t),40)},this);i.find(".n2-i-minus").on({mousedown:e.proxy(o,this,-1),mouseup:function(t){console.log(t)},"mouseup mouseleave":function(){a&&(clearInterval(a),a=null)}}),i.find(".n2-i-plus").on({mousedown:e.proxy(o,this,1),"mouseup mouseleave":function(){a&&(clearInterval(a),a=null)}})}},a.prototype.sliderResize=function(t,e){this.setZoom()},a.prototype.setZoomFixMode=function(){this.zoom.off(".n2-ss-zoom").on({"slide.n2-ss-zoom":e.proxy(this.zoomChangeFixMode,this),"slidechange.n2-ss-zoom":e.proxy(this.zoomChangeFixMode,this)})},a.prototype.setZoomSyncMode=function(){this.zoom.off(".n2-ss-zoom").on({"slide.n2-ss-zoom":e.proxy(this.zoomChangeSyncMode,this),"slidechange.n2-ss-zoom":e.proxy(this.zoomChangeSyncMode,this)})},a.prototype.zoomChangeFixMode=function(t,e){this.zoomChange(e.value,"fix",e)},a.prototype.zoomChangeSyncMode=function(t,e){this.zoomChange(e.value,"sync",e);
},a.prototype.zoomChange=function(t,e,i){var n=1;50>t?n=nextend.smallestZoom/this.containerWidth+Math.max(t/50,0)*(1-nextend.smallestZoom/this.containerWidth):t>52&&(n=1+(t-52)/50);var a=parseInt(n*this.containerWidth);switch(this.container.width(a),e){case"sync":this.responsive.doResize();break;default:this.responsive.doResize(!0)}i&&(i.handle.innerHTML=a+"px")},a.prototype.setZoom=function(){var t=this.responsive.containerElement.width()/this.containerWidth,e=50;1>t?e=(t-nextend.smallestZoom/this.containerWidth)/(1-nextend.smallestZoom/this.containerWidth)*50:t>1&&(e=50*(t-1)+52);this.zoom.slider("value");this.zoom.slider("value",e)}}(nextend.smartSlider,n2,window),function(t,e){function i(e,i){this.element=t("#"+e),this.managerIdentifier=i,this.element.parent().on("click",t.proxy(this.show,this)),this.element.siblings(".n2-form-element-clear").on("click",t.proxy(this.clear,this)),this.name=this.element.siblings("input"),this.updateName(this.element.val()),NextendElement.prototype.constructor.apply(this,arguments)}function n(){i.prototype.constructor.apply(this,arguments)}i.prototype=Object.create(NextendElement.prototype),i.prototype.constructor=i,i.prototype.show=function(e){e.preventDefault(),nextend[this.managerIdentifier].show(this.element.val(),t.proxy(this.save,this))},i.prototype.clear=function(t){t.preventDefault(),t.stopPropagation(),this.val("")},i.prototype.save=function(t,e){this.val(e)},i.prototype.val=function(t){this.element.val(t),this.updateName(t),this.triggerOutsideChange()},i.prototype.insideChange=function(t){this.element.val(t),this.updateName(t),this.triggerInsideChange()},i.prototype.updateName=function(t){t=""==t?n2_("Disabled"):t.split("||").length>1?n2_("Multiple animations"):n2_("Single animation"),this.name.val(t)},e.NextendElementAnimationManager=i,n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.prototype.clear=function(t){t.preventDefault(),t.stopPropagation();var e=this.element.val().split("|*|");e[2]="",this.val(e.join("|*|"))},n.prototype.updateName=function(t){var e=t.split("|*|");t=e[2],t=""==t?n2_("Disabled"):t.split("||").length>1?n2_("Multiple animations"):n2_("Single animation"),this.name.val(t)},e.NextendElementPostAnimationManager=n}(n2,window),function(t,e){function i(e){this.status=0,this.element=t("#"+e),this.overlays=null,this.aligns=this.element.parent().parent().siblings(),this.globalPicker=t("#n2-ss-parent-linker"),this.picker=this.element.siblings(".n2-ss-layer-picker").on({click:t.proxy(this.click,this),mouseenter:t.proxy(function(){var e=this.element.val();""!=e&&t("#"+e).addClass("n2-highlight")},this),mouseleave:t.proxy(function(){var e=this.element.val();""!=e&&t("#"+e).removeClass("n2-highlight")},this)}),NextendElement.prototype.constructor.apply(this,arguments)}var n={INITIALIZED:0,UNDER_PICK_PARENT:1,UNDER_PICK_CHILD:2},a='<div class="n2-ss-picker-overlay" data-align="left" data-valign="top" /><div class="n2-ss-picker-overlay" data-align="center" data-valign="top" style="left:33%;top:0;" /><div class="n2-ss-picker-overlay" data-align="right" data-valign="top" style="left:66%;top:0;width:34%;" /><div class="n2-ss-picker-overlay" data-align="left" data-valign="middle" style="left:0;top:33%;" /><div class="n2-ss-picker-overlay" data-align="center" data-valign="middle" style="left:33%;top:33%; " /><div class="n2-ss-picker-overlay" data-align="right" data-valign="middle" style="left:66%;top:33%;width:34%;" /><div class="n2-ss-picker-overlay" data-align="left" data-valign="bottom" style="left:0;top:66%;height:34%;" /><div class="n2-ss-picker-overlay" data-align="center" data-valign="bottom" style="left:33%;top:66%;height:34%;" /><div class="n2-ss-picker-overlay" data-align="right" data-valign="bottom" style="left:66%;top:66%;width:34%;height:34%;" />';i.prototype=Object.create(NextendElement.prototype),i.prototype.constructor=i,i.prototype.click=function(e){if(this.status==n.INITIALIZED){t("body").on("mousedown.n2-ss-parent-linker",t.proxy(function(e){var i=t(e.target),n=i.parent();i.hasClass("n2-ss-picker-overlay")||n.hasClass("n2-under-pick")||this.endSelection()},this));var i=nextend.activeLayer.parent().find(".n2-ss-layer").not(nextend.activeLayer),o=function(e){i.each(function(){var n=t(this),a=n.data("layerObject");if(a.getProperty(!1,"parentid")==e){i=i.not(n);var r=a.getProperty(!1,"id");r&&""!=r&&o(r)}})},r=nextend.activeLayer.data("layerObject").getProperty(!1,"id");r&&""!=r&&o(r),i.length>0&&(this.globalPicker.addClass("n2-under-pick"),this.picker.addClass("n2-under-pick"),i.addClass("n2-ss-picking-on-layer"),this.overlays=t(a).appendTo(i),this.overlays.on("mousedown",t.proxy(function(e){var o=t(e.currentTarget),r=o.data("align"),s=o.data("valign"),l=o.parent().data("layerObject");this.status=n.UNDER_PICK_CHILD,this.overlays.remove(),i.removeClass("n2-ss-picking-on-layer"),nextend.activeLayer.addClass("n2-ss-picking-on-layer"),this.overlays=t(a).appendTo(nextend.activeLayer),this.overlays.on("mousedown",t.proxy(function(e){var i=t(e.currentTarget),n=i.data("align"),a=i.data("valign");nextend.activeLayer.removeClass("n2-ss-picking-on-layer"),nextend.activeLayer.data("layerObject").parentPicked(l,r,s,n,a),e.preventDefault(),e.stopPropagation(),this.endSelection()},this)),e.preventDefault(),e.stopPropagation()},this)),NextendEsc.add(t.proxy(function(){return this.endSelection(),!1},this)),this.status=n.UNDER_PICK_PARENT)}else this.status==n.UNDER_PICK_PARENT?(this.change(""),this.endSelection()):this.status==n.UNDER_PICK_CHILD&&(this.change(""),this.endSelection())},i.prototype.endSelection=function(){t("body").off("mousedown.n2-ss-parent-linker"),nextend.activeLayer.parent().find(".n2-ss-layer").removeClass("n2-ss-picking-on-layer"),this.globalPicker.removeClass("n2-under-pick"),this.picker.removeClass("n2-under-pick"),this.overlays&&this.overlays.remove(),this.overlays=null,this.status=n.INITIALIZED,NextendEsc.pop()},i.prototype.change=function(t){this.picker.trigger("mouseleave"),this.element.val(t).trigger("change"),this._setValue(t),this.triggerOutsideChange()},i.prototype.insideChange=function(t){this.element.val(t),this._setValue(t),this.triggerInsideChange()},i.prototype._setValue=function(t){t&&""!=t?(this.picker.addClass("n2-active"),this.aligns.css("display","")):(this.picker.removeClass("n2-active"),this.aligns.css("display","none"))},e.NextendElementLayerPicker=i}(n2,window),function(t,e){function i(e){this.element=t("#"+e),this.setAttribute(),this.element.on("nextendChange",t.proxy(this.setAttribute,this))}i.prototype.setAttribute=function(){t("#n2-admin").attr("data-slider-type",this.element.val())},e.NextendElementSliderType=i}(n2,window),function(t,e){function i(e){this.element=t("#"+e),this.area=t("#"+e+"_area"),this.areas=this.area.find(".n2-area"),this.areas.on("click",t.proxy(this.chooseArea,this)),NextendElement.prototype.constructor.apply(this,arguments)}i.prototype=Object.create(NextendElement.prototype),i.prototype.constructor=i,i.prototype.chooseArea=function(e){var i=parseInt(t(e.target).data("area"));this.element.val(i),this.setSelected(i),this.triggerOutsideChange()},i.prototype.insideChange=function(t){t=parseInt(t),this.element.val(t),this.setSelected(t),this.triggerInsideChange()},i.prototype.setSelected=function(t){this.areas.removeClass("n2-active"),this.areas.eq(t-1).addClass("n2-active")},e.NextendElementSliderWidgetArea=i}(n2,window),function(t,e){function i(e,i){this.element=t("#"+e),this.parameters=i,this.element.parent().on("click",t.proxy(this.show,this)),this.element.siblings(".n2-form-element-clear").on("click",t.proxy(this.clear,this)),this.name=this.element.siblings("input"),this.updateName(this.element.val()),NextendElement.prototype.constructor.apply(this,arguments)}i.prototype=Object.create(NextendElement.prototype),i.prototype.constructor=i,i.prototype.show=function(e){e.preventDefault(),this.parameters.font&&nextend.splittextanimationManager.setConnectedFont(this.parameters.font),this.parameters.style&&nextend.splittextanimationManager.setConnectedStyle(this.parameters.style),nextend.splittextanimationManager.show(this.element.val(),t.proxy(this.save,this),{previewMode:"0",previewHTML:this.parameters.preview,group:this.parameters.group,transformOrigin:t("#"+this.parameters.transformOrigin)})},i.prototype.clear=function(t){t.preventDefault(),t.stopPropagation(),this.val("")},i.prototype.save=function(t,e){this.val(e)},i.prototype.val=function(t){this.element.val(t),this.updateName(t),this.triggerOutsideChange()},i.prototype.insideChange=function(t){this.element.val(t),this.updateName(t),this.triggerInsideChange()},i.prototype.updateName=function(e){t.when(nextend.splittextanimationManager.getVisual(e)).done(t.proxy(function(t){this.name.val(t.name)},this))},e.NextendElementSplitTextAnimationManager=i}(n2,window),function(t,e){function i(e){this.element=t("#"+e+"-mode"),this.container=this.element.closest(".n2-form-element-mixed"),this.tabs=this.container.find("> .n2-mixed-group"),this.element.on("nextendChange",t.proxy(this.onChange,this)),this.onChange()}i.prototype.onChange=function(){var t=this.element.val();"advanced"==t?(this.tabs.eq(2).css("display",""),this.tabs.eq(1).css("display","none")):(this.tabs.eq(1).css("display",""),this.tabs.eq(2).css("display","none"))},e.NextendElementWidgetPosition=i}(n2,window),function(t,e,i,n){"use strict";function a(){this._refreshTimeout=null,this.modal=!1,this.group=0,t.generator=this;var i=t.$currentSlideElement.data("variables");if(i){this.variables=i;for(var n in this.variables)!isNaN(parseFloat(n))&&isFinite(n)&&(this.group=Math.max(this.group,parseInt(n)+1));this.fill=this.generatorFill,this.group>0&&(this.registerField=this.generatorRegisterField,this.button=e('<a href="#" class="n2-form-element-button n2-form-element-button-inverted n2-h5 n2-uc" style="position:absolute; left: -26px; top:50%;margin-top: -14px;font-size: 14px; padding:0; width: 28px;text-align: center;">$</a>').on("click",e.proxy(function(t){t.preventDefault(),this.showModal()},this)),this.registerField(e("#slidetitle")),this.registerField(e("#slidedescription")),this.registerField(e("#slidethumbnail")),this.registerField(e("#slidebackgroundImage")),this.registerField(e("#slidebackgroundAlt")),this.registerField(e("#slidebackgroundTitle")),this.registerField(e("#slidebackgroundVideoMp4")),this.registerField(e("#slidebackgroundVideoWebm")),this.registerField(e("#slidebackgroundVideoOgg")),this.registerField(e("#linkslidelink_0"))),this.initSlideDataRefresh()}else this.variables=null}a.prototype.fill=function(t){return t},a.prototype.generatorFill=function(t){return t.replace(/{((([a-z]+)\(([0-9a-zA-Z_,\/\(\)]+)\))|([a-zA-Z0-9][a-zA-Z0-9_\/]*))}/g,e.proxy(this.parseFunction,this))},a.prototype.parseFunction=function(t,e,i,n,a,o){if("undefined"==typeof o){for(var r=a.split(/,(?!.*\))/),s=0;s<r.length;s++)r[s]=this.parseVariable(r[s]);return this[n].apply(this,r)}return this.parseVariable(o)},a.prototype.parseVariable=function(t){var e=t.match(/((([a-z]+)\(([0-9a-zA-Z_,\/\(\)]+)\)))/);if(e)return this.parseFunction.apply(this,e);var i=t.match(/([a-zA-Z][0-9a-zA-Z_]*)(\/([0-9a-z]+))?/);if(i){var n=i[3];if("undefined"==typeof n)n=0;else{var a=parseInt(n);isNaN(a)||(n=Math.max(n,1)-1)}return"undefined"!=typeof this.variables[n]&&"undefined"!=typeof this.variables[n][i[1]]?this.variables[n][i[1]]:""}return t},a.prototype.cleanhtml=function(t){return strip_tags(t,"<p><a><b><br /><br/><i>")},a.prototype.removehtml=function(t){return e("<div>"+t+"</div>").text()},a.prototype.splitbychars=function(t,e,i){return t.substr(e,i)},a.prototype.splitbywords=function(t,e,i){var n=t,a=n.length,o=Math.max(0,0==e?0:n.indexOf(" ",e)),r=Math.max(0,i>a?a:n.indexOf(" ",i));return n.substr(o,r)},a.prototype.findimage=function(t,e){var i=t,n=/(<img.*?src=[\'"](.*?)[\'"][^>]*>)|(background(-image)??\s*?:.*?url\((["|\']?)?(.+?)(["|\']?)?\))/gi,a=[],o=null;for(e="undefined"!=typeof e?parseInt(e)-1:0;o=n.exec(i);)"undefined"!=typeof o[2]?a.push(o[2]):"undefined"!=typeof o[6]&&a.push(o[6]);return a.length?a.length>e?a[e]:a[a.length-1]:""},a.prototype.findlink=function(t,e){var i=t,n=/href=["\']?([^"\'>]+)["\']?/gi,a=[],o=null;for(e="undefined"!=typeof e?parseInt(e)-1:0;o=n.exec(i);)"undefined"!=typeof o[1]&&a.push(o[1]);return a.length?a.length>e?a[e]:a[a.length-1]:""},a.prototype.removevarlink=function(t){var e=t,i=/<a href=\"(.*?)\">(.*?)<\/a>/g;return e.replace(i,"")},a.prototype.registerField=function(t){},a.prototype.generatorRegisterField=function(t){var i=t.parent();i.on({mouseenter:e.proxy(function(){this.activeField=t,this.button.prependTo(i)},this)})},a.prototype.getModal=function(){var t=this;if(!this.modal){var i={key:"",group:1,filter:"no",split:"no",splitStart:0,splitLength:300,findImage:0,findImageIndex:1,findLink:0,findLinkIndex:1,removeVarLink:0},n=function(){var t=i.key+"/"+i.group;return i.findImage&&(t="findimage("+t+","+Math.max(1,i.findImageIndex)+")"),i.findLink&&(t="findlink("+t+","+Math.max(1,i.findLinkIndex)+")"),i.removeVarLink&&(t="removevarlink("+t+")"),"no"!=i.filter&&(t=i.filter+"("+t+")"),"no"!=i.split&&i.splitStart>=0&&i.splitLength>0&&(t=i.split+"("+t+","+i.splitStart+","+i.splitLength+")"),"{"+t+"}"},a=e('<div class="n2-generator-result-container" />'),o=function(){a.html(e("<div/>").text(t.fill(n())).html())},r=t.group,s=null,l=null,d=e('<div class="n2-generator-insert-variable"/>'),p=NextendModal.prototype.createHeading(n2_("Choose the group")).appendTo(d),h=e('<div class="n2-group-container" />').appendTo(d);d.append(NextendModal.prototype.createHeading(n2_("Choose the variable")));var c=e('<div class="n2-variable-container" />').appendTo(d),u=e('<div class="n2-generator-functions-container n2-form-element-mixed" />').appendTo(e('<div class="n2-form" />').appendTo(d));d.append(NextendModal.prototype.createHeading(n2_("Result"))),a.appendTo(d),e('<div class="n2-mixed-group"><div class="n2-mixed-label"><label>'+n2_("Filter")+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-list"><select autocomplete="off" name="filter" id="n2-generator-function-filter"><option selected="selected" value="no">'+n2_("No")+'</option><option value="cleanhtml">'+n2_("Clean HTML")+'</option><option value="removehtml">'+n2_("Remove HTML")+"</option></select></div></div></div>").appendTo(u);var y=u.find("#n2-generator-function-filter");y.on("change",e.proxy(function(){i.filter=y.val(),o()},this)),e('<div class="n2-mixed-group"><div class="n2-mixed-label"><label>'+n2_("Split by chars")+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-list"><select autocomplete="off" name="split" id="n2-generator-function-split"><option selected="selected" value="no">'+n2_("No")+'</option><option value="splitbychars">'+n2_("Strict")+'</option><option value="splitbywords">'+n2_("Respect words")+'</option></select></div><div class="n2-form-element-text n2-text-has-unit n2-border-radius"><div class="n2-text-sub-label n2-h5 n2-uc">'+n2_("Start")+'</div><input type="text" autocomplete="off" style="width: 22px;" class="n2-h5" value="0" id="n2-generator-function-split-start"></div><div class="n2-form-element-text n2-text-has-unit n2-border-radius"><div class="n2-text-sub-label n2-h5 n2-uc">'+n2_("Length")+'</div><input type="text" autocomplete="off" style="width: 22px;" class="n2-h5" value="300" id="n2-generator-function-split-length"></div></div></div>').appendTo(u);var m=u.find("#n2-generator-function-split");m.on("change",e.proxy(function(){i.split=m.val(),o()},this));var f=u.find("#n2-generator-function-split-start");f.on("change",e.proxy(function(){i.splitStart=parseInt(f.val()),o()},this));var g=u.find("#n2-generator-function-split-length");g.on("change",e.proxy(function(){i.splitLength=parseInt(g.val()),o()},this)),e('<div class="n2-mixed-group"><div class="n2-mixed-label"><label>'+n2_("Find image")+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-onoff"><div class="n2-onoff-slider"><div class="n2-onoff-no"><i class="n2-i n2-i-close"></i></div><div class="n2-onoff-round"></div><div class="n2-onoff-yes"><i class="n2-i n2-i-tick"></i></div></div><input type="hidden" autocomplete="off" value="0" id="n2-generator-function-findimage"></div><div class="n2-form-element-text n2-text-has-unit n2-border-radius"><div class="n2-text-sub-label n2-h5 n2-uc">'+n2_("Index")+'</div><input type="text" autocomplete="off" style="width: 22px;" class="n2-h5" value="1" id="n2-generator-function-findimage-index"></div></div></div>').appendTo(u);var v=u.find("#n2-generator-function-findimage");v.on("nextendChange",e.proxy(function(){i.findImage=parseInt(v.val()),o()},this));var x=u.find("#n2-generator-function-findimage-index");x.on("change",e.proxy(function(){i.findImageIndex=parseInt(x.val()),o()},this)),e('<div class="n2-mixed-group"><div class="n2-mixed-label"><label>'+n2_("Find link")+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-onoff"><div class="n2-onoff-slider"><div class="n2-onoff-no"><i class="n2-i n2-i-close"></i></div><div class="n2-onoff-round"></div><div class="n2-onoff-yes"><i class="n2-i n2-i-tick"></i></div></div><input type="hidden" autocomplete="off" value="0" id="n2-generator-function-findlink"></div><div class="n2-form-element-text n2-text-has-unit n2-border-radius"><div class="n2-text-sub-label n2-h5 n2-uc">'+n2_("Index")+'</div><input type="text" autocomplete="off" style="width: 22px;" class="n2-h5" value="1" id="n2-generator-function-findlink-index"></div></div></div>').appendTo(u);var b=u.find("#n2-generator-function-findlink");b.on("nextendChange",e.proxy(function(){i.findLink=parseInt(b.val()),o()},this));var w=u.find("#n2-generator-function-findlink-index");w.on("change",e.proxy(function(){i.findLinkIndex=parseInt(w.val()),o()},this)),e('<div class="n2-mixed-group"><div class="n2-mixed-label"><label>'+n2_("Remove links")+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-onoff"><div class="n2-onoff-slider"><div class="n2-onoff-no"><i class="n2-i n2-i-close"></i></div><div class="n2-onoff-round"></div><div class="n2-onoff-yes"><i class="n2-i n2-i-tick"></i></div></div><input type="hidden" autocomplete="off" value="0" id="n2-generator-function-removevarlink"></div></div></div>').appendTo(u);var S=u.find("#n2-generator-function-removevarlink");S.on("nextendChange",e.proxy(function(){i.removeVarLink=parseInt(S.val()),o()},this));var k=u.find("#n2-generator-function-removevarlink-index");k.on("change",e.proxy(function(){i.removeVarLinkIndex=parseInt(k.val()),o()},this));for(var C in this.variables[0])e('<a href="#" class="n2-button n2-button-small n2-button-grey">'+C+"</a>").on("click",e.proxy(function(t,n){n.preventDefault(),s.removeClass("n2-active"),e(n.currentTarget).addClass("n2-active"),i.key=t,o()},this,C)).appendTo(c);s=c.find("a"),s.eq(0).trigger("click"),1==r&&(p.css("display","none"),h.css("display","none"));for(var I=0;r>I;I++)e('<a href="#" class="n2-button n2-button-small n2-button-grey">'+(I+1)+"</a>").on("click",e.proxy(function(t,n){n.preventDefault(),l.removeClass("n2-active"),e(n.currentTarget).addClass("n2-active"),i.group=t+1,o()},this,I)).appendTo(h);l=h.find("a"),l.eq(0).trigger("click");var T=!1;this.modal=new NextendModal({zero:{size:[1e3,r>1?560:490],title:n2_("Insert variable"),back:!1,close:!0,content:d,controls:['<a href="#" class="n2-button n2-button-big n2-button-green">'+n2_("Insert")+"</a>"],fn:{show:function(){T||(new NextendElementOnoff("n2-generator-function-findimage"),new NextendElementOnoff("n2-generator-function-findlink"),new NextendElementOnoff("n2-generator-function-removevarlink"),T=!0),this.controls.find(".n2-button").on("click",e.proxy(function(e){e.preventDefault(),t.insert(n()),this.hide(e)},this))}}}},!1),this.modal.setCustomClass("n2-ss-generator-modal")}return this.modal},a.prototype.showModal=function(){this.getModal().show()},a.prototype.insert=function(t){this.activeField.val(t).trigger("change")},a.prototype.initSlideDataRefresh=function(){var t=e("#slidetitle").on("nextendChange",e.proxy(function(){this.variables.slide.name=t.val(),this.refresh()},this)),i=e("#slidedescription").on("nextendChange",e.proxy(function(){this.variables.slide.description=i.val(),this.refresh()},this))},a.prototype.refresh=function(){this._refreshTimeout&&(clearTimeout(this._refreshTimeout),this._refreshTimeout=null),this._refreshTimeout=setTimeout(e.proxy(this._refresh,this),100)},a.prototype._refresh=function(){for(var e=t.layerManager.layerList,i=0;i<e.length;i++)for(var n=e[i].items,a=0;a<n.length;a++)n[a].reRender()},i.SmartSliderAdminGenerator=a}(nextend.smartSlider,n2,window),function(t,e,i){function n(e){this.ajaxUrl=e,t("#generatorrecord-viewer").on("click",t.proxy(this.showRecords,this))}n.prototype.showRecords=function(e){e.preventDefault(),NextendAjaxHelper.ajax({type:"POST",url:this.ajaxUrl,data:t("#smartslider-form").serialize(),dataType:"json"}).done(function(t){var e=new NextendModal({zero:{size:[1300,700],title:"Records",content:t.data.html}},!0);e.content.css("overflow","auto")}).error(function(t){if(200==t.status){var e=new NextendModal({zero:{size:[1300,700],title:"Response",content:t.responseText}},!0);e.content.css("overflow","auto")}})},e.NextendSmartSliderGeneratorRecords=n}(n2,window),function(t,e){"use strict";function i(e,i,n){this.element=t("#"+e),this.button=t("#"+e+"_button").on("click",t.proxy(this.requestToken,this)),this.url=i,t("#generatorcallback").html(n)}i.prototype.requestToken=function(e){e.preventDefault(),NextendAjaxHelper.ajax({url:this.url,data:t("#smartslider-form").serialize()}).done(function(t){var e=1e3,i=600,n=(screen.width-e)/2,a=(screen.height-i)/2;window.open(t.data.authUrl,"500px authentication","width=1000,height=600,toolbar=0,scrollbars=0,status=0,resizable=0,location=0,menuBar=0,left="+n+",top="+a)})},e.NextendElement500pxToken=i}(n2,window),function(t,e){"use strict";function i(e,i){this.element=t("#"+e),this.select=this.element.parent().find("select"),this.relatedField=t("#generatordribbble-user-id").on("nextendChange",t.proxy(this.refreshList,this)),this.url=i}i.prototype.refreshList=function(e){NextendAjaxHelper.ajax({url:this.url,data:{method:"getProjects",userID:this.relatedField.val()}}).done(t.proxy(function(t){if(0!=t.data.length){this.select.find("option").remove();for(var e in t.data)this.select.append('<option value="'+e+'">'+t.data[e]+"</option>");this.select.val(this.select.find("option:first").val()).trigger("change")}},this))},e.NextendElementDribbbleProjects=i}(n2,window),function(t,e){"use strict";function i(e,i,n){this.element=t("#"+e),this.button=t("#"+e+"_button").on("click",t.proxy(this.requestToken,this)),this.url=i,t("#generatorcallback").html(n)}i.prototype.requestToken=function(e){e.preventDefault(),NextendAjaxHelper.ajax({url:this.url,data:t("#smartslider-form").serialize()}).done(function(t){var e=1e3,i=600,n=(screen.width-e)/2,a=(screen.height-i)/2;window.open(t.data.authUrl,"YouTube authentication","width=1000,height=600,toolbar=0,scrollbars=0,status=0,resizable=0,location=0,menuBar=0,left="+n+",top="+a)})},e.NextendElementDribbbleToken=i}(n2,window),function(t,e){"use strict";function i(e,i){this.element=t("#"+e),this.select=this.element.parent().find("select"),this.relatedField=t("#generatorfacebook-id").on("nextendChange",t.proxy(this.refreshList,this)),this.url=i}i.prototype.refreshList=function(e){NextendAjaxHelper.ajax({url:this.url,data:{method:"getAlbums",facebookID:this.relatedField.val()}}).done(t.proxy(function(t){this.select.find("option").remove();for(var e in t.data)this.select.append('<option value="'+e+'">'+t.data[e]+"</option>");this.select.val(this.select.find("option:first").val()).trigger("change")},this))},e.NextendElementFacebookAlbums=i}(n2,window),function(t,e){"use strict";function i(e,i){this.element=t("#"+e),this.button=t("#"+e+"_button").on("click",t.proxy(this.requestToken,this)),this.url=i,t("#generatorcallback").html(location.protocol+"//"+location.hostname+(location.port?":"+location.port:""))}i.prototype.requestToken=function(e){e.preventDefault(),NextendAjaxHelper.ajax({url:this.url,data:t("#smartslider-form").serialize()}).done(function(t){var e=580,i=400,n=(screen.width-e)/2,a=(screen.height-i)/2;window.open(t.data.authUrl,"Facebook authentication","width=580,height=400,toolbar=0,scrollbars=0,status=0,resizable=0,location=0,menuBar=0,left="+n+",top="+a)})},e.NextendElementFacebookToken=i}(n2,window),function(t,e){"use strict";function i(e,i,n){this.element=t("#"+e),this.button=t("#"+e+"_button").on("click",t.proxy(this.requestToken,this)),this.url=i,t("#generatorcallback").html(n)}i.prototype.requestToken=function(e){e.preventDefault(),NextendAjaxHelper.ajax({url:this.url,data:t("#smartslider-form").serialize()}).done(function(t){var e=1200,i=1e3,n=(screen.width-e)/2,a=(screen.height-i)/2;window.open(t.data.authUrl,"Flickr authentication","width="+e+",height="+i+",toolbar=0,scrollbars=0,status=0,resizable=0,location=0,menuBar=0,left="+n+",top="+a)})},e.NextendElementFlickrToken=i}(n2,window),function(t,e){"use strict";function i(e,i,n){this.element=t("#"+e),this.button=t("#"+e+"_button").on("click",t.proxy(this.requestToken,this)),this.url=i,t("#generatorcallback").html(n)}i.prototype.requestToken=function(e){e.preventDefault(),NextendAjaxHelper.ajax({url:this.url,data:t("#smartslider-form").serialize()}).done(function(t){var e=580,i=400,n=(screen.width-e)/2,a=(screen.height-i)/2;window.open(t.data.authUrl,"Instagram authentication","width=580,height=400,toolbar=0,scrollbars=0,status=0,resizable=0,location=0,menuBar=0,left="+n+",top="+a)})},e.NextendElementInstagramToken=i}(n2,window),function(t,e){"use strict";function i(e,i,n){this.element=t("#"+e),this.button=t("#"+e+"_button").on("click",t.proxy(this.requestToken,this)),this.url=i,t("#generatorcallback").html(n)}i.prototype.requestToken=function(e){e.preventDefault(),NextendAjaxHelper.ajax({url:this.url,data:t("#smartslider-form").serialize()}).done(function(t){var e=1e3,i=600,n=(screen.width-e)/2,a=(screen.height-i)/2;window.open(t.data.authUrl,"Twitter authentication","width=1000,height=600,toolbar=0,scrollbars=0,status=0,resizable=0,location=0,menuBar=0,left="+n+",top="+a)})},e.NextendElementTwitterToken=i}(n2,window),function(t,e){"use strict";function i(e,i,n){this.element=t("#"+e),this.button=t("#"+e+"_button").on("click",t.proxy(this.requestToken,this)),this.url=i,t("#generatorcallback").html(n)}i.prototype.requestToken=function(e){e.preventDefault(),NextendAjaxHelper.ajax({url:this.url,data:t("#smartslider-form").serialize()}).done(function(t){var e=1e3,i=600,n=(screen.width-e)/2,a=(screen.height-i)/2;window.open(t.data.authUrl,"YouTube authentication","width=1000,height=600,toolbar=0,scrollbars=0,status=0,resizable=0,location=0,menuBar=0,left="+n+",top="+a)})},e.NextendElementYoutubeToken=i}(n2,window),function(t,e,i,n){function a(t,a,o,r){this.item=t,this.layer=a,this.itemEditor=o,this.type=this.item.data("item"),this.values=this.item.data("itemvalues"),"object"!=typeof this.values&&(this.values=e.parseJSON(this.values)),i["NextendSmartSliderItemParser_"+this.type]!==n?this.parser=new i["NextendSmartSliderItemParser_"+this.type](this):this.parser=new i.NextendSmartSliderItemParser(this),this.item.data("item",this),"undefined"!=typeof r&&(0==this.layer.items.length||this.layer.items.length<=r?this.item.appendTo(this.layer.layer):this.layer.items[r].item.before(this.item)),"undefined"==typeof r||0==this.layer.items.length||this.layer.items.length<=r?this.layer.items.push(this):this.layer.items.splice(r,0,this),0===this.item.children().length&&this.reRender(),e("<div/>").addClass("ui-helper ui-item-overlay").css("zIndex",89).appendTo(this.item),e(window).trigger("ItemCreated")}a.prototype.changeValue=function(t,i){this==this.itemEditor.activeItem?e("#item_"+this.type+t).data("field").insideChange(i):this.values[t]=i},a.prototype.activate=function(t,e){this.itemEditor.setActiveItem(this,e)},a.prototype.deActivate=function(){},a.prototype.render=function(t,i,n){this.layer.layer.triggerHandler("itemRender"),this.item.html(this.parser.render(t,i)),this.values=n,e("<div/>").addClass("ui-helper ui-item-overlay").css("zIndex",89).appendTo(this.item);var a=this.parser.getName(i);a=a===!1?this.type:a.replace(/[<> ]/gi,""),this.layer.rename(a,!1),this.layer.update()},a.prototype.reRender=function(t){var i={},n=this.itemEditor,a=n.getItemType(this.type),o=a.template;for(var r in this.values)i[r]=this.values[r];i=e.extend({},this.parser.getDefault(),i,t);var s=e.extend({},i);this.parser.parseAll(i,this),this.values=s;for(var l in i){var d=new RegExp("\\{"+l+"\\}","g");o=o.replace(d,i[l])}this.render(e(o),i,this.values)},a.prototype.duplicate=function(){this.layer.addItem(this.getHTML(),!0)},a.prototype["delete"]=function(){this.item.trigger("mouseleave"),this.item.remove(),this.itemEditor.activeItem==this&&(this.itemEditor.activeItem=null)},a.prototype.getHTML=function(t){var i="";return i=t?"["+this.type+' values="'+Base64.encode(JSON.stringify(this.values))+'"]':e('<div class="n2-ss-item n2-ss-item-'+this.type+'"></div>').attr("data-item",this.type).attr("data-itemvalues",JSON.stringify(this.values))},a.prototype.getData=function(){return{type:this.type,values:this.values}},a.prototype.history=function(t,i,n){switch(t){case"updateCurrentItem":this.reRender(e.extend(!0,{},i)),this.values=i,this.itemEditor.setActiveItem(this,!0)}},i.NextendSmartSliderItem=a}(nextend.smartSlider,n2,window),function(t,e,i,n){function a(t){this.suppressChange=!1,this.activeItemOriginalData=null,this.layerEditor=t,this._initInstalledItems(),this.form={},this.activeForm={form:e("<div></div>")}}a.prototype.setActiveItem=function(t,i){if(t!=this.activeItem||i){this.activeItemOriginalData=null;var n=t.type,a=t.values;this.activeForm.form.css("display","none"),this.activeForm=this.getItemType(n),this.activeItem&&this.activeItem.deActivate(),this.activeItem=t,this.suppressChange=!0;for(var o in a){var r=e("#item_"+n+o).data("field");r&&r.insideChange(a[o])}this.suppressChange=!1,this.activeForm.form.css("display","block")}},a.prototype._initInstalledItems=function(){e("#n2-ss-item-container .n2-ss-core-item").on("click",e.proxy(function(t){this.createLayerItem(e(t.currentTarget).data("item"))},this))},a.prototype.createLayerItem=function(n){var a=this.getItemType(n),o=this.layerEditor.createLayer(e(".n2-ss-core-item-"+n).data("layerproperties")),r=e("<div></div>").data("item",n).data("itemvalues",e.extend(!0,{},a.values)).addClass("n2-ss-item n2-ss-item-"+n),s=new i.NextendSmartSliderItem(r,o,this,0);return o.activate(),t.sidebarManager.switchTab(0),t.history.add(e.proxy(function(){return[this,"createLayer","create","delete",[s,n]]},this)),s},a.prototype.getItemType=function(t){if(this.form[t]===n){var i=e("#smartslider-slide-toolbox-item-type-"+t),a={form:i,template:i.data("itemtemplate"),values:i.data("itemvalues"),fields:i.find('[name^="item_'+t+'"]'),fieldNameRegexp:new RegExp("item_"+t+"\\[(.*?)\\]","")};a.fields.on({nextendChange:e.proxy(this.updateCurrentItem,this),keydown:e.proxy(this.updateCurrentItemDeBounced,this)}),this.form[t]=a}return this.form[t]},a.prototype.updateCurrentItem=function(i){if(!this.suppressChange){null===this.activeItemOriginalData&&(this.activeItemOriginalData=e.extend({},this.activeItem.values));var n={},a={},o=this.form[this.activeItem.type],r=o.template,s=this.activeItem.parser;o.fields.each(e.proxy(function(t,i){var i=e(i),r=i.attr("name").match(o.fieldNameRegexp)[1];a[r]=n[r]=i.val()},this)),n=e.extend({},s.getDefault(),n),s.parseAll(n,this.activeItem);for(var l in n){var d=new RegExp("\\{"+l+"\\}","g");r=r.replace(d,n[l])}i&&"nextendChange"==i.type&&(t.history.add(e.proxy(function(){return[this.activeItem,"updateCurrentItem",e.extend({},a),this.activeItemOriginalData,[]]},this)),this.activeItemOriginalData=null),this.activeItem.render(e(r),n,a)}},a.prototype.updateCurrentItemDeBounced=NextendDeBounce(function(t){this.updateCurrentItem(t)},100),a.prototype.history=function(e,i,n){
switch(e){case"createLayer":switch(i){case"delete":n[0].layer["delete"]();break;case"create":var a=this.createLayerItem(n[1]);t.history.changeFuture(n[0].layer,a.layer),t.history.changeFuture(n[0],a)}}},i.NextendSmartSliderItemManager=a}(nextend.smartSlider,n2,window),function(t,e,i){function n(t){this.pre="div#"+nextend.smartSlider.frontend.sliderElement.attr("id")+" ",this.item=t,this.fonts=[],this.styles=[],this.needFill=[],this.added()}n.prototype.getDefault=function(){return{}},n.prototype.added=function(){},n.prototype.addedFont=function(e,i){this.fonts.push({mode:e,name:i}),t.when(nextend.fontManager.addVisualUsage(e,this.item.values[i],this.pre)).done(t.proxy(function(t){t||this.item.changeValue(i,"")},this))},n.prototype.addedStyle=function(e,i){this.styles.push({mode:e,name:i}),t.when(nextend.styleManager.addVisualUsage(e,this.item.values[i],this.pre)).done(t.proxy(function(t){t||this.item.changeValue(i,"")},this))},n.prototype.parseAll=function(t,e){for(var i=0;i<this.fonts.length;i++)t[this.fonts[i].name+"class"]=nextend.fontManager.getClass(t[this.fonts[i].name],this.fonts[i].mode)+" ";for(var i=0;i<this.styles.length;i++)t[this.styles[i].name+"class"]=nextend.styleManager.getClass(t[this.styles[i].name],this.styles[i].mode)+" ";for(var i=0;i<this.needFill.length;i++)t[this.needFill[i]]=nextend.smartSlider.generator.fill(t[this.needFill[i]])},n.prototype.render=function(t,e){return t},n.prototype.getName=function(t){return!1},n.prototype.resizeLayerToImage=function(e,i){t("<img/>").attr("src",i).load(function(){var t=e.layer.layerEditor.slideSize,i=t.width,n=t.height;if(this.width>0&&this.height>0){if(i=parseInt(Math.min(this.width,i)),n=parseInt(Math.min(this.height,n)),nextend.smartSlider.history.off(),t.width/t.height<=i/n)e.layer.setProperty("width",i),e.layer.setProperty("height",this.height*i/this.width);else{var a=Math.min(this.width*t.height/this.height,i);e.layer.setProperty("width",a),e.layer.setProperty("height",this.height*a/this.width)}nextend.smartSlider.history.on()}})},n.prototype.fitLayer=function(t){return!1},e.NextendSmartSliderItemParser=n}(n2,window),function(t,e,i){function n(e,i,n,a,o,r,s,l){if(""!=o)try{o=JSON.parse(Base64.decode(o))}catch(d){o=!1}else o=!1;if(""!=s)try{s=JSON.parse(Base64.decode(s))}catch(d){s=!1}else s=!1;o||t("#"+i).closest(".n2-ss-layer").triggerHandler("layerExtraAnimationRemoved"),(o||s)&&(NextendSmartSliderHeadingItemSplitText.prototype.constructor.call(this,e,i,n,a,o,r,s,l),this.slide.on("layerSetZero."+i,t.proxy(this.setZero,this)),this.layer.on("itemRender."+i,t.proxy(function(){this.layer.off("."+i)},this)),o&&(this.layer.on("timelineLoadedForLayer."+i,t.proxy(function(){this.layer.triggerHandler("layerExtraAnimationAdded",[r,"ST",t.proxy(this.changeIn,this),t.proxy(this.editIn,this)])},this)),this.layer.triggerHandler("layerExtraAnimationAdded",[r,"ST",t.proxy(this.changeIn,this),t.proxy(this.editIn,this)])))}n.prototype=Object.create(NextendSmartSliderHeadingItemSplitText.prototype),n.prototype.constructor=n,n.prototype.changeIn=function(e){t("#item_headingsplit-text-delay-in").val(1e3*e).trigger("change")},n.prototype.editIn=function(e){t("#item_headingsplit-text-animation-in").parent().find(".n2-form-element-button").trigger("click")},n.prototype.initSlide=function(){this.slide=this.node.closest(".n2-ss-static-slide, .n2-ss-slide")},n.prototype.off=function(){this.slide.off("."+this.id)},n.prototype.setZero=function(t,e){for(var i=this.splitText.vars.type.split(","),n=0;n<i.length;n++)NextendTween.set(this.splitText[i[n]],{opacity:1,scale:1,x:0,y:0,rotationX:0,rotationY:0,rotationZ:0})},n.prototype.extendTimelines=function(t,e){n2.contains(document,this.node[0])?NextendSmartSliderHeadingItemSplitText.prototype.extendTimelines.call(this,t,e):this.off()},e.NextendSmartSliderHeadingItemSplitTextAdmin=n}(n2,window),function(t,e,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.parseAll=function(t){""==t.width?t.width="100%":t.width+="px",""==t.height?t.height="100%":t.height+="px",t.colora=N2Color.hex2rgbaCSS(t.color),t.borderWidth=t.borderWidth+"px",t.borderColora=N2Color.hex2rgbaCSS(t.borderColor),t.borderRadius=t.borderRadius+"px"},n.prototype.fitLayer=function(t){return!0},e.NextendSmartSliderItemParser_area=n}(n2,window),function(t,e,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.added=function(){this.needFill=["content","url"],this.addedFont("link","font"),this.addedStyle("button","style"),nextend.smartSlider.generator.registerField(t("#item_buttoncontent")),nextend.smartSlider.generator.registerField(t("#linkitem_buttonlink_0"))},n.prototype.getName=function(t){return t.content},n.prototype.parseAll=function(t){var e=t.link.split("|*|");t.url=e[0],t.target=e[1],delete t.link,0|t.fullwidth?t.display="block;":t.display="inline-block;",t.extrastyle=0|t.nowrap?"white-space: nowrap;":"",NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments)},e.NextendSmartSliderItemParser_button=n}(n2,window),function(t,e,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.added=function(){this.needFill=["content","description","url","image"],this.addedFont("paragraph","fonttitle"),this.addedFont("paragraph","font"),nextend.smartSlider.generator.registerField(t("#item_captionimage")),nextend.smartSlider.generator.registerField(t("#item_captioncontent")),nextend.smartSlider.generator.registerField(t("#linkitem_captionlink_0"))},n.prototype.getName=function(t){return t.image.split("/").pop()},n.prototype.parseAll=function(e,i){e.uid=t.fn.uid();var n=e.link.split("|*|");e.url=n[0],e.target=n[1],delete e.link,e.colora=N2Color.hex2rgbaCSS(e.color),e.colorhex=e.color.substr(0,6);var a=e.animation.split("|*|");e.mode=a[0],e.direction=a[1],e.scale=parseInt(a[2]),NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments),e.image=nextend.imageHelper.fixed(e.image),i&&"$system$/images/placeholder/image.png"==i.values.image&&e.image!=i.values.image&&this.resizeLayerToImage(i,e.image)},n.prototype.fitLayer=function(t){return this.resizeLayerToImage(t,nextend.imageHelper.fixed(t.values.image)),!0},e.NextendSmartSliderItemParser_caption=n}(n2,window),function(t,e,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return{link:"#|*|_self",font:"",style:""}},n.prototype.added=function(){this.needFill=["heading","url"],this.addedFont("hover","font"),this.addedStyle("heading","style"),nextend.smartSlider.generator.registerField(t("#item_headingheading")),nextend.smartSlider.generator.registerField(t("#linkitem_headinglink_0"))},n.prototype.getName=function(t){return t.heading},n.prototype.parseAll=function(e){e.uid=t.fn.uid();var i=e.link.split("|*|");e.url=i[0],e.target=i[1],delete e.link,0|e.fullwidth?e.display="block;":e.display="inline-block;",e.extrastyle=0|e.nowrap?"white-space: nowrap;":"",e.heading=t("<div>"+e.heading+"</div>").text().replace(/\n/g,"<br />"),"undefined"==typeof e["split-text-animation-in"]&&(e["split-text-animation-in"]="",e["split-text-delay-in"]=0,e["split-text-animation-out"]="",e["split-text-delay-out"]=0,e["split-text-transform-origin"]="50|*|50|*|0",e["split-text-backface-visibility"]=1),e.splitTextIn=e["split-text-animation-in"],e.splitTextDelayIn=e["split-text-delay-in"]/1e3,e.splitTextOut=e["split-text-animation-out"],e.splitTextDelayOut=e["split-text-delay-out"]/1e3,e.splitTextTransformOrigin=e["split-text-transform-origin"].split("|*|").join("% ")+"%",e.splitTextBackfaceVisibility=parseInt(e["split-text-backface-visibility"])?"visible":"hidden",NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments),"#"==e.url?e.afontclass="":(e.afontclass=e.fontclass,e.fontclass="")},n.prototype.render=function(t,e){if("#"==e.url){var i=t.find("a");i.parent().html(i.html())}return t},e.NextendSmartSliderItemParser_heading=n}(n2,window),function(t,e,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.added=function(){this.needFill=["html"],nextend.smartSlider.generator.registerField(t("#item_htmlhtml"))},e.NextendSmartSliderItemParser_html=n}(n2,window),function(t,e,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.added=function(){this.addedStyle("box","style")},n.prototype.parseAll=function(t){var e=t.size.split("|*|");t.width=e[0],t.height=e[1],delete t.size,t.opacity=N2Color.hex2alpha(t.color),t.color=t.color.substr(0,6);var i=t.icon.replace(/data\-style/g,"style").replace(/\{style\}/g,"fill:#"+t.color+";fill-opacity:"+t.opacity);t.image=Base64.encode(i),NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments)},e.NextendSmartSliderItemParser_icon=n}(n2,window),function(t,e,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.added=function(){this.needFill=["url"],nextend.smartSlider.generator.registerField(t("#item_iframeurl"))},n.prototype.getName=function(t){return t.url},n.prototype.parseAll=function(t){var e=t.size.split("|*|");t.width=e[0],t.height=e[1],delete t.size,NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments)},e.NextendSmartSliderItemParser_iframe=n}(n2,window),function(t,e,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return{size:"100%|*|auto",link:"#|*|_self",style:""}},n.prototype.added=function(){this.needFill=["image","url"],this.addedStyle("box","style"),nextend.smartSlider.generator.registerField(t("#item_imageimage")),nextend.smartSlider.generator.registerField(t("#item_imagealt")),nextend.smartSlider.generator.registerField(t("#item_imagetitle")),nextend.smartSlider.generator.registerField(t("#linkitem_imagelink_0"))},n.prototype.getName=function(t){return t.image.split("/").pop()},n.prototype.parseAll=function(t,e){var i=t.size.split("|*|");t.width=i[0],t.height=i[1],delete t.size;var n=t.link.split("|*|");t.url=n[0],t.target=n[1],delete t.link,NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments),e&&"$system$/images/placeholder/image.png"==e.values.image&&t.image!=e.values.image?(t.image=nextend.imageHelper.fixed(t.image),this.resizeLayerToImage(e,t.image)):t.image=nextend.imageHelper.fixed(t.image)},n.prototype.fitLayer=function(t){return this.resizeLayerToImage(t,nextend.imageHelper.fixed(t.values.image)),!0},n.prototype.render=function(t,e){return"#"==e.url&&t.html(t.children("a").html()),t},e.NextendSmartSliderItemParser_image=n}(n2,window),function(t,e,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return{font:"",style:""}},n.prototype.added=function(){this.needFill=["placeholder"],this.addedStyle("heading","style"),this.addedFont("paragraph","inputfont"),this.addedStyle("heading","inputstyle"),this.addedFont("hover","buttonfont"),this.addedStyle("heading","buttonstyle"),nextend.smartSlider.generator.registerField(t("#item_inputplaceholder"))},n.prototype.getName=function(t){return t.placeholder},n.prototype.parseAll=function(t){t.fullwidthStyle=parseInt(t.fullwidth)?"width:100%;":"",0|t.fullwidth?t.display="block;":t.display="inline-block;",NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments)},n.prototype.render=function(t,e){return""==e.buttonlabel&&t.find("td").eq(1).remove(),t},e.NextendSmartSliderItemParser_input=n}(n2,window),function(t,e,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.added=function(){this.needFill=["content"],this.addedFont("paragraph","font"),this.addedStyle("heading","liststyle"),this.addedStyle("heading","itemstyle"),nextend.smartSlider.generator.registerField(t("#item_listcontent"))},n.prototype.getName=function(t){return t.content},n.prototype.parseAll=function(t){for(var e=t.content.split("\n"),i=0;i<e.length;i++)e[i]="<li>"+e[i]+"</li>";t.lis=e.join(""),NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments)},n.prototype.render=function(t,e){return t.find("li").addClass(e.itemstyleclass),t},e.NextendSmartSliderItemParser_list=n}(n2,window),function(t,e,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}function a(t){var e=!1,i=!1,n="table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|noscript|legend|section|article|aside|hgroup|header|footer|nav|figure|details|menu|summary";return-1!==t.indexOf("<object")&&(t=t.replace(/<object[\s\S]+?<\/object>/g,function(t){return t.replace(/[\r\n]+/g,"")})),t=t.replace(/<[^<>]+>/g,function(t){return t.replace(/[\r\n]+/g," ")}),-1===t.indexOf("<pre")&&-1===t.indexOf("<script")||(e=!0,t=t.replace(/<(pre|script)[^>]*>[\s\S]+?<\/\1>/g,function(t){return t.replace(/(\r\n|\n)/g,"<wp-line-break>")})),-1!==t.indexOf("[caption")&&(i=!0,t=t.replace(/\[caption[\s\S]+?\[\/caption\]/g,function(t){return t=t.replace(/<br([^>]*)>/g,"<wp-temp-br$1>"),t=t.replace(/<[a-zA-Z0-9]+( [^<>]+)?>/g,function(t){return t.replace(/[\r\n\t]+/," ")}),t.replace(/\s*\n\s*/g,"<wp-temp-br />")})),t+="\n\n",t=t.replace(/<br \/>\s*<br \/>/gi,"\n\n"),t=t.replace(new RegExp("(<(?:"+n+")(?: [^>]*)?>)","gi"),"\n$1"),t=t.replace(new RegExp("(</(?:"+n+")>)","gi"),"$1\n\n"),t=t.replace(/<hr( [^>]*)?>/gi,"<hr$1>\n\n"),t=t.replace(/\r\n|\r/g,"\n"),t=t.replace(/\n\s*\n+/g,"\n\n"),t=t.replace(/([\s\S]+?)\n\n/g,"<p>$1</p>\n"),t=t.replace(/<p>\s*?<\/p>/gi,""),t=t.replace(new RegExp("<p>\\s*(</?(?:"+n+")(?: [^>]*)?>)\\s*</p>","gi"),"$1"),t=t.replace(/<p>(<li.+?)<\/p>/gi,"$1"),t=t.replace(/<p>\s*<blockquote([^>]*)>/gi,"<blockquote$1><p>"),t=t.replace(/<\/blockquote>\s*<\/p>/gi,"</p></blockquote>"),t=t.replace(new RegExp("<p>\\s*(</?(?:"+n+")(?: [^>]*)?>)","gi"),"$1"),t=t.replace(new RegExp("(</?(?:"+n+")(?: [^>]*)?>)\\s*</p>","gi"),"$1"),t=t.replace(/\s*\n/gi,"<br />\n"),t=t.replace(new RegExp("(</?(?:"+n+")[^>]*>)\\s*<br />","gi"),"$1"),t=t.replace(/<br \/>(\s*<\/?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)>)/gi,"$1"),t=t.replace(/(?:<p>|<br ?\/?>)*\s*\[caption([^\[]+)\[\/caption\]\s*(?:<\/p>|<br ?\/?>)*/gi,"[caption$1[/caption]"),t=t.replace(/(<(?:div|th|td|form|fieldset|dd)[^>]*>)(.*?)<\/p>/g,function(t,e,i){return i.match(/<p( [^>]*)?>/)?t:e+"<p>"+i+"</p>"}),e&&(t=t.replace(/<wp-line-break>/g,"\n")),i&&(t=t.replace(/<wp-temp-br([^>]*)>/g,"<br$1>")),t}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return{contentmobile:"",contenttablet:"",font:"",style:""}},n.prototype.added=function(){this.needFill=["content","contenttablet","contentmobile"],this.addedFont("paragraph","font"),this.addedStyle("heading","style"),nextend.smartSlider.generator.registerField(t("#item_textcontent")),nextend.smartSlider.generator.registerField(t("#item_textcontenttablet")),nextend.smartSlider.generator.registerField(t("#item_textcontentmobile"))},n.prototype.getName=function(t){return t.content},n.prototype.parseAll=function(t){NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments),t.p=a(t.content),t.ptablet=a(t.contenttablet),t.pmobile=a(t.contentmobile)},n.prototype.render=function(t,e){return""==e.contenttablet&&(t=t.filter(":not(.n2-ss-tablet)"),t.filter(".n2-ss-desktop").addClass("n2-ss-tablet")),""==e.contentmobile&&(t=t.filter(":not(.n2-ss-mobile)"),t.filter(".n2-ss-tablet, .n2-ss-desktop").last().addClass("n2-ss-mobile")),t.find("p").addClass(e.fontclass+" "+e.styleclass),t.find("a").on("click",function(t){t.preventDefault()}),t},e.NextendSmartSliderItemParser_text=n}(n2,window),function(t,e,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.added=function(){this.needFill=["image","image2"],nextend.smartSlider.generator.registerField(t("#item_transitionimage")),nextend.smartSlider.generator.registerField(t("#item_transitionimage2")),nextend.smartSlider.generator.registerField(t("#item_transitionalt")),nextend.smartSlider.generator.registerField(t("#linkitem_transitionlink_0"))},n.prototype.getName=function(t){return t.image.split("/").pop()},n.prototype.parseAll=function(e,i){e.uid=t.fn.uid();var n=e.link.split("|*|");e.url=n[0],e.target=n[1],delete e.link,NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments);var a=e.image;e.image=nextend.imageHelper.fixed(e.image),e.image2=nextend.imageHelper.fixed(e.image2),i&&"$system$/images/placeholder/imagefront.png"==i.values.image&&a!=i.values.image&&this.resizeLayerToImage(i,e.image)},n.prototype.fitLayer=function(t){return this.resizeLayerToImage(t,nextend.imageHelper.fixed(t.values.image)),!0},e.NextendSmartSliderItemParser_transition=n}(n2,window),function(t,e,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.added=function(){this.needFill=["video_mp4","video_webm","video_ogg"],nextend.smartSlider.generator.registerField(t("#item_videovideo_mp4")),nextend.smartSlider.generator.registerField(t("#item_videovideo_webm")),nextend.smartSlider.generator.registerField(t("#item_videovideo_ogg"))},n.prototype.getName=function(t){return t.video_mp4},n.prototype.fitLayer=function(t){return!0},e.NextendSmartSliderItemParser_video=n}(n2,window),function(t,e,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.added=function(){this.needFill=["vimeourl"],nextend.smartSlider.generator.registerField(t("#item_vimeovimeourl"))},n.prototype.getName=function(t){return t.vimeourl},n.prototype.parseAll=function(e,i){var n=i.values.vimeourl!=e.vimeourl;if(NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments),""==e.image&&(e.image="$system$/images/placeholder/video.png"),e.image=nextend.imageHelper.fixed(e.image),n&&""!=e.vimeourl){var a=/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/,o=e.vimeourl.match(a),r=!1;o?r=o[3]:e.vimeourl.match(/^[0-9]+$/)&&(r=e.vimeourl),r?NextendAjaxHelper.getJSON("https://vimeo.com/api/v2/video/"+encodeURI(r)+".json").done(t.proxy(function(e){t("#item_vimeoimage").val(e[0].thumbnail_large).trigger("change")},this)).fail(function(t){nextend.notificationCenter.error(t.responseText)}):nextend.notificationCenter.error("The provided URL does not match any known Vimeo url or code!")}},n.prototype.fitLayer=function(t){return!0},e.NextendSmartSliderItemParser_vimeo=n}(n2,window),function(t,e,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.added=function(){this.needFill=["youtubeurl"],nextend.smartSlider.generator.registerField(t("#item_youtubeyoutubeurl")),nextend.smartSlider.generator.registerField(t("#item_youtubestart"))},n.prototype.getName=function(t){return t.youtubeurl},n.prototype.parseAll=function(e,i){var n=i.values.youtubeurl!=e.youtubeurl;if(NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments),""==e.image&&(e.image="$system$/images/placeholder/video.png"),e.image=nextend.imageHelper.fixed(e.image),n){var a=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,o=e.youtubeurl.match(a);o?NextendAjaxHelper.getJSON("https://www.googleapis.com/youtube/v3/videos?id="+encodeURI(o[2])+"&part=snippet&key=AIzaSyC3AolfvPAPlJs-2FgyPJdEEKS6nbPHdSM").done(t.proxy(function(e){if(e.items.length){var i=e.items[0].snippet.thumbnails,n=i.maxres||i.standard||i.high||i.medium||i["default"];t("#item_youtubeimage").val(n.url).trigger("change")}},this)).fail(function(t){nextend.notificationCenter.error(t.error.errors[0].message)}):nextend.notificationCenter.error("The provided URL does not match any known YouTube url or code!")}},n.prototype.fitLayer=function(t){return!0},e.NextendSmartSliderItemParser_youtube=n}(n2,window),function(t,e,i,n){"use strict";function a(t,i,n){this.$=e(this),this.animations=t,this.group=i,this.data=n,this.row=e('<li class="n2-ss-animation-row"></li>').data("animation",this);var a=e('<div class="n2-ss-animation-title"></div>').appendTo(this.row);this.label=e("<span>"+this.data.name+"</span>").appendTo(a);e('<div class="n2-actions"></div>').append(e('<a onclick="return false;" href="#"><i class="n2-i n2-i-delete n2-i-grey-opacity"></i></a>').on("click",e.proxy(this["delete"],this))).appendTo(a)}a.prototype.getRow=function(){return this.row},a.prototype.edit=function(){this.animations.edit(this.group,this.animations[this.group+"Rows"].index(this.row))},a.prototype.save=function(t){t!==!1&&(this.data=t,this.label.html(t.name),this.$.trigger("animationChanged"))},a.prototype["delete"]=function(e){e&&e.stopPropagation(),this.row.remove(),this.animations.removeAnimation(this),t.layerAnimationManager.update(this.group),this.$.trigger("animationDeleted")},a.prototype.setDelay=function(t){this.data.delay=t},a.prototype.setDuration=function(t){this.data.duration=t},i.NextendSmartSliderLayerAnimation=a}(nextend.smartSlider,n2,window),function(t,e,i,n){function a(e){this.layerEditor=e,this.createGroup("in",n2_("in"),"#layer-animation-chain-in"),this.lists=this["in"].list,this.createGroup("loop",n2_("loop"),"#layer-animation-chain-loop"),this.createGroup("out",n2_("out"),"#layer-animation-chain-out"),this.lists=this.lists.add(this.loop.list).add(this.out.list),t.layerAnimationManager=this,new NextendSmartSliderAdminTimelineManager(e)}a.prototype.createGroup=function(t,i,n){n=e(n);var a=e('<div class="n2-sidebar-row n2-sidebar-header-bg n2-form-dark n2-sets-header"><div class="n2-table"><div class="n2-tr"><div class="n2-td"><div class="n2-h3 n2-uc">'+i+'</div></div><div style="text-align: '+(nextend.isRTL()?"left":"right")+';" class="n2-td"></div></div></div></div>').appendTo(n),o=a.find(".n2-td").eq(1);this[t]={container:n,header:a,list:e('<ul class="n2-list n2-h4 n2-list-orderable n2-ss-animation-list"></ul>').on("click",e.proxy(this.editGroup,this,t)).data("group",t).appendTo(n),add:this.getAddButton(t,n2_("Add")).appendTo(o),clear:this.getClearButton(t).appendTo(o)}},a.prototype.getAddButton=function(t,i){var n=e('<a href="#" class="n2-button n2-button-medium n2-button-green n2-h5 n2-uc">'+i+"</a>").on("click",e.proxy(this.createAnimation,this,t));return n},a.prototype.getClearButton=function(t){var i=e('<a href="#" class="n2-button n2-button-medium n2-button-grey n2-h5 n2-uc">'+n2_("Clear")+"</a>").on("click",e.proxy(this.clear,this,t));return i},a.prototype.getActiveLayer=function(){return this.layerEditor.layerList[this.layerEditor.activeLayerIndex]},a.prototype.editGroup=function(t,i){var n=0;if(i&&(i.preventDefault(),n=e(i.target).closest(".n2-ss-animation-row").index()),-1!=n){var a=this.getActiveLayer().animation;a.edit(t,n)}},a.prototype.clear=function(t,e){e&&e.preventDefault(),this.getActiveLayer().animation.clear(t)},a.prototype.createAnimation=function(t,i){i&&i.preventDefault();var n=this.getActiveLayer(),a=n.layer,o=nextend.animationManager;o.controller.setPreviewSize(a.width(),a.height()).setGroup(t);var r={repeatable:1};"in"==t?(r.specialZero=1,r.playEvent=1,o.changeSetById(1e3),o.setTitle(n2_("In animation"))):"loop"==t?(r.repeat=1,r.playEvent=1,r.pauseEvent=1,r.stopEvent=1,o.changeSetById(1200),o.setTitle(n2_("Loop animation"))):"out"==t&&(r.playEvent=1,r.instantOut=1,o.changeSetById(1e3),o.setTitle(n2_("Out animation"))),o.show(r,{animations:[],transformOrigin:"50|*|50|*|0",specialZero:n.animation.data.specialZero,repeatCount:n.animation.data.repeatCount,repeatDelay:n.animation.data.repeatDelay,playEvent:"",pauseEvent:"",stopEvent:"",repeatable:n.animation.data.repeatable,instantOut:n.animation.data.instantOut},e.proxy(this.storeNewAnimation,this,t),{previewMode:!1,previewHTML:!1})},a.prototype.storeNewAnimation=function(t,i,n){if(n.animations.length>0){var a=this.getActiveLayer().animation;a.setTransformOrigin(t,n.transformOrigin),a.setRepeatable(n.repeatable),"in"==t?(a.setSpecialZero(t,n.specialZero),a.setEvent(t,"PlayEvent",n.playEvent)):"loop"==t?(a.setRepeatCount(t,n.repeatCount),a.setRepeatStartDelay(t,n.repeatStartDelay),a.setEvent(t,"PlayEvent",n.playEvent),a.setEvent(t,"PauseEvent",n.pauseEvent),a.setEvent(t,"StopEvent",n.stopEvent)):"out"==t&&(a.setEvent(t,"PlayEvent",n.playEvent),a.setInstantOut(n.instantOut));for(var o=0;o<n.animations.length;o++)a.addAnimation(t,n.animations[o]);this.update(t),e(window).triggerHandler("AnimationAdded")}this.update(t)},a.prototype.activateAnimations=function(t){t.inRows.prependTo(this["in"].list),t.loopRows.prependTo(this.loop.list),t.outRows.prependTo(this.out.list),this.update("in"),this.update("loop"),this.update("out")},a.prototype.update=function(t){this[t].list.children().length?(this[t].add.css("display","none"),this[t].clear.css("display","")):(this[t].add.css("display",""),this[t].clear.css("display","none"))},i.NextendSmartSliderLayerAnimationManager=a}(nextend.smartSlider,n2,window),function(t,e,i,n){function a(t){this._loaded=!1,this.active=!1,this.layer=t,this.data=null,t.layer.data("adminLayerAnimations",this),this.inRows=e(),this.loopRows=e(),this.outRows=e()}var o={repeatable:0,"in":[],specialZeroIn:0,transformOriginIn:"50|*|50|*|0",inPlayEvent:"",loop:[],repeatCount:0,repeatStartDelay:0,transformOriginLoop:"50|*|50|*|0",loopPlayEvent:"",loopPauseEvent:"",loopStopEvent:"",out:[],transformOriginOut:"50|*|50|*|0",outPlayEvent:"",instantOut:1};a.prototype.deActivate=function(){this.active=!1,this.inRows.detach(),this.loopRows.detach(),this.outRows.detach()},a.prototype.activate=function(){this.active=!0,t.layerAnimationManager.activateAnimations(this)},a.prototype.addAnimation=function(e,i){var n=new NextendSmartSliderLayerAnimation(this,e,i),a=n.getRow();this[e+"Rows"]=this[e+"Rows"].add(a),this.active&&a.appendTo(t.layerAnimationManager[e].list),this.layer.$.trigger("layerAnimationAdded",[e,n])},a.prototype.removeAnimation=function(t){var e=t.group;this[e+"Rows"]=this[e+"Rows"].not(t.row)},a.prototype.clearAll=function(){this._startHistory(),this._clear("in"),this._clear("loop"),this._clear("out"),this._endHistory()},a.prototype.clear=function(t){this._startHistory(),this._clear(t),this._endHistory()},a.prototype._clear=function(t){for(var e=this[t+"Rows"],i=0;i<e.length;i++)e.eq(i).data("animation")["delete"]()},a.prototype.getCurrentData=function(t){for(var e=[],i=0;i<this[t+"Rows"].length;i++)e.push(this[t+"Rows"].eq(i).data("animation").data);var n={animations:e,transformOrigin:this.data["transformOrigin"+this.ucfirst(t)],repeatable:this.data.repeatable};return"in"==t?(n.specialZero=this.data.specialZeroIn,n.playEvent=this.data.inPlayEvent):"loop"==t?(n.repeatCount=this.data.repeatCount,n.repeatStartDelay=this.data.repeatStartDelay,n.playEvent=this.data.loopPlayEvent,n.pauseEvent=this.data.loopPauseEvent,n.stopEvent=this.data.loopStopEvent):"out"==t&&(n.playEvent=this.data.outPlayEvent,n.instantOut=this.data.instantOut),n},a.prototype.edit=function(t,i){for(var n=[],a=0;a<this[t+"Rows"].length;a++)n.push(this[t+"Rows"].eq(a).data("animation").data);var o=nextend.animationManager;o.controller.setPreviewSize(this.layer.layer.width(),this.layer.layer.height()).setGroup(t);var r={repeatable:1},s={animations:n,transformOrigin:this.data["transformOrigin"+this.ucfirst(t)],repeatable:this.data.repeatable};"in"==t?(r.specialZero=1,s.specialZero=this.data.specialZeroIn,r.playEvent=1,s.playEvent=this.data.inPlayEvent,o.changeSetById(1e3),o.setTitle(n2_("In animation"))):"loop"==t?(r.repeat=1,s.repeatCount=this.data.repeatCount,s.repeatStartDelay=this.data.repeatStartDelay,r.playEvent=1,s.playEvent=this.data.loopPlayEvent,r.pauseEvent=1,s.pauseEvent=this.data.loopPauseEvent,r.stopEvent=1,s.stopEvent=this.data.loopStopEvent,o.changeSetById(1200),o.setTitle(n2_("Loop animation"))):"out"==t&&(r.playEvent=1,r.instantOut=1,s.playEvent=this.data.outPlayEvent,s.instantOut=this.data.instantOut,o.changeSetById(1e3),o.setTitle(n2_("Out animation"))),o.show(r,s,e.proxy(this.storeAnimations,this,t,s),{previewMode:!1,previewHTML:!1}),i>0&&o.controller.tabField.options.eq(i).trigger("click")},a.prototype.storeAnimations=function(i,n,a,o){t.history.add(e.proxy(function(){return[this.layer,"storeAnimations",e.extend(!0,{},o),e.extend(!0,{},n),[i]]},this));var r=0,s=this[i+"Rows"];for(this.setTransformOrigin(i,o.transformOrigin),this.setRepeatable(o.repeatable),"in"==i?(this.setSpecialZero(i,o.specialZero),this.setEvent(i,"PlayEvent",o.playEvent)):"loop"==i?(this.setRepeatCount(i,o.repeatCount),this.setRepeatStartDelay(i,o.repeatStartDelay),this.setEvent(i,"PlayEvent",o.playEvent),this.setEvent(i,"PauseEvent",o.pauseEvent),this.setEvent(i,"StopEvent",o.stopEvent)):"out"==i&&(this.setEvent(i,"PlayEvent",o.playEvent),this.setInstantOut(o.instantOut));r<o.animations.length&&r<s.length;r++)s.eq(r).data("animation").save(o.animations[r]);for(;r<o.animations.length;r++)this.addAnimation(i,o.animations[r]);for(;r<s.length;r++)s.eq(r).data("animation")["delete"]();t.layerAnimationManager.update(i)},a.prototype.load=function(){if(this._loaded===!1){var t=this.layer.layer.data("animations");this.data={},e.extend(this.data,o),"undefined"!=typeof t&&e.extend(this.data,e.parseJSON(Base64.decode(t))),this._load("in"),this._load("loop"),this._load("out"),this._loaded=!0}},a.prototype._load=function(t){if("undefined"!=typeof this.data[t]){for(var e=0;e<this.data[t].length;e++)this.addAnimation(t,this.data[t][e]);delete this.data[t]}},a.prototype.getAnimationsCode=function(){if(this._loaded===!1)return this.layer.layer.data("animations");for(var t=e.extend({},this.data,{"in":[],loop:[],out:[]}),i=0;i<this.inRows.length;i++){var n=this.inRows.eq(i).data("animation");t["in"].push(n.data)}for(var i=0;i<this.loopRows.length;i++){var n=this.loopRows.eq(i).data("animation");t.loop.push(n.data)}for(var i=0;i<this.outRows.length;i++){var n=this.outRows.eq(i).data("animation");t.out.push(n.data)}return Base64.encode(JSON.stringify(t))},a.prototype._startHistory=function(){this._oldData={"in":e.extend(!0,{},this.getCurrentData("in")),loop:e.extend(!0,{},this.getCurrentData("loop")),out:e.extend(!0,{},this.getCurrentData("out"))}},a.prototype._endHistory=function(){var i={"in":this.getCurrentData("in"),loop:this.getCurrentData("loop"),out:this.getCurrentData("out")};for(var n in i)t.history.add(e.proxy(function(){return[this.layer,"storeAnimations",e.extend(!0,{},i[n]),e.extend(!0,{},this._oldData[n]),[n]]},this));this._oldData=null},a.prototype.loadData=function(t){this._startHistory(),this._clear("in"),this._clear("loop"),this._clear("out"),this.data={},e.extend(this.data,o),e.extend(this.data,t),this._load("in"),this._load("loop"),this._load("out"),this._endHistory()},a.prototype.getData=function(){for(var t=e.extend({},this.data,{"in":[],loop:[],out:[]}),i=0;i<this.inRows.length;i++){var n=this.inRows.eq(i).data("animation");t["in"].push(e.extend(!0,{},n.data))}for(var i=0;i<this.loopRows.length;i++){var n=this.loopRows.eq(i).data("animation");
t.loop.push(e.extend(!0,{},n.data))}for(var i=0;i<this.outRows.length;i++){var n=this.outRows.eq(i).data("animation");t.out.push(e.extend(!0,{},n.data))}return t},a.prototype.setSpecialZero=function(t,e){e=parseInt(e)?1:0,e!=this.data["transformOrigin"+this.ucfirst(t)]&&(this.data.specialZeroIn=e,this.layer.$.trigger("layerAnimationSpecialZeroInChanged"))},a.prototype.setRepeatCount=function(t,e){this.data.repeatCount=e},a.prototype.setRepeatStartDelay=function(t,e){this.data.repeatStartDelay=e},a.prototype.setEvent=function(t,e,i){this.data[t+e]=i},a.prototype.setTransformOrigin=function(t,e){this.data["transformOrigin"+this.ucfirst(t)]=e},a.prototype.setRepeatable=function(t){this.data.repeatable=parseInt(t)?1:0},a.prototype.setInstantOut=function(t){this.data.instantOut=parseInt(t)?1:0},a.prototype.ucfirst=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},i.NextendSmartSliderLayerAnimations=a}(nextend.smartSlider,n2,window),function(t,e,i,n){function a(t,i,n,a){if(this.isDeleted=!1,this._triggerLayerResizedThrottled=NextendThrottle(this._triggerLayerResized,30),this.doThrottledTheResize=this.doTheResize,this.eye=!1,this.lock=!1,this.parent=!1,this.parentIsVisible=!0,this.$=e(this),this.layerEditor=t,this.timelineLayer=null,i){this.property={id:i.attr("id"),"class":i.data("class"),parentid:i.data("parentid"),parentalign:i.data("desktopportraitparentalign"),parentvalign:i.data("desktopportraitparentvalign"),name:i.data("name")+"",nameSynced:i.data("namesynced"),crop:i.data("crop"),inneralign:i.data("inneralign"),parallax:i.data("parallax"),align:i.data("desktopportraitalign"),valign:i.data("desktopportraitvalign"),fontsize:i.data("desktopportraitfontsize"),adaptivefont:i.data("adaptivefont"),desktopPortrait:parseFloat(i.data("desktopportrait")),desktopLandscape:parseFloat(i.data("desktoplandscape")),tabletPortrait:parseFloat(i.data("tabletportrait")),tabletLandscape:parseFloat(i.data("tabletlandscape")),mobilePortrait:parseFloat(i.data("mobileportrait")),mobileLandscape:parseFloat(i.data("mobilelandscape")),left:parseInt(i.data("desktopportraitleft")),top:parseInt(i.data("desktopportraittop")),responsiveposition:parseInt(i.data("responsiveposition")),responsivesize:parseInt(i.data("responsivesize")),mouseenter:i.data("mouseenter"),click:i.data("click"),mouseleave:i.data("mouseleave"),play:i.data("play"),pause:i.data("pause"),stop:i.data("stop")};var o=i.data("desktopportraitwidth");this.isDimensionPropertyAccepted(o)?this.property.width=o:this.property.width=parseInt(o);var r=i.data("desktopportraitheight");this.isDimensionPropertyAccepted(r)?this.property.height=r:this.property.height=parseInt(r)}else i=e('<div class="n2-ss-layer" style="z-index: '+t.zIndexList.length+';"></div>').appendTo(t.layerContainerElement),this.property=e.extend({id:null,"class":"",parentid:null,parentalign:"center",parentvalign:"middle",name:"New layer",nameSynced:1,crop:"visible",inneralign:"left",parallax:0,align:"center",valign:"middle",fontsize:100,adaptivefont:0,desktopPortrait:1,desktopLandscape:1,tabletPortrait:1,tabletLandscape:1,mobilePortrait:1,mobileLandscape:1,left:0,top:0,responsiveposition:1,width:"auto",height:"auto",responsivesize:1,mouseenter:s,click:s,mouseleave:s,play:s,pause:s,stop:s},a);this.property.id||(this.property.id=null),this.subscribeParentCallbacks={},this.property.parentid?this.subscribeParent():this.property.parentid=null,this.property.parentalign||(this.property.parentalign="center"),this.property.parentvalign||(this.property.parentvalign="middle"),"undefined"==typeof this.property.nameSynced&&(this.property.nameSynced=1),"undefined"==typeof this.property.responsiveposition&&(this.property.responsiveposition=1),"undefined"==typeof this.property.responsivesize&&(this.property.responsivesize=1),this.property.inneralign||(this.property.inneralign="left"),this.property.crop||(this.property.crop="visible"),this.property.parallax||(this.property.parallax=0),"undefined"==typeof this.property.fontsize&&(this.property.fontsize=100),"undefined"==typeof this.property.adaptivefont&&(this.property.adaptivefont=0),this.property.align||(this.property.align="left"),this.property.valign||(this.property.valign="top"),i.attr("data-align",this.property.align),i.attr("data-valign",this.property.valign),this.layer=i.data("layerObject",this),this.layer.css("visibility","hidden"),this.zIndex=parseInt(this.layer.css("zIndex")),isNaN(this.zIndex)&&(this.zIndex=0);var l=i.data("eye"),d=i.data("lock");null!==l&&"undefined"!=typeof l&&(this.eye=!!l),null!==d&&"undefined"!=typeof d&&(this.lock=!!d),this.deviceProperty={desktopPortrait:{left:this.property.left,top:this.property.top,width:this.property.width,height:this.property.height,align:this.property.align,valign:this.property.valign,parentalign:this.property.parentalign,parentvalign:this.property.parentvalign,fontsize:this.property.fontsize},desktopLandscape:{left:i.data("desktoplandscapeleft"),top:i.data("desktoplandscapetop"),width:i.data("desktoplandscapewidth"),height:i.data("desktoplandscapeheight"),align:i.data("desktoplandscapealign"),valign:i.data("desktoplandscapevalign"),parentalign:i.data("desktoplandscapeparentalign"),parentvalign:i.data("desktoplandscapeparentvalign"),fontsize:i.data("desktoplandscapefontsize")},tabletPortrait:{left:i.data("tabletportraitleft"),top:i.data("tabletportraittop"),width:i.data("tabletportraitwidth"),height:i.data("tabletportraitheight"),align:i.data("tabletportraitalign"),valign:i.data("tabletportraitvalign"),parentalign:i.data("tabletportraitparentalign"),parentvalign:i.data("tabletportraitparentvalign"),fontsize:i.data("tabletportraitfontsize")},tabletLandscape:{left:i.data("tabletlandscapeleft"),top:i.data("tabletlandscapetop"),width:i.data("tabletlandscapewidth"),height:i.data("tabletlandscapeheight"),align:i.data("tabletlandscapealign"),valign:i.data("tabletlandscapevalign"),parentalign:i.data("tabletlandscapeparentalign"),parentvalign:i.data("tabletlandscapeparentvalign"),fontsize:i.data("tabletlandscapefontsize")},mobilePortrait:{left:i.data("mobileportraitleft"),top:i.data("mobileportraittop"),width:i.data("mobileportraitwidth"),height:i.data("mobileportraitheight"),align:i.data("mobileportraitalign"),valign:i.data("mobileportraitvalign"),parentalign:i.data("mobileportraitparentalign"),parentvalign:i.data("mobileportraitparentvalign"),fontsize:i.data("mobileportraitfontsize")},mobileLandscape:{left:i.data("mobilelandscapeleft"),top:i.data("mobilelandscapetop"),width:i.data("mobilelandscapewidth"),height:i.data("mobilelandscapeheight"),align:i.data("mobilelandscapealign"),valign:i.data("mobilelandscapevalign"),parentalign:i.data("mobilelandscapeparentalign"),parentvalign:i.data("mobilelandscapeparentvalign"),fontsize:i.data("mobilelandscapefontsize")}},this.layersItemsElement=t.layersItemsElement,this.layersItemsUlElement=this.layersItemsElement.find("> ul"),this.createRow(),this.itemEditor=n,this.initItems(),this.___makeLayerAlign(),this.___makeLayerResizeable(),this.___makeLayerDraggable(),t.layerList.push(this),"undefined"==typeof t.zIndexList[this.zIndex]?t.zIndexList[this.zIndex]=this:t.zIndexList.splice(this.zIndex,0,this),this._lock(),this.animation=new NextendSmartSliderLayerAnimations(this),this.layerEditor.$.trigger("layerCreated",this),e(window).triggerHandler("layerCreated"),this.animation.load(),this.layer.on({mousedown:e.proxy(this.activate,this),dblclick:e.proxy(this.fit,this)}),setTimeout(e.proxy(function(){this._resize(!0),this._eye()},this),300)}var o=!1,r=null;window.nextendPreventClick=!1;var s,l=function(){var t=0;return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){var i,n=(new Date).getTime();return i=Math.max(0,16-(n-t)),t=n+i,setTimeout(function(){e(n+i)},i)}}(),d={raf:!1,ratios:null,isThrottled:!1,layers:[]},p=function(){d.raf===!1&&(d.raf=!0,l(function(){for(var t=0;t<d.layers.length;t++)d.layers[t].isDeleted||d.layers[t].doTheResize(d.ratios,!0,d.isThrottled);d={raf:!1,ratios:null,isThrottled:!1,layers:[]}}))};a.prototype.getIndex=function(){return this.layerEditor.layerList.indexOf(this)},a.prototype.getParent=function(){return e("#"+this.getProperty(!1,"parentid")).data("layerObject")},a.prototype.requestID=function(){var t=this.getProperty(!1,"id");return t||(t=e.fn.uid(),this.setProperty("id",t,"layer")),t},a.prototype.createRow=function(){var t=300,i=null,n=e('<a class="n2-ss-parent-unlink" href="#" onclick="return false;"><i class="n2-i n2-i-layerunlink n2-i-grey-opacity"></i></a>').on("click",e.proxy(this.unlink,this)),a=e('<a href="#" onclick="return false;"><i class="n2-i n2-i-delete n2-i-grey-opacity"></i></a>').on("click",e.proxy(this["delete"],this)),o=e('<a href="#" onclick="return false;"><i class="n2-i n2-i-duplicate n2-i-grey-opacity"></i></a>').on("click",e.proxy(this.duplicate,this,!0,!1));this.soloElement=e('<a href="#" onclick="return false;"><i class="n2-i n2-i-bulb n2-i-grey-opacity"></i></a>').css("opacity",.3).on("click",e.proxy(this.switchSolo,this)),this.eyeElement=e('<a href="#" onclick="return false;"><i class="n2-i n2-i-eye n2-i-grey-opacity"></i></a>').on("click",e.proxy(this.switchEye,this)),this.lockElement=e('<a href="#" onclick="return false;"><i class="n2-i n2-i-lock n2-i-grey-opacity"></i></a>').on("click",e.proxy(this.switchLock,this)),this.layerRow=e('<li class="n2-ss-layer-row"></li>').on({mouseenter:e.proxy(function(){this.layer.addClass("n2-highlight")},this),mouseleave:e.proxy(function(t){this.layer.removeClass("n2-highlight")},this)}).appendTo(this.layersItemsUlElement),this.layerTitleSpan=e('<span class="n2-ucf">'+this.property.name+"</span>").on({mouseup:e.proxy(function(n){i?(clearTimeout(i),i=null,this.editName()):i=setTimeout(e.proxy(function(){this.activate(),i=null},this),t)},this)}),this.layerTitle=e('<div class="n2-ss-layer-title"></div>').append(this.layerTitleSpan).append(e('<div class="n2-actions"></div>').append(n).append(o).append(a)).append(e('<div class="n2-actions-left"></div>').append(this.eyeElement).append(this.soloElement).append(this.lockElement)).appendTo(this.layerRow).on({mouseup:e.proxy(function(t){"DIV"===t.target.tagName&&this.activate()},this)}),this.editorVisibilityChange()},a.prototype.editorVisibilityChange=function(){switch(this.layersItemsUlElement.children().length){case 0:e("body").removeClass("n2-has-layers");break;case 1:e("body").addClass("n2-has-layers")}},a.prototype.setZIndex=function(t){this.zIndex=t,this.layer.css("zIndex",t),this.layersItemsUlElement.append(this.layerRow),this.$.trigger("layerIndexed",t)},a.prototype.activate=function(t){document.activeElement&&document.activeElement.blur(),0==this.items.length?console.error("The layer do not have item on it!"):this.items[0].activate();var e=this.getIndex();if(this.layerEditor.activeLayerIndex!==e){this.layerRow.addClass("n2-active"),this.layer.triggerHandler("n2-ss-activate"),this.layerEditor.changeActiveLayer(e),nextend.activeLayer=this.layer;var i=this.layersItemsUlElement.parent(),n=i.scrollTop(),a=this.layerRow.get(0).offsetTop;(n>a||a>n+i.height()-this.layerRow.height())&&i.scrollTop(a),r&&(o.removeClass("n2-highlight2"),clearTimeout(r),r=null),o=this.layer.addClass("n2-highlight2"),r=setTimeout(function(){o.removeClass("n2-highlight2"),o=null,r=null},500)}},a.prototype.deActivate=function(){this.animation&&this.animation.deActivate(),this.layerRow.removeClass("n2-active"),this.layer.triggerHandler("n2-ss-deactivate")},a.prototype.fit=function(){var t=this.layer.get(0);this.layerEditor.slideSize,this.layer.position();if(t.scrollWidth>0&&t.scrollHeight>0){for(var e=!1,i=0;i<this.items.length&&!(e=this.items[i].parser.fitLayer(this.items[i]));i++);if(!e){this.setProperty("width","auto","layer"),this.setProperty("height","auto","layer");var n=this.layer.width();Math.abs(this.layerEditor.layerContainerElement.width()-this.layer.position().left-n)<2&&this.setProperty("width",n,"layer")}}},a.prototype.switchToAnimation=function(){t.sidebarManager.switchTab(1)},a.prototype.hide=function(t){this.store(!1,t?t:this.getMode(),0,!0)},a.prototype.show=function(t){this.store(!1,t?t:this.getMode(),1,!0)},a.prototype.switchSolo=function(){this.layerEditor.setSolo(this)},a.prototype.markSolo=function(){this.soloElement.css("opacity",1),this.layer.addClass("n2-ss-layer-solo")},a.prototype.unmarkSolo=function(){this.soloElement.css("opacity",.3),this.layer.removeClass("n2-ss-layer-solo")},a.prototype.switchEye=function(){this.eye=!this.eye,this._eye()},a.prototype._eye=function(){this.eye?(this.eyeElement.css("opacity",.3),this.layer.css("visibility","hidden")):(this.eyeElement.css("opacity",1),this.layer.css("visibility",""))},a.prototype._hide=function(){this.layer.css("display","none")},a.prototype._show=function(){parseInt(this.property[this.layerEditor.getMode()])&&this.layer.css("display","block")},a.prototype.switchLock=function(){this.lock=!this.lock,this._lock()},a.prototype._lock=function(){this.lock?(this.lockElement.css("opacity",1),this.layer.nextenddraggable("disable"),this.layer.nextendResizable("disable"),this.layer.addClass("n2-ss-layer-locked")):(this.lockElement.css("opacity",.3),this.layer.nextenddraggable("enable"),this.layer.nextendResizable("enable"),this.layer.removeClass("n2-ss-layer-locked"))},a.prototype.duplicate=function(i,n,a){var o=this.getHTML(!0,!1),r=o.attr("id");r&&(r=e.fn.uid(),o.attr("id",r)),n&&o.attr("data-parentid",n);var s=this.layerEditor._addLayer(o,!0);"undefined"==typeof a?a=[]:a.push(s),this.layer.triggerHandler("LayerDuplicated",[r,a]),this.layerRow.trigger("mouseleave"),i&&s.activate(),n||t.history.add(e.proxy(function(){return[this,"duplicateLayer","duplicate","delete",[s]]},this))},a.prototype["delete"]=function(i,n){t.history.add(e.proxy(function(){return[this,"deleteLayer","delete","create",[this.getData(!0)]]},this)),this.deActivate();for(var a=0;a<this.items.length;a++)this.items[a]["delete"]();this.layerEditor.zIndexList.splice(this.zIndex,1);var o=this.getProperty(!1,"parentid");o&&this.unSubscribeParent(!0),this.layer.trigger("mouseup"),this.layerEditor.layerDeleted(this.getIndex()),"undefined"==typeof n?n=[]:n.push(this),this.layer.triggerHandler("LayerDeleted",["undefined"!=typeof i?i:!1,n]),this.layer.remove(),this.layerRow.remove(),this.editorVisibilityChange(),this.$.trigger("layerDeleted"),delete this.layer,delete this.itemEditor,delete this.animation,this.isDeleted=!0},a.prototype.getHTML=function(t,i){var n=e('<div class="n2-ss-layer"></div>').attr("style",this.getStyleText());for(var a in this.property)"width"!=a&&"height"!=a&&"left"!=a&&"top"!=a&&n.attr("data-"+a.toLowerCase(),this.property[a]);for(var a in this.deviceProperty)for(var o in this.deviceProperty[a])n.attr("data-"+a.toLowerCase()+o,this.deviceProperty[a][o]);n.css({position:"absolute",zIndex:this.zIndex+1});for(var a in this.deviceProperty.desktop)n.css(a,this.deviceProperty.desktop[a]+"px");if(t)for(var r=0;r<this.items.length;r++)n.append(this.items[r].getHTML(i));var s=this.getProperty(!1,"id");return s&&""!=s&&n.attr("id",s),n.attr("data-eye",this.eye),n.attr("data-lock",this.lock),n.attr("data-animations",this.animation.getAnimationsCode()),n},a.prototype.getData=function(t){var e={zIndex:this.zIndex+1,eye:this.eye,lock:this.lock,animations:this.animation.getData()};for(var i in this.property)switch(i){case"width":case"height":case"left":case"top":case"align":case"valign":case"parentalign":case"parentvalign":case"fontsize":break;default:e[i.toLowerCase()]=this.property[i]}for(var n in this.deviceProperty)for(var a in this.deviceProperty[n]){var o=this.deviceProperty[n][a];"undefined"!=typeof o&&("width"==a&&this.isDimensionPropertyAccepted(o)||"height"==a&&this.isDimensionPropertyAccepted(o)||"align"==a||"valign"==a||"parentalign"==a||"parentvalign"==a||(o=parseFloat(o)),e[n.toLowerCase()+a]=o)}if(t){e.items=[];for(var r=0;r<this.items.length;r++)e.items.push(this.items[r].getData())}return e},a.prototype.getDataWithChildren=function(t){return t.push(this.getData(!0)),this.layer.triggerHandler("LayerGetDataWithChildren",[t]),t},a.prototype.initItems=function(){this.items=[];for(var t=this.layer.find(".n2-ss-item"),e=0;e<t.length;e++)this.addItem(t.eq(e),!1)},a.prototype.addItem=function(t,e){e&&t.appendTo(this.layer),new NextendSmartSliderItem(t,this,this.itemEditor)},a.prototype.editName=function(){var t=new NextendSmartSliderAdminInlineField;t.$input.on({valueChanged:e.proxy(function(t,e){this.rename(e,!0),this.layerTitleSpan.css("display","inline")},this),cancel:e.proxy(function(){this.layerTitleSpan.css("display","inline")},this)}),this.layerTitleSpan.css("display","none"),t.injectNode(this.layerTitle,this.property.name)},a.prototype.rename=function(t,e){if(this.property.nameSynced||e){if(e&&(this.property.nameSynced=0),""==t){if(e&&(this.property.nameSynced=1,this.items.length))return this.items[0].reRender(),!1;t="Layer #"+(this.layerEditor.layerList.length+1)}t=t.substr(0,35),this.property.name!=t&&(this.property.name=t,this.layerTitleSpan.html(t),this.$.trigger("layerRenamed",t))}},a.prototype.setProperty=function(t,e,i){switch(t){case"responsiveposition":case"responsivesize":e=parseInt(e);case"id":case"parentid":case"class":case"inneralign":case"crop":case"parallax":case"adaptivefont":case"mouseenter":case"click":case"mouseleave":case"play":case"pause":case"stop":this.store(!1,t,e,!0);break;case"parentalign":case"parentvalign":case"align":case"valign":case"fontsize":this.store(!0,t,e,!0);break;case"width":var n=this.layerEditor.getResponsiveRatio("h");parseInt(this.getProperty(!1,"responsivesize"))||(n=1);var a=e;this.isDimensionPropertyAccepted(e)||(a=~~e,a!=e&&this.$.trigger("propertyChanged",[t,a])),this.storeWithModifier(t,a,n,!0),this._resize(!1);break;case"height":var o=this.layerEditor.getResponsiveRatio("v");parseInt(this.getProperty(!1,"responsivesize"))||(o=1);var a=e;this.isDimensionPropertyAccepted(e)||(a=~~e,a!=e&&this.$.trigger("propertyChanged",[t,a])),this.storeWithModifier(t,a,o,!0),this._resize(!1);break;case"left":var r=this.layerEditor.getResponsiveRatio("h");parseInt(this.getProperty(!1,"responsiveposition"))||(r=1);var a=~~e;a!=e&&this.$.trigger("propertyChanged",[t,a]),this.storeWithModifier(t,a,r,!0);break;case"top":var s=this.layerEditor.getResponsiveRatio("v");parseInt(this.getProperty(!1,"responsiveposition"))||(s=1);var a=~~e;a!=e&&this.$.trigger("propertyChanged",[t,a]),this.storeWithModifier(t,a,s,!0);break;case"showFieldDesktopPortrait":this.store(!1,"desktopPortrait",parseInt(e),!0);break;case"showFieldDesktopLandscape":this.store(!1,"desktopLandscape",parseInt(e),!0);break;case"showFieldTabletPortrait":this.store(!1,"tabletPortrait",parseInt(e),!0);break;case"showFieldTabletLandscape":this.store(!1,"tabletLandscape",parseInt(e),!0);break;case"showFieldMobilePortrait":this.store(!1,"mobilePortrait",parseInt(e),!0);break;case"showFieldMobileLandscape":this.store(!1,"mobileLandscape",parseInt(e),!0)}"manager"!=i&&this.$.trigger("propertyChanged",[t,e])},a.prototype.getProperty=function(t,e){if(t){var i=this.deviceProperty[this.getMode()],n=this.deviceProperty.desktopPortrait;if("undefined"!=typeof i[e])return i[e];if("undefined"!=typeof n[e])return n[e]}return this.property[e]},a.prototype.store=function(i,n,a,o){var r=this.property[n];if(this.property[n]=a,i){var s=this.getMode();t.history.add(e.proxy(function(){return[this,"store",a,this.deviceProperty[s][n],[this.layer,i,n,s]]},this)),this.deviceProperty[s][n]=a}else t.history.add(e.proxy(function(){return[this,"store",a,r,[this.layer,i,n,this.getMode()]]},this));o&&this.render(n,a)},a.prototype.storeWithModifier=function(i,n,a,o){this.property[i]=n;var r=this.getMode();t.history.add(e.proxy(function(){return[this,"storeWithModifier",n,this.deviceProperty[r][i],[this.layer,i,r]]},this)),this.deviceProperty[r][i]=n,o&&this.renderWithModifier(i,n,a)},a.prototype.render=function(t,e){this["_sync"+t](e)},a.prototype.renderWithModifier=function(t,e,i){"width"!=t&&"height"!=t||!this.isDimensionPropertyAccepted(e)?this["_sync"+t](Math.round(e*i)):this["_sync"+t](e)},a.prototype._syncclass=function(t){this.layer.removeClass(),this.layer.addClass("n2-ss-layer"),t&&""!=t&&this.layer.addClass(t)},a.prototype._syncid=function(t){t&&""!=t?this.layer.attr("id",t):this.layer.removeAttr("id")},a.prototype.subscribeParent=function(){var t=this;this.subscribeParentCallbacks={LayerResized:function(){t.resizeParent.apply(t,arguments)},LayerParent:function(){t.layer.addClass("n2-ss-layer-parent"),t.layer.triggerHandler("LayerParent")},LayerUnParent:function(){t.layer.removeClass("n2-ss-layer-parent"),t.layer.triggerHandler("LayerUnParent")},LayerDeleted:function(e,i,n){i?t["delete"](i,n):t.setProperty("parentid","","layer")},LayerDuplicated:function(e,i,n){t.duplicate(!1,i,n)},LayerShowChange:function(e,i,n){t.getMode()==i&&(t.parentIsVisible=n)},"n2-ss-activate":function(){t.layerRow.addClass("n2-parent-active")},"n2-ss-deactivate":function(){t.layerRow.removeClass("n2-parent-active")},LayerGetDataWithChildren:function(e,i){t.getDataWithChildren(i)}},this.parent=n2("#"+this.property.parentid).on(this.subscribeParentCallbacks)},a.prototype.unSubscribeParent=function(t){if(this.layerRow.removeClass("n2-parent-active"),this.parent&&this.parent.off(this.subscribeParentCallbacks),this.parent=!1,this.subscribeParentCallbacks={},!t){var e=this.layer.position();this.setPosition(e.left,e.top)}},a.prototype.unlink=function(t){t.preventDefault(),this.setProperty("parentid","","layer")},a.prototype.parentPicked=function(t,e,i,n,a){this.setProperty("parentid","","layer"),this.setProperty("align",n,"layer"),this.setProperty("valign",a,"layer"),this.setProperty("parentalign",e,"layer"),this.setProperty("parentvalign",i,"layer"),this.setProperty("parentid",t.requestID(),"layer")},a.prototype._syncparentid=function(t){t&&""!=t?0==e("#"+t).length?this.setProperty("parentid","","layer"):(this.layer.attr("data-parentid",t),this.subscribeParent(),this.setPosition(this.layer.position().left,this.layer.position().top)):(this.layer.removeAttr("data-parentid"),this.unSubscribeParent(!1))},a.prototype._syncparentalign=function(t){this.layer.data("parentalign",t);var e=this.getParent();e&&e._resize(!1)},a.prototype._syncparentvalign=function(t){this.layer.data("parentvalign",t);var e=this.getParent();e&&e._resize(!1)},a.prototype._syncinneralign=function(t){this.layer.css("text-align",t)},a.prototype._synccrop=function(t){"auto"==t&&(t="hidden");var i=this.layer.find("> .n2-ss-layer-mask");if("mask"==t){if(t="hidden",!i.length){i=e("<div class='n2-ss-layer-mask'></div>").appendTo(this.layer);for(var n=0;n<this.items.length;n++)i.append(this.items[n].item)}}else if(i.length)for(var n=0;n<this.items.length;n++)this.layer.append(this.items[n].item),i.remove();this.layer.css("overflow",t)},a.prototype._syncparallax=function(t){},a.prototype._syncalign=function(t,e){"undefined"!==e&&t!=e&&this.setPosition(this.layer.position().left,this.layer.position().top),this.layer.attr("data-align",t)},a.prototype._syncvalign=function(t,e){"undefined"!==e&&t!=e&&this.setPosition(this.layer.position().left,this.layer.position().top),this.layer.attr("data-valign",t)},a.prototype._syncfontsize=function(t){this.adjustFontSize(this.getProperty(!1,"adaptivefont"),t,!0)},a.prototype._syncadaptivefont=function(t){this.adjustFontSize(t,this.getProperty(!0,"fontsize"),!0)},a.prototype.adjustFontSize=function(t,e,i){e=parseInt(e),parseInt(t)?this.layer.css("font-size",nextend.smartSlider.frontend.sliderElement.data("fontsize")*e/100+"px"):100!=e?this.layer.css("font-size",e+"%"):this.layer.css("font-size",""),i&&this.update()},a.prototype._syncleft=function(t){if(this.parent&&this.parentIsVisible){var e=this.parent.position(),i=this.getProperty(!0,"align"),n=this.getProperty(!0,"parentalign"),a=0;switch(n){case"right":a=e.left+this.parent.width();break;case"center":a=e.left+this.parent.width()/2;break;default:a=e.left}switch(i){case"right":this.layer.css({left:"auto",right:this.layer.parent().width()-a-t+"px"});break;case"center":this.layer.css({left:a+t-this.layer.width()/2+"px",right:"auto"});break;default:this.layer.css({left:a+t+"px",right:"auto"})}}else switch(this.getProperty(!0,"align")){case"right":this.layer.css({left:"auto",right:-t+"px"});break;case"center":this.layer.css({left:this.layer.parent().width()/2+t-this.layer.width()/2+"px",right:"auto"});break;default:this.layer.css({left:t+"px",right:"auto"})}this.triggerLayerResized()},a.prototype._synctop=function(t){if(this.parent&&this.parentIsVisible){var e=this.parent.position(),i=this.getProperty(!0,"valign"),n=this.getProperty(!0,"parentvalign"),a=0;switch(n){case"bottom":a=e.top+this.parent.height();break;case"middle":a=e.top+this.parent.height()/2;break;default:a=e.top}switch(i){case"bottom":this.layer.css({top:"auto",bottom:this.layer.parent().height()-a-t+"px"});break;case"middle":this.layer.css({top:a+t-this.layer.height()/2+"px",bottom:"auto"});break;default:this.layer.css({top:a+t+"px",bottom:"auto"})}}else switch(this.getProperty(!0,"valign")){case"bottom":this.layer.css({top:"auto",bottom:-t+"px"});break;case"middle":this.layer.css({top:this.layer.parent().height()/2+t-this.layer.height()/2+"px",bottom:"auto"});break;default:this.layer.css({top:t+"px",bottom:"auto"})}this.triggerLayerResized()},a.prototype._syncresponsiveposition=function(t){this._resize(!1)},a.prototype._syncwidth=function(t){this.layer.css("width",t+(this.isDimensionPropertyAccepted(t)?"":"px"))},a.prototype._syncheight=function(t){this.layer.css("height",t+(this.isDimensionPropertyAccepted(t)?"":"px"))},a.prototype._syncresponsivesize=function(t){this._resize(!1)},a.prototype._syncdesktopPortrait=function(t){this.__syncShowOnDevice("desktopPortrait",t)},a.prototype._syncdesktopLandscape=function(t){this.__syncShowOnDevice("desktopLandscape",t)},a.prototype._synctabletPortrait=function(t){this.__syncShowOnDevice("tabletPortrait",t)},a.prototype._synctabletLandscape=function(t){this.__syncShowOnDevice("tabletLandscape",t)},a.prototype._syncmobilePortrait=function(t){this.__syncShowOnDevice("mobilePortrait",t)},a.prototype._syncmobileLandscape=function(t){this.__syncShowOnDevice("mobileLandscape",t)},a.prototype.__syncShowOnDevice=function(t,e){if(this.getMode()==t){var e=parseInt(e);e?this._show():this._hide(),this.layer.triggerHandler("LayerShowChange",[t,e]),this.triggerLayerResized()}},a.prototype._syncmouseenter=a.prototype._syncclick=a.prototype._syncmouseleave=a.prototype._syncplay=a.prototype._syncpause=a.prototype._syncstop=function(){},a.prototype.___makeLayerAlign=function(){this.alignMarker=e('<div class="n2-ss-layer-align-marker" />').appendTo(this.layer)},a.prototype.___makeLayerResizeable=function(){this.layer.nextendResizable({handles:"n, e, s, w, ne, se, sw, nw",_containment:this.layerEditor.layerContainerElement,start:e.proxy(this.____makeLayerResizeableStart,this),resize:e.proxy(this.____makeLayerResizeableResize,this),stop:e.proxy(this.____makeLayerResizeableStop,this),smartguides:e.proxy(function(){return this.layer.triggerHandler("LayerParent"),this.layerEditor.getSnap()},this),tolerance:5}).on({mousedown:e.proxy(function(t){this.lock||this.layerEditor.positionDisplay.css({left:t.pageX+10,top:t.pageY+10}).html("W: "+parseInt(this.layer.width())+"px<br />H: "+parseInt(this.layer.height())+"px").addClass("n2-active"),document.activeElement&&document.activeElement.blur()},this),mouseup:e.proxy(function(t){this.layerEditor.positionDisplay.removeClass("n2-active")},this)})},a.prototype.____makeLayerResizeableStart=function(t,i){e("#n2-admin").addClass("n2-ss-resize-layer"),this.____makeLayerResizeableResize(t,i),this.layerEditor.positionDisplay.addClass("n2-active")},a.prototype.____makeLayerResizeableResize=function(t,e){this.layerEditor.positionDisplay.css({left:t.pageX+10,top:t.pageY+10}).html("W: "+e.size.width+"px<br />H: "+e.size.height+"px"),this.triggerLayerResized()},a.prototype.____makeLayerResizeableStop=function(t,i){window.nextendPreventClick=!0,setTimeout(function(){window.nextendPreventClick=!1},50),e("#n2-admin").removeClass("n2-ss-resize-layer");var n=!1;if(i.originalSize.width==i.size.width){var a=this.getProperty(!0,"width");this.isDimensionPropertyAccepted(a)&&(n=!0,this._syncwidth(a))}var o=!1;if(i.originalSize.height==i.size.height){var a=this.getProperty(!0,"height");this.isDimensionPropertyAccepted(a)&&(o=!0,this._syncheight(a))}this.setPosition(i.position.left,i.position.top);var r=this.layerEditor.getResponsiveRatio("h"),s=this.layerEditor.getResponsiveRatio("v");if(parseInt(this.getProperty(!1,"responsivesize"))||(r=s=1),!n){var l=Math.round(i.size.width*(1/r));this.storeWithModifier("width",l,r,!1),this.$.trigger("propertyChanged",["width",l])}if(!o){var l=Math.round(i.size.height*(1/s));this.storeWithModifier("height",l,s,!1),this.$.trigger("propertyChanged",["height",l])}this.triggerLayerResized(),this.layer.triggerHandler("LayerUnParent"),this.layerEditor.positionDisplay.removeClass("n2-active")},a.prototype.___makeLayerDraggable=function(){this.layer.nextenddraggable({_containment:this.layerEditor.layerContainerElement,start:e.proxy(this.____makeLayerDraggableStart,this),drag:e.proxy(this.____makeLayerDraggableDrag,this),stop:e.proxy(this.____makeLayerDraggableStop,this),smartguides:e.proxy(function(){return this.layer.triggerHandler("LayerParent"),this.layerEditor.getSnap()},this),tolerance:5})},a.prototype.____makeLayerDraggableStart=function(t,i){e("#n2-admin").addClass("n2-ss-move-layer"),this.____makeLayerDraggableDrag(t,i),this.layerEditor.positionDisplay.addClass("n2-active");var n=this.getProperty(!0,"width");this.isDimensionPropertyAccepted(n)&&this.layer.width(this.layer.width()+.5);var n=this.getProperty(!0,"height");this.isDimensionPropertyAccepted(n)&&this._syncheight(n)},a.prototype.____makeLayerDraggableDrag=function(t,e){this.layerEditor.positionDisplay.css({left:t.pageX+10,top:t.pageY+10}).html("L: "+parseInt(0|e.position.left)+"px<br />T: "+parseInt(0|e.position.top)+"px"),this.triggerLayerResized()},a.prototype.____makeLayerDraggableStop=function(t,i){window.nextendPreventClick=!0,setTimeout(function(){window.nextendPreventClick=!1},50),e("#n2-admin").removeClass("n2-ss-move-layer"),this.setPosition(i.position.left,i.position.top);var n=this.getProperty(!0,"width");this.isDimensionPropertyAccepted(n)&&this._syncwidth(n);var n=this.getProperty(!0,"height");this.isDimensionPropertyAccepted(n)&&this._syncheight(n),this.triggerLayerResized(),this.layer.triggerHandler("LayerUnParent"),this.layerEditor.positionDisplay.removeClass("n2-active")},a.prototype.moveX=function(t){this.setDeviceBasedAlign(),this.setProperty("left",this.getProperty(!0,"left")+t,"layer"),this.triggerLayerResized()},a.prototype.moveY=function(t){this.setDeviceBasedAlign(),this.setProperty("top",this.getProperty(!0,"top")+t,"layer"),this.triggerLayerResized()},a.prototype.setPosition=function(t,e){var i=this.layerEditor.getResponsiveRatio("h"),n=this.layerEditor.getResponsiveRatio("v");parseInt(this.getProperty(!1,"responsiveposition"))||(i=n=1),this.setDeviceBasedAlign();var a=this.parent,o={left:0,leftMultiplier:1,top:0,topMultiplier:1};if(a&&a.is(":visible")){var r=a.position();switch(this.getProperty(!0,"parentalign")){case"right":o.left=r.left+a.width();break;case"center":o.left=r.left+a.width()/2;break;default:o.left=r.left}switch(this.getProperty(!0,"parentvalign")){case"bottom":o.top=r.top+a.height();break;case"middle":o.top=r.top+a.height()/2;break;default:o.top=r.top}}else{switch(a=this.layer.parent(),this.getProperty(!0,"align")){case"center":o.left+=a.width()/2;break;case"right":o.left+=a.width()}switch(this.getProperty(!0,"valign")){case"middle":o.top+=a.height()/2;break;case"bottom":o.top+=a.height()}}var t,s=!1;switch(this.getProperty(!0,"align")){case"left":t=-Math.round((o.left-t)*(1/i));break;case"center":t=-Math.round((o.left-t-this.layer.width()/2)*(1/i));break;case"right":t=-Math.round((o.left-t-this.layer.width())*(1/i)),s=!0}this.storeWithModifier("left",t,i,s),
this.$.trigger("propertyChanged",["left",t]);var e,s=!1;switch(this.getProperty(!0,"valign")){case"top":e=-Math.round((o.top-e)*(1/n));break;case"middle":e=-Math.round((o.top-e-this.layer.height()/2)*(1/n));break;case"bottom":e=-Math.round((o.top-e-this.layer.height())*(1/n)),s=!0}this.storeWithModifier("top",e,n,s),this.$.trigger("propertyChanged",["top",e])},a.prototype.setDeviceBasedAlign=function(){var t=this.getMode();"undefined"==typeof this.deviceProperty[t].align&&this.setProperty("align",this.getProperty(!0,"align"),"layer"),"undefined"==typeof this.deviceProperty[t].valign&&this.setProperty("valign",this.getProperty(!0,"valign"),"layer")},a.prototype.snap=function(){this.layer.nextendResizable("option","smartguides",e.proxy(function(){return this.layer.triggerHandler("LayerParent"),this.layerEditor.getSnap()},this)),this.layer.nextenddraggable("option","smartguides",e.proxy(function(){return this.layer.triggerHandler("LayerParent"),this.layerEditor.getSnap()},this))},a.prototype.changeEditorMode=function(t){var e=parseInt(this.property[t]);e?this._show():this._hide(),this.layer.triggerHandler("LayerShowChange",[t,e]),this._renderModeProperties(!1)},a.prototype.resetMode=function(t,e){if("desktopPortrait"!=t){var i;for(var n in this.property)this.deviceProperty[t][n]=i;t==e&&this._renderModeProperties(!0)}},a.prototype._renderModeProperties=function(t){for(var e in this.property)this.property[e]=this.getProperty(!0,e),this.$.trigger("propertyChanged",[e,this.property[e]]);var i=this.getProperty(!0,"fontsize");this.adjustFontSize(this.getProperty(!1,"adaptivefont"),i,!1),this.layer.attr("data-align",this.property.align),this.layer.attr("data-valign",this.property.valign),t&&this._resize(!0)},a.prototype.copyMode=function(t,i){t!=i&&(this.deviceProperty[i]=e.extend({},this.deviceProperty[i],this.deviceProperty[t]))},a.prototype.getMode=function(){return this.layerEditor.getMode()},a.prototype._resize=function(t){this.resize({slideW:this.layerEditor.getResponsiveRatio("h"),slideH:this.layerEditor.getResponsiveRatio("v")},t)},a.prototype.doLinearResize=function(t){this.doThrottledTheResize(t,!0)},a.prototype.resize=function(t,e){this.parent&&!e||this.addToResizeCollection(this,t,!1)},a.prototype.doTheResize=function(t,e,i){var n=t.slideW,a=n,o=t.slideH,r=o;parseInt(this.getProperty(!1,"responsivesize"))||(a=r=1),this.renderWithModifier("width",this.getProperty(!0,"width"),a),this.renderWithModifier("height",this.getProperty(!0,"height"),r),parseInt(this.getProperty(!1,"responsiveposition"))||(n=o=1),this.renderWithModifier("left",this.getProperty(!0,"left"),n),this.renderWithModifier("top",this.getProperty(!0,"top"),o),e||this.triggerLayerResized(i,t)},a.prototype.resizeParent=function(t,e,i){this.addToResizeCollection(this,e,i)},a.prototype.addToResizeCollection=function(t,e,i){d.ratios=e,d.isThrottled=i;for(var n=0;n<d.layers.length;n++)if(d.layers[n]==this){d.layers.splice(n,1);break}d.layers.push(t),p(),this.triggerLayerResized(i,e)},a.prototype.update=function(){var t=this.parent;if("center"==this.getProperty(!0,"align")){var e=0;e=t?t.position().left+t.width()/2:this.layer.parent().width()/2;var i=this.layerEditor.getResponsiveRatio("h");parseInt(this.getProperty(!1,"responsiveposition"))||(i=1),this.layer.css("left",e-this.layer.width()/2+this.getProperty(!0,"left")*i)}if("middle"==this.getProperty(!0,"valign")){var n=0;n=t?t.position().top+t.height()/2:this.layer.parent().height()/2;var i=this.layerEditor.getResponsiveRatio("v");parseInt(this.getProperty(!1,"responsiveposition"))||(i=1),this.layer.css("top",n-this.layer.height()/2+this.getProperty(!0,"top")*i)}this.triggerLayerResized()},a.prototype.triggerLayerResized=function(t,e){t?this._triggerLayerResized(t,e):this._triggerLayerResizedThrottled(!0,e)},a.prototype._triggerLayerResized=function(t,e){this.isDeleted||this.layer.triggerHandler("LayerResized",[e||{slideW:this.layerEditor.getResponsiveRatio("h"),slideH:this.layerEditor.getResponsiveRatio("v")},t||!1])},a.prototype.getStyleText=function(){var t="",e=this.property.crop;return"auto"==e&&(e="hidden"),t+="overflow:"+e+";",t+="text-align:"+this.property.inneralign+";"},a.prototype.isDimensionPropertyAccepted=function(t){return!(!(t+"").match(/[0-9]+%/)&&"auto"!=t)},a.prototype.history=function(i,n,a,o){switch(i){case"store":var r=this.getMode();a[1]&&a[3]!=r?this.deviceProperty[a[3]][a[2]]=n:this[i](a[1],a[2],n,!0),this._renderModeProperties(!0);break;case"storeWithModifier":var r=this.getMode(),s=1;switch(a[1]){case"width":case"left":s=this.layerEditor.getResponsiveRatio("h");break;case"height":case"top":s=this.layerEditor.getResponsiveRatio("v")}a[2]==r?this[i](a[1],n,s,!0):this.deviceProperty[a[2]][a[1]]=n,this._renderModeProperties(!0);break;case"addLayer":switch(n){case"add":this.layerEditor._zIndexOffset=-1,this.layerEditor._idTranslation={};var l=this.layerEditor.loadSingleData(e.extend(!0,{},a[0]));t.history.changeFuture(this,l),t.history.changeFuture(this.items[0],l.items[0]),this.layerEditor.reIndexLayers(),this.layerEditor.refreshMode();break;case"delete":this["delete"]()}break;case"duplicateLayer":switch(n){case"duplicate":var d=[];this.duplicate(!0,!1,d);for(var p=0;p<d.length;p++)t.history.changeFuture(o.oldLayers[p],d[p]),t.history.changeFuture(o.oldLayers[p].items[0],d[p].items[0]);o.oldLayers=[];break;case"delete":var h=[];a[0]["delete"](!0,h),o.oldLayers=h}break;case"deleteLayer":switch(n){case"create":this.layerEditor._zIndexOffset=-1,this.layerEditor._idTranslation={};var l=this.layerEditor.loadSingleData(e.extend(!0,{},a[0]));t.history.changeFuture(this,l),t.history.changeFuture(this.items[0],l.items[0]),this.layerEditor.reIndexLayers(),this.layerEditor.refreshMode();break;case"delete":this["delete"]()}break;case"storeAnimations":this.animation.storeAnimations(a[0],null,null,e.extend(!0,{},n))}},i.NextendSmartSliderLayer=a}(nextend.smartSlider,n2,window),function(t,e,i,n){function a(i,n,a,o,s){this.activeLayerIndex=-1,this.snapToEnabled=!0,this.staticSlide=n,this.layerDefault={align:null,valign:null},this.solo=!1,this.$=e(this),t.layerManager=this,this.responsive=t.frontend.responsive,new NextendSmartSliderSidebar,this.layerList=[],this.layersItemsElement=e("#n2-ss-layers-items-list"),this.frontendSlideLayers=i,this.frontendSlideLayers.setZero(),this.layerContainerElement=t.$currentSlideElement.find(".n2-ss-layers-container"),this.layerContainerElement.length||(this.layerContainerElement=t.$currentSlideElement),this.layerContainerElement.parent().prepend('<div class="n2-ss-slide-border n2-ss-slide-border-left" /><div class="n2-ss-slide-border n2-ss-slide-border-top" /><div class="n2-ss-slide-border n2-ss-slide-border-right" /><div class="n2-ss-slide-border n2-ss-slide-border-bottom" />'),this.slideSize={width:this.layerContainerElement.width(),height:this.layerContainerElement.height()},t.frontend.sliderElement.on("SliderResize",e.proxy(this.refreshSlideSize,this)),this.initToolbox(),new NextendSmartSliderLayerAnimationManager(this),this.refreshLayers(),t.itemEditor=this.itemEditor=new NextendSmartSliderItemManager(this),this.positionDisplay=e('<div class="n2 n2-ss-position-display"/>').appendTo("body"),this.zIndexList=[],this.layers.each(e.proxy(function(t,i){new NextendSmartSliderLayer(this,e(i),this.itemEditor)},this)),this.reIndexLayers(),this._makeLayersOrderable(),e("#smartslider-slide-toolbox-layer").on("mouseenter",function(){e("#n2-admin").addClass("smartslider-layer-highlight-active")}).on("mouseleave",function(){e("#n2-admin").removeClass("smartslider-layer-highlight-active")}),this._initDeviceModeChange(),this.initSnapTo(),this.initEditorTheme(),this.initAlign(),this.initParentLinker(),this.initEvents();var p=e("#n2-ss-adaptive-font").on("click",e.proxy(function(){this.toolboxForm.adaptivefont.data("field").onoff.trigger("click")},this));this.toolboxForm.adaptivefont.on("nextendChange",e.proxy(function(){1==this.toolboxForm.adaptivefont.val()?p.addClass("n2-active"):p.removeClass("n2-active")},this)),new NextendElementNumber("n2-ss-font-size",-Number.MAX_VALUE,Number.MAX_VALUE),new NextendElementAutocompleteSimple("n2-ss-font-size",["60","80","100","120","140","160","180"]);var h=e("#n2-ss-font-size").on("outsideChange",e.proxy(function(){var t=parseInt(h.val());this.toolboxForm.fontsize.val(t).trigger("change")},this));this.toolboxForm.fontsize.on("nextendChange",e.proxy(function(){h.data("field").insideChange(this.toolboxForm.fontsize.val())},this)),this.zIndexList.length>0&&this.zIndexList[this.zIndexList.length-1].activate(),e(window).on({keydown:e.proxy(function(i){if(!("TEXTAREA"==i.target.tagName||"INPUT"==i.target.tagName||t.timelineControl&&t.timelineControl.isActivated())&&-1!=this.activeLayerIndex){var n=i.keyCode;if(n>=49&&57>=n){var a=i.originalEvent.location||i.originalEvent.keyLocation||0;3==a&&(n+=48)}if(46==n)this["delete"]();else if(35==n)this.duplicate(),i.preventDefault();else if(16==n)r[n]=1;else if(38==n){if(!r[n]){var o=e.proxy(function(){this.layerList[this.activeLayerIndex].moveY(-1*(r[16]?10:1))},this);o(),r[n]=setInterval(o,100)}i.preventDefault()}else if(40==n){if(!r[n]){var o=e.proxy(function(){this.layerList[this.activeLayerIndex].moveY(r[16]?10:1)},this);o(),r[n]=setInterval(o,100)}i.preventDefault()}else if(37==n){if(!r[n]){var o=e.proxy(function(){this.layerList[this.activeLayerIndex].moveX(-1*(r[16]?10:1))},this);o(),r[n]=setInterval(o,100)}i.preventDefault()}else if(39==n){if(!r[n]){var o=e.proxy(function(){this.layerList[this.activeLayerIndex].moveX(r[16]?10:1)},this);o(),r[n]=setInterval(o,100)}i.preventDefault()}else if(n>=97&&105>=n){var s=l[n],p=d[n],h=!1;this.toolboxForm.align.val()==s&&this.toolboxForm.valign.val()==p&&(h=!0),this.horizontalAlign(s,h),this.verticalAlign(p,h)}else if(34==n){i.preventDefault();var c=this.layerList[this.activeLayerIndex].zIndex-1;0>c&&(c=this.zIndexList.length-1),this.zIndexList[c].activate()}else if(33==n){i.preventDefault();var c=this.layerList[this.activeLayerIndex].zIndex+1;c>this.zIndexList.length-1&&(c=0),this.zIndexList[c].activate()}else(i.ctrlKey||i.metaKey)&&(90==n?i.shiftKey?t.history.redo():t.history.undo():67==n?this.copy():86==n&&this.paste(0))}},this),keyup:e.proxy(function(t){"undefined"!=typeof r[t.keyCode]&&r[t.keyCode]&&(clearInterval(r[t.keyCode]),r[t.keyCode]=0)},this)}),this.addContextMenu(),a||t.frontend.sliderElement.fileupload({url:o,pasteZone:!1,dropZone:t.frontend.sliderElement,dataType:"json",paramName:"image",add:e.proxy(function(t,e){e.formData={path:"/"+s},e.submit()},this),done:e.proxy(function(t,e){var i=e.result;if(i.data&&i.data.name){var n=this.itemEditor.createLayerItem("image");n.reRender({image:i.data.url}),n.activate(null,!0)}else NextendAjaxHelper.notification(i)},this),fail:e.proxy(function(t,e){NextendAjaxHelper.notification(e.jqXHR.responseJSON)},this),start:function(){NextendAjaxHelper.startLoading()},stop:function(){setTimeout(function(){NextendAjaxHelper.stopLoading()},100)}}),this.initHideSidebar()}var o=".n2-ss-layer",r={16:0,38:0,40:0,37:0,39:0},s={left:0,center:1,right:2,top:0,middle:1,bottom:2},l={97:"left",98:"center",99:"right",100:"left",101:"center",102:"right",103:"left",104:"center",105:"right"},d={97:"bottom",98:"bottom",99:"bottom",100:"middle",101:"middle",102:"middle",103:"top",104:"top",105:"top"};a.prototype.initHideSidebar=function(){var t=e("#n2-admin");e(".n2-hide-sidebar").on("click",function(){t.hasClass("n2-sidebar-hidden")?t.removeClass("n2-sidebar-hidden"):t.addClass("n2-sidebar-hidden"),e(window).trigger("resize")})},a.prototype.getMode=function(){return this.mode},a.prototype._getMode=function(){return this.responsive.getNormalizedModeString()},a.prototype.getResponsiveRatio=function(t){return"h"==t?this.responsive.lastRatios.slideW:"v"==t?this.responsive.lastRatios.slideH:0},a.prototype.createLayer=function(t){for(var e in this.layerDefault)null!==this.layerDefault[e]&&(t[e]=this.layerDefault[e]);var i=new NextendSmartSliderLayer(this,!1,this.itemEditor,t);return this.reIndexLayers(),this._makeLayersOrderable(),i},a.prototype.addLayer=function(i,n){var a=this._addLayer(i,n);return t.history.add(e.proxy(function(){return[a,"addLayer","add","delete",[a.getData(!0)]]},this)),a},a.prototype._addLayer=function(t,i){var n=e(t);this.layerContainerElement.append(n);var a=new NextendSmartSliderLayer(this,n,this.itemEditor);return i&&(this.reIndexLayers(),this.refreshMode()),a},a.prototype.setSolo=function(e){if(this.solo){if(this.solo.unmarkSolo(),this.solo===e)return this.solo=!1,void t.$currentSlideElement.removeClass("n2-ss-layer-solo-mode");this.solo=!1}this.solo=e,e.markSolo(),t.$currentSlideElement.addClass("n2-ss-layer-solo-mode")},a.prototype.switchToLayerTab=function(){t.slide._changeView(1)},a.prototype._initDeviceModeChange=function(){var i=e("#layerresettodesktop").on("click",e.proxy(this.__onResetToDesktopClick,this));this.resetToDesktopTRElement=i.closest("tr"),this.resetToDesktopGlobalElement=e("#n2-ss-reset-to-desktop").on("click",e.proxy(function(){"table-row"==this.resetToDesktopTRElement.css("display")&&i.trigger("click")},this));var n=e("#n2-ss-show-on-device").on("click",e.proxy(function(){this.toolboxForm["showField"+this.mode.charAt(0).toUpperCase()+this.mode.substr(1)].data("field").onoff.trigger("click")},this));this.globalShowOnDeviceCB=function(t){this.mode==t&&(1==this.toolboxForm["showField"+this.mode.charAt(0).toUpperCase()+this.mode.substr(1)].val()?n.addClass("n2-active"):n.removeClass("n2-active"))},this.toolboxForm.showFieldDesktopPortrait.on("nextendChange",e.proxy(this.globalShowOnDeviceCB,this,"desktopPortrait")),this.toolboxForm.showFieldDesktopLandscape.on("nextendChange",e.proxy(this.globalShowOnDeviceCB,this,"desktopLandscape")),this.toolboxForm.showFieldTabletPortrait.on("nextendChange",e.proxy(this.globalShowOnDeviceCB,this,"tabletPortrait")),this.toolboxForm.showFieldTabletLandscape.on("nextendChange",e.proxy(this.globalShowOnDeviceCB,this,"tabletLandscape")),this.toolboxForm.showFieldMobilePortrait.on("nextendChange",e.proxy(this.globalShowOnDeviceCB,this,"mobilePortrait")),this.toolboxForm.showFieldMobileLandscape.on("nextendChange",e.proxy(this.globalShowOnDeviceCB,this,"mobileLandscape")),this.__onChangeDeviceOrientation(),t.frontend.sliderElement.on("SliderDeviceOrientation",e.proxy(this.__onChangeDeviceOrientation,this)),t.frontend.sliderElement.on("SliderResize",e.proxy(this.__onResize,this))},a.prototype.refreshMode=function(){this.__onChangeDeviceOrientation(),t.frontend.responsive.reTriggerSliderDeviceOrientation()},a.prototype.__onChangeDeviceOrientation=function(){this.mode=this._getMode(),this.globalShowOnDeviceCB(this.mode),this.resetToDesktopTRElement.css("display","desktopPortrait"==this.mode?"none":"table-row"),this.resetToDesktopGlobalElement.css("display","desktopPortrait"==this.mode?"none":"");for(var t=0;t<this.layerList.length;t++)this.layerList[t].changeEditorMode(this.mode)},a.prototype.__onResize=function(t,e){for(var i=this.getSortedLayers(),n=0;n<i.length;n++)i[n].doLinearResize(e)},a.prototype.__onResetToDesktopClick=function(){if(-1!=this.activeLayerIndex){var t=this.getMode();this.layerList[this.activeLayerIndex].resetMode(t,t)}},a.prototype.copyOrResetMode=function(t){var e=this.getMode();if("desktopPortrait"!=t&&t==e)for(var i=0;i<this.layerList.length;i++)this.layerList[i].resetMode(t,e);else if("desktopPortrait"!=t&&"desktopPortrait"==e)for(var i=0;i<this.layerList.length;i++)this.layerList[i].resetMode(t,e);else if(t!=e)for(var i=0;i<this.layerList.length;i++)this.layerList[i].copyMode(e,t)},a.prototype.refreshSlideSize=function(){this.slideSize.width=t.frontend.dimensions.slide.width,this.slideSize.height=t.frontend.dimensions.slide.height},a.prototype._makeLayersOrderable=function(){this.layersOrderableElement=this.layersItemsElement.find(" > ul"),this.layersOrderableElement.sortable({axis:"y",helper:"clone",placeholder:"sortable-placeholder",forcePlaceholderSize:!0,tolerance:"pointer",items:".n2-ss-layer-row",start:function(t,i){e(i.item).data("startindex",i.item.index())},stop:e.proxy(function(i,n){var a=this.zIndexList.length-e(n.item).data("startindex")-1,o=this.zIndexList.length-e(n.item).index()-1;a!=o&&(this.zIndexList.splice(o,0,this.zIndexList.splice(a,1)[0]),this.reIndexLayers(),t.history.add(e.proxy(function(){return[this,"changeZIndex",[a,o],[o,a],[]]},this)))},this)})},a.prototype.reIndexLayers=function(){this.zIndexList=this.zIndexList.filter(function(t){return t!=n});for(var t=this.zIndexList.length-1;t>=0;t--)this.zIndexList[t].setZIndex(t)},a.prototype.initEvents=function(){var t=e("#n2-tab-events"),i=t.find("> table").css("display","none"),n=t.find(".n2-h3"),a=n.html(),o=e('<div class="n2-sidebar-row n2-sidebar-header-bg n2-form-dark n2-sets-header"><div class="n2-table"><div class="n2-tr"><div class="n2-td"><div class="n2-h3 n2-uc">'+a+'</div></div><div style="text-align: '+(nextend.isRTL()?"left":"right")+';" class="n2-td"></div></div></div></div>'),r=e('<a href="#" class="n2-button n2-button-medium n2-button-green n2-h5 n2-uc">'+n2_("Show")+"</a>").on("click",function(t){t.preventDefault(),r.hasClass("n2-button-green")?(i.css("display",""),r.html(n2_("Hide")),r.addClass("n2-button-grey"),r.removeClass("n2-button-green"),e.jStorage.set("n2-ss-events",1)):(i.css("display","none"),r.html(n2_("Show")),r.addClass("n2-button-green"),r.removeClass("n2-button-grey"),e.jStorage.set("n2-ss-events",0))});e.jStorage.get("n2-ss-events",0)&&(i.css("display",""),r.html(n2_("Hide")),r.addClass("n2-button-grey"),r.removeClass("n2-button-green")),n.replaceWith(o),r.appendTo(o.find(".n2-td").eq(1))},a.prototype.initSnapTo=function(){var t=new NextendElementOnoff("n2-ss-snap");e.jStorage.get("n2-ss-snap-to-enabled",1)||(t.insideChange(0),this.snapToDisable()),t.element.on("outsideChange",e.proxy(this.switchSnapTo,this))},a.prototype.switchSnapTo=function(t){t.preventDefault(),this.snapToEnabled?this.snapToDisable():this.snapToEnable()},a.prototype.snapToDisable=function(){this.snapToEnabled=!1,this.snapToChanged(0)},a.prototype.snapToEnable=function(){this.snapToEnabled=!0,this.snapToChanged(1)},a.prototype.snapToChanged=function(){for(var t=0;t<this.layerList.length;t++)this.layerList[t].snap();e.jStorage.set("n2-ss-snap-to-enabled",this.snapToEnabled)},a.prototype.getSnap=function(){return this.snapToEnabled?e(this.staticSlide?".n2-ss-static-slide .n2-ss-layer:not(.n2-ss-layer-locked):not(.n2-ss-layer-parent):visible":".n2-ss-slide.n2-ss-slide-active .n2-ss-layer:not(.n2-ss-layer-locked):not(.n2-ss-layer-parent):visible"):!1},a.prototype.initEditorTheme=function(){this.themeElement=e("#n2-tab-smartslider-editor"),this.themeButton=e("#n2-ss-theme").on("click",e.proxy(this.switchEditorTheme,this)),e.jStorage.get("n2-ss-theme-dark",0)&&(this.themeButton.addClass("n2-active"),this.themeElement.addClass("n2-ss-theme-dark"))},a.prototype.switchEditorTheme=function(){e.jStorage.set("n2-ss-theme-dark",!this.themeButton.hasClass("n2-active")),this.themeButton.toggleClass("n2-active"),this.themeElement.toggleClass("n2-ss-theme-dark")},a.prototype.initAlign=function(){var t=e("#n2-ss-horizontal-align .n2-radio-option"),i=e("#n2-ss-vertical-align .n2-radio-option");t.add(i).on("click",e.proxy(function(n){if(n.ctrlKey||n.metaKey){var a=e(n.currentTarget),o=a.hasClass("n2-sub-active"),r=a.data("align");switch(r){case"left":case"center":case"right":t.removeClass("n2-sub-active"),o?(e.jStorage.set("ss-item-horizontal-align",null),this.layerDefault.align=null):(e.jStorage.set("ss-item-horizontal-align",r),this.layerDefault.align=r,a.addClass("n2-sub-active"));break;case"top":case"middle":case"bottom":i.removeClass("n2-sub-active"),o?(e.jStorage.set("ss-item-vertical-align",null),this.layerDefault.valign=null):(e.jStorage.set("ss-item-vertical-align",r),this.layerDefault.valign=r,a.addClass("n2-sub-active"))}}else if(-1!=this.activeLayerIndex){var r=e(n.currentTarget).data("align");switch(r){case"left":case"center":case"right":this.horizontalAlign(r,!0);break;case"top":case"middle":case"bottom":this.verticalAlign(r,!0)}}},this)),this.toolboxForm.align.on("nextendChange",e.proxy(function(){switch(t.removeClass("n2-active"),this.toolboxForm.align.val()){case"left":t.eq(0).addClass("n2-active");break;case"center":t.eq(1).addClass("n2-active");break;case"right":t.eq(2).addClass("n2-active")}},this)),this.toolboxForm.valign.on("nextendChange",e.proxy(function(){switch(i.removeClass("n2-active"),this.toolboxForm.valign.val()){case"top":i.eq(0).addClass("n2-active");break;case"middle":i.eq(1).addClass("n2-active");break;case"bottom":i.eq(2).addClass("n2-active")}},this));var n=e.jStorage.get("ss-item-horizontal-align",null),a=e.jStorage.get("ss-item-vertical-align",null);null!=n&&(t.eq(s[n]).addClass("n2-sub-active"),this.layerDefault.align=n),null!=a&&(i.eq(s[a]).addClass("n2-sub-active"),this.layerDefault.valign=a)},a.prototype.horizontalAlign=function(t,e){this.toolboxForm.align.val()!=t?this.toolboxForm.align.data("field").options.eq(s[t]).trigger("click"):e&&this.toolboxForm.left.val(0).trigger("change")},a.prototype.verticalAlign=function(t,e){this.toolboxForm.valign.val()!=t?this.toolboxForm.valign.data("field").options.eq(s[t]).trigger("click"):e&&this.toolboxForm.top.val(0).trigger("change")},a.prototype.initParentLinker=function(){var t=this.toolboxForm.parentid.data("field"),i=e("#n2-ss-parent-linker").on({click:function(e){t.click(e)},mouseenter:function(e){t.picker.trigger(e)},mouseleave:function(e){t.picker.trigger(e)}});this.toolboxForm.parentid.on("nextendChange",e.proxy(function(){""!=this.toolboxForm.parentid.val()?i.addClass("n2-active"):i.removeClass("n2-active")},this))},a.prototype.deleteLayers=function(){for(var t=this.zIndexList.length-1;t>=0;t--)this.zIndexList[t]["delete"]()},a.prototype.layerDeleted=function(t){this.reIndexLayers(),this.layerList.splice(t,1),this.afterLayerDeleted(t)},a.prototype.afterLayerDeleted=NextendThrottle(function(t){var e=this.getSelectedLayer();t===this.activeLayerIndex?(this.activeLayerIndex=-1,this.zIndexList.length>0?this.zIndexList[this.zIndexList.length-1].activate():this.changeActiveLayer(-1)):e&&(this.activeLayerIndex=e.getIndex())},50),a.prototype.getSortedLayers=function(){for(var t=this.layerList.slice(),e={},i=t.length-1;i>=0;i--)"undefined"!=typeof t[i].property.parentid&&t[i].property.parentid&&("undefined"==typeof e[t[i].property.parentid]&&(e[t[i].property.parentid]=[]),e[t[i].property.parentid].push(t[i]),t.splice(i,1));for(var i=0;i<t.length;i++)"undefined"!=typeof t[i].property.id&&t[i].property.id&&"undefined"!=typeof e[t[i].property.id]&&(e[t[i].property.id].unshift(0),e[t[i].property.id].unshift(i+1),t.splice.apply(t,e[t[i].property.id]),delete e[t[i].property.id]);return t},a.prototype.getActiveLayerData=function(){var t=[];return"undefined"!=typeof this.layerList[this.activeLayerIndex]?this.layerList[this.activeLayerIndex].getDataWithChildren(t):t},a.prototype.getHTML=function(){for(var t=e("<div></div>"),i=this.layerList,n=0;n<i.length;n++)t.append(i[n].getHTML(!0,!0));return t.html()},a.prototype.getData=function(){for(var t=[],e=this.layerList,i=0;i<e.length;i++)t.push(e[i].getData(!0));return t},a.prototype.loadData=function(i,n){t.history.add(e.proxy(function(){return[this,"fixActiveLayer","","",[]]},this));var a=e.extend(!0,[],i);n&&this.deleteLayers(),this._zIndexOffset=this.zIndexList.length,this._idTranslation={};for(var o=0;o<a.length;o++)this.loadSingleData(a[o]);this.reIndexLayers(),this.refreshMode(),-1==this.activeLayerIndex&&this.layerList.length>0&&this.layerList[0].activate(),t.history.add(e.proxy(function(){return[this,"fixActiveLayer","","",[]]},this))},a.prototype.loadSingleData=function(t){var i=e('<div class="n2-ss-layer"></div>').attr("style",t.style),n=i.css("zIndex");if("auto"!=n&&""!=n||(n=t.zIndex?t.zIndex:1),i.css("zIndex",n+this._zIndexOffset),t.id){var a=e.fn.uid();this._idTranslation[t.id]=a,i.attr("id",a)}t.parentid&&("undefined"!=typeof this._idTranslation[t.parentid]?t.parentid=this._idTranslation[t.parentid]:t.parentid="");for(var o=0;o<t.items.length;o++)e('<div class="n2-ss-item n2-ss-item-'+t.items[o].type+'"></div>').data("item",t.items[o].type).data("itemvalues",t.items[o].values).appendTo(i);delete t.style,delete t.items,t.animations=Base64.encode(JSON.stringify(t.animations));for(var r in t)i.data(r,t[r]);return this.addLayer(i,!1)},a.prototype.refreshLayers=function(){this.layers=this.layerContainerElement.find(o)},a.prototype.initToolbox=function(){this.toolboxElement=e("#smartslider-slide-toolbox-layer"),this.toolboxForm={id:e("#layerid"),parentid:e("#layerparentid"),parentalign:e("#layerparentalign"),parentvalign:e("#layerparentvalign"),left:e("#layerleft"),top:e("#layertop"),responsiveposition:e("#layerresponsive-position"),width:e("#layerwidth"),height:e("#layerheight"),responsivesize:e("#layerresponsive-size"),"class":e("#layerclass"),showFieldDesktopPortrait:e("#layershow-desktop-portrait"),showFieldDesktopLandscape:e("#layershow-desktop-landscape"),showFieldTabletPortrait:e("#layershow-tablet-portrait"),showFieldTabletLandscape:e("#layershow-tablet-landscape"),showFieldMobilePortrait:e("#layershow-mobile-portrait"),showFieldMobileLandscape:e("#layershow-mobile-landscape"),crop:e("#layercrop"),inneralign:e("#layerinneralign"),parallax:e("#layerparallax"),align:e("#layeralign"),valign:e("#layervalign"),fontsize:e("#layerfont-size"),adaptivefont:e("#layeradaptive-font"),mouseenter:e("#layeronmouseenter"),click:e("#layeronclick"),mouseleave:e("#layeronmouseleave"),play:e("#layeronplay"),pause:e("#layeronpause"),stop:e("#layeronstop")};for(var t in this.toolboxForm)this.toolboxForm[t].on("outsideChange",e.proxy(this.activateLayerPropertyChanged,this,t));this.responsive.isEnabled("desktop","Landscape")||this.toolboxForm.showFieldDesktopLandscape.closest(".n2-mixed-group").css("display","none"),this.responsive.isEnabled("tablet","Portrait")||this.toolboxForm.showFieldTabletPortrait.closest(".n2-mixed-group").css("display","none"),this.responsive.isEnabled("tablet","Landscape")||this.toolboxForm.showFieldTabletLandscape.closest(".n2-mixed-group").css("display","none"),this.responsive.isEnabled("mobile","Portrait")||this.toolboxForm.showFieldMobilePortrait.closest(".n2-mixed-group").css("display","none"),this.responsive.isEnabled("mobile","Landscape")||this.toolboxForm.showFieldMobileLandscape.closest(".n2-mixed-group").css("display","none")},a.prototype.activateLayerPropertyChanged=function(t,e){if(-1!=this.activeLayerIndex){var i=this.toolboxForm[t].val();this.layerList[this.activeLayerIndex].setProperty(t,i,"manager")}else{var n=this.toolboxForm[t].data("field");"undefined"!=typeof n&&null!==n&&n.insideChange("")}},a.prototype.getSelectedLayer=function(){return-1==this.activeLayerIndex?!1:this.layerList[this.activeLayerIndex]},a.prototype.changeActiveLayer=function(t){var i=this.activeLayerIndex;if(-1!=i){var n=this.layerList[i];n&&(n.$.off("propertyChanged.layerEditor"),n.deActivate())}if(this.activeLayerIndex=t,-1!=t){var n=this.layerList[t];n.$.on("propertyChanged.layerEditor",e.proxy(this.activeLayerPropertyChanged,this)),n.animation.activate();var a=n.property;for(var o in a)this.activeLayerPropertyChanged({target:n},o,a[o])}},a.prototype.activeLayerPropertyChanged=function(t,e,i){if("function"==typeof this["_formSet"+e])this["_formSet"+e](i,t.target);else{var n=this.toolboxForm[e].data("field");"undefined"!=typeof n&&n.insideChange(i)}},a.prototype._formSetname=function(t){},a.prototype._formSetnameSynced=function(t){},a.prototype._formSetdesktopPortrait=function(t,e){this.toolboxForm.showFieldDesktopPortrait.data("field").insideChange(t)},a.prototype._formSetdesktopLandscape=function(t,e){this.toolboxForm.showFieldDesktopLandscape.data("field").insideChange(t)},a.prototype._formSettabletPortrait=function(t,e){this.toolboxForm.showFieldTabletPortrait.data("field").insideChange(t)},a.prototype._formSettabletLandscape=function(t,e){this.toolboxForm.showFieldTabletLandscape.data("field").insideChange(t)},a.prototype._formSetmobilePortrait=function(t,e){this.toolboxForm.showFieldMobilePortrait.data("field").insideChange(t)},a.prototype._formSetmobileLandscape=function(t,e){this.toolboxForm.showFieldMobileLandscape.data("field").insideChange(t)},a.prototype["delete"]=function(){"undefined"!=typeof this.layerList[this.activeLayerIndex]&&this.layerList[this.activeLayerIndex]["delete"]()},a.prototype.duplicate=function(){"undefined"!=typeof this.layerList[this.activeLayerIndex]&&this.layerList[this.activeLayerIndex].duplicate(!0,!1)},a.prototype.copy=function(t){"undefined"==typeof t&&(t=this.getCopied());var i=nextend.smartSlider.layerManager.getActiveLayerData();if(i.length){for(t.unshift({name:i[0].name,layers:i});t.length>5;)t.pop();e.jStorage.set("copied",JSON.stringify(t))}},a.prototype.paste=function(t,e){"undefined"==typeof e&&(e=this.getCopied()),e.length&&"undefined"!=typeof e[t]&&nextend.smartSlider.layerManager.loadData(e[t].layers,!1)},a.prototype.getCopied=function(){var t=e.jStorage.get("copied");return null===t?[]:JSON.parse(t)},a.prototype.addContextMenu=function(){var t=this;e.contextMenu({selector:"#n2-ss-0",build:function(i,n){var a={};"undefined"!=typeof t.layerList[t.activeLayerIndex]&&(a["delete"]={name:"Delete layer",icon:"delete"},a.duplicate={name:"Duplicate layer",icon:"duplicate"},a.copy={name:"Copy layer",icon:"copy"});var o=t.getCopied();if(1==o.length)a.paste={name:"Paste layer",icon:"paste",callback:e.proxy(t.paste,this,0,o)};else if(o.length>1){for(var r={},s=0;s<o.length;s++)r["paste"+s]={name:o[s].name,callback:e.proxy(t.paste,this,s,o)};a.paste={name:"Paste layer",icon:"paste",items:r}}return e.isEmptyObject(a)?!1:{animation:{duration:0,show:"show",hide:"hide"},zIndex:1e6,callback:function(e,i){t[e]()},positionSubmenu:function(t){if(e.ui&&e.ui.position)t.css("display","block").position({my:"left+2 top",at:"right top",of:this,collision:"flipfit fit"}).css("display","");else{var i={top:0,left:this.outerWidth()};t.css(i)}},items:a}}})},a.prototype.history=function(t,e,i){switch(t){case"changeZIndex":this.zIndexList.splice(e[1],0,this.zIndexList.splice(e[0],1)[0]),this.reIndexLayers();break;case"fixActiveLayer":var n=this.getSelectedLayer();(0==n||n.isDeleted)&&-1==this.activeLayerIndex&&this.layerList.length>0&&this.zIndexList[this.zIndexList.length-1].activate()}},i.NextendSmartSliderAdminSlideLayerManager=a}(nextend.smartSlider,n2,window),function(t,e,i,n){function a(i,n,a,o){this.loadDefaults(),this.timelineLayerManager=i,this.animation=n,this.direction=a,this.delay=e('<span class="n2-ss-animation-delay n2-h5"></span>'),this.setDelay(n.data.delay),this.duration=e('<span class="n2-ss-animation-duration n2-h5"></span>'),this.setDuration(n.data.duration),this.bar=e('<div class="n2-ss-layer-animation n2-ss-layer-animation-'+n.group+'"></div>').css(nextend.rtl.marginLeft,t.durationToOffsetX(n.data.delay)).css({width:t.durationToOffsetX(n.data.duration)}).data("animation",this).append(this.delay).append(this.duration).draggable({scroll:!0,axis:"x",start:function(t,e){e.originalPosition[nextend.rtl.marginLeft]=parseInt(e.helper.css(nextend.rtl.marginLeft))},drag:e.proxy(function(e,i){if(nextend.rtl.isRtl)var n=Math.max(0,-1*(i.position.left-i.originalPosition[nextend.rtl.marginLeft]));else var n=Math.max(0,i.position.left+i.originalPosition[nextend.rtl.marginLeft]);var a=t.normalizeOffsetX(n);i.position.left=0,i.helper.css(nextend.rtl.marginLeft,a),i.position[nextend.rtl.marginLeft]=a,this.setDelay(t.offsetXToDuration(a))},this),stop:e.proxy(this.onBarDragStop,this)}),this.resizable&&this.bar.resizable({handles:"e, w",start:function(t,e){e.originalPosition[nextend.rtl.marginLeft]=parseInt(e.helper.css(nextend.rtl.marginLeft))},resize:e.proxy(function(e,i){if(nextend.rtl.isRtl){i.size.width=i.originalSize.width-(i.size.width-i.originalSize.width);var n=Math.max(0,-1*(i.position.left-i.originalPosition[nextend.rtl.marginLeft]))}else var n=Math.max(0,i.position.left+i.originalPosition[nextend.rtl.marginLeft]);
var a=t.normalizeOffsetX(n),o=n-a;i.size.width=t.normalizeOffsetX(i.size.width+o),this.setDuration(t.offsetXToDuration(i.size.width)),i.position.left=0,i.helper.css(nextend.rtl.marginLeft,a),i.position[nextend.rtl.marginLeft]=a,this.setDelay(t.offsetXToDuration(a))},this),stop:e.proxy(this.onBarResizeStop,this)}),this.bar.on("click",e.proxy(this.click,this)),n.$.on("animationChanged",e.proxy(this.animationChanged,this)).on("animationMoved",e.proxy(this.animationMoved,this)).on("animationDeleted",e.proxy(this.animationDeleted,this))}function o(t){this.loops=[];var i={group:"loop",data:{duration:0,delay:0},animations:t.layer.animation,$:e(""),setDelay:e.proxy(function(t){this.timelineLayerManager.layer.animation.data.repeatStartDelay=t},this),setDuration:function(){}};a.prototype.constructor.call(this,t,i,"loop","data")}function r(t,i,n){this.timelineLayerManager=t,this.animation=i,this.loopDummy=n,i.$.on("animationChanged",e.proxy(this.loopDummy.refresh,this.loopDummy)).on("animationMoved",e.proxy(this.animationMoved,this)).on("animationDeleted",e.proxy(this.loopDummy.remove,this.loopDummy,this))}a.prototype.loadDefaults=function(){this.resizable=!0},a.prototype.getBar=function(){return this.bar},a.prototype.click=function(){this.animation.edit()},a.prototype.onBarResizeStop=function(e,i){this.animation.animations._startHistory();var n=t.offsetXToDuration(i.position[nextend.rtl.marginLeft]),a=t.offsetXToDuration(i.size.width);this.animation.setDelay(n),this.animation.setDuration(a),this.setDelay(n),this.setDuration(a),this.fixTimelineTotalDuration(),this.animation.animations._endHistory()},a.prototype.onBarDragStop=function(e,i){this.animation.animations._startHistory();var n=t.offsetXToDuration(i.position[nextend.rtl.marginLeft]);this.animation.setDelay(n),this.setDelay(n),this.fixTimelineTotalDuration(),this.animation.animations._endHistory()},a.prototype.animationChanged=function(){this.bar.css(nextend.rtl.marginLeft,t.durationToOffsetX(this.animation.data.delay)).css({width:t.durationToOffsetX(this.animation.data.duration)}),this.setDelay(this.animation.data.delay),this.setDuration(this.animation.data.duration),this.fixTimelineTotalDuration()},a.prototype.setDelay=function(e){.15>e?this.delay.css("display","none"):this.delay.css("display","inline").html(Math.round(e*t.oneSecMs))},a.prototype.setDuration=function(e){this.duration.html(Math.round(e*t.oneSecMs))},a.prototype.animationMoved=function(t,e,i,n,a){this.direction!=n&&console.error("Unable to change the animation group");var o=this.timelineLayerManager[this.direction];this.bar.detach().removeClass("n2-ss-layer-animation-"+e).addClass("n2-ss-layer-animation-"+n),"out"==n&&"in"==this.direction&&(a+=o.find(".n2-ss-layer-animation-in").length),0==a?this.bar.prependTo(o):this.bar.insertAfter(o.children().eq(a-1)),"in"==this.direction&&this.timelineLayerManager.specialZeroInChanged(),this.fixTimelineTotalDuration()},a.prototype.animationDeleted=function(){this.bar.remove(),this.animation.$.off("animationChanged animationMoved animationDeleted"),this.timelineLayerManager.animationDeleted(this.direction)},a.prototype.fixTimelineTotalDuration=function(){this.timelineLayerManager.fixTimelineTotalDuration(this.direction)},i.NextendSmartSliderTimelineAnimation=a,o.prototype=Object.create(a.prototype),o.prototype.constructor=o,o.prototype.loadDefaults=function(){a.prototype.loadDefaults.call(this),this.resizable=!1},o.prototype.click=function(){this.loops[0].animation.edit()},o.prototype.add=function(t){this.loops.push(t),this.bar.appendTo(this.timelineLayerManager[this.direction]),this.refresh()},o.prototype.remove=function(t){var i=e.inArray(t,this.loops);this.loops.splice(i,1),this.refresh(),this.timelineLayerManager.animationDeleted(this.direction)},o.prototype.refresh=function(){if(0==this.loops.length)return void this.bar.detach();var t=0,e=0,i=this.loops.length;if(1==i){var n=this.loops[0].animation.data;e=360!=n.rotationX&&360!=n.rotationY&&360!=n.rotationZ||1!=n.opacity||0!=n.x||0!=n.y||0!=n.z||1!=n.scaleX||1!=n.scaleY||1!=n.scaleZ||0!=n.skewX?2*(n.duration+n.delay):n.duration+n.delay}else{t=this.loops[this.loops.length-1].animation.data.duration;for(var a=0;i>a;a++){var o=this.loops[a].animation.data;e+=o.duration+o.delay}}var r=this.timelineLayerManager.layer.animation.data;0!=r.repeatCount&&(e*=r.repeatCount),this.animation.data.duration=e+t,this.animation.data.delay=r.repeatStartDelay,this.animationChanged()},o.prototype.animationMoved=function(t,e){var i=this.loops[t];this.loops.splice(t,1),this.loops.splice(e,0,i),this.refresh()},o.prototype.setDuration=function(e){var i;i=0==this.timelineLayerManager.layer.animation.data.repeatCount?n2_("LOOP"):Math.round(e*t.oneSecMs),this.duration.html(i)},i.NextendSmartSliderTimelineAnimationLoopDummy=o,r.prototype.animationMoved=function(t,e,i,n,a){this.loopDummy.animationMoved(i,a)},i.NextendSmartSliderTimelineAnimationLoop=r}(nextend.smartSlider,n2,window),function(t,e,i,n){function a(i){i.timelineLayer=this,this.layer=i,this.sidebar=e('<div class="n2-ss-timeline-layer n2-h4"><span>'+i.property.name+"</span></div>").on({mouseenter:e.proxy(function(){this.layer.layerRow.trigger("mouseenter")},this),mouseleave:e.proxy(function(){this.layer.layerRow.trigger("mouseleave")},this),mousedown:e.proxy(function(e){if(e.ctrlKey||e.metaKey){var i=t.layerManager.getSelectedLayer();if(i&&i!=this.layer)return void this.layer.animation.loadData(i.animation.getData())}this.layer.activate(),this.layer.switchToAnimation()},this)}),this.buttonContainer=e('<div class="n2-ss-timeline-layer-buttons"/>').appendTo(this.sidebar),e('<div class="n2-button n2-button-small n2-button-grey"><i class="n2-i n2-it n2-i-delete"></i></div>').on("click",e.proxy(function(t){this.layer.animation.clearAll()},this)).appendTo(this.buttonContainer),this.content=e('<div class="n2-ss-timeline-content-layers"></div>').on({mouseenter:e.proxy(function(){this.layer.layerRow.trigger("mouseenter")},this),mouseleave:e.proxy(function(){this.layer.layerRow.trigger("mouseleave")},this),click:e.proxy(function(t){this.layer.activate(),this.layer.switchToAnimation()},this)}),this.layer.layer.on({"n2-ss-activate":e.proxy(function(){this.sidebar.addClass("n2-active");var t=this.sidebar.parent(),e=t.scrollTop(),i=this.sidebar.get(0).offsetTop;(e>i||i>e+t.height()-this.sidebar.height())&&t.scrollTop(i)},this),"n2-ss-deactivate":e.proxy(function(){this.sidebar.removeClass("n2-active")},this)}),this["in"]=e("<div></div>").appendTo(this.content),this.loop=e("<div></div>").appendTo(this.content),this.out=e("<div></div>").appendTo(this.content),i.$.on("layerRenamed",e.proxy(this.renamed,this)).on("layerDeleted",e.proxy(this.deleted,this)).on("layerIndexed",e.proxy(this.indexed,this)).on("layerAnimationAdded",e.proxy(this.animationAdded,this)).on("layerAnimationSpecialZeroInChanged",e.proxy(this.specialZeroInChanged,this)),this.initExtraAnimation(),i.layer.triggerHandler("timelineLoadedForLayer"),this.indexed(),i.timelineLayerManager=this}a.prototype.initExtraAnimation=function(){var i=this.layer;this.extraAnimationBar=null,i.layer.on("layerExtraAnimationAdded",e.proxy(function(n,a,o,r,s){this.extraAnimationBar?this.extraAnimationBar.css("left",t.durationToOffsetX(a)):this.extraAnimationBar=e('<div class="n2-ss-layer-extra-animation n2-ss-layer-extra-animation-'+o+'"><span class="n2-ss-animation-duration n2-h5">'+o+"</span></div>").css("left",t.durationToOffsetX(a)).appendTo(this.content).draggable({scroll:!0,axis:"x",drag:function(e,i){i.position.left=Math.max(0,t.normalizeOffsetX(i.position.left))},stop:function(e,n){i.activate(),r(t.offsetXToDuration(n.position.left))}}).on("click",function(){i.activate(),s()})},this)).on("layerExtraAnimationRemoved",e.proxy(function(){this.extraAnimationBar&&(this.extraAnimationBar.remove(),this.extraAnimationBar=null)},this))},a.prototype.renamed=function(t,e){this.sidebar.find("> span").html(e)},a.prototype.indexed=function(){t.timelineManager.appendRow(this.sidebar,this.content)},a.prototype.deleted=function(){this.sidebar.remove(),this.content.remove(),this.layer.$.off("layerRenamed layerDeleted layerIndexed layerAnimationAdded layerAnimationSpecialZeroInChanged")},a.prototype.animationAdded=function(t,e,i){var n;"loop"==e?(this.loopDummy||(this.loopDummy=new NextendSmartSliderTimelineAnimationLoopDummy(this,"","loop",this.layer.animation.data)),n=this.loopDummy,this.loopDummy.add(new NextendSmartSliderTimelineAnimationLoop(this,i,this.loopDummy))):n=new NextendSmartSliderTimelineAnimation(this,i,e,this.layer.animation.data),this[e].append(n.getBar()),"in"==e&&this.specialZeroInChanged(),this.fixTimelineTotalDuration(),this.buttonContainer.css("display","block")},a.prototype.animationDeleted=function(t){this.layer.animation.inRows.length||this.layer.animation.loopRows.length||this.layer.animation.outRows.length||this.buttonContainer.css("display","none")},a.prototype.fixTimelineTotalDuration=function(){t.timelineManager.refreshDuration()},a.prototype.getTotalDuration=function(){var e=this.content.find(".n2-ss-layer-animation:visible:last");if(0==e.length)return 0;var i=e.position().left;return i=nextend.rtl.isRtl?this.content.width()-i-e.outerWidth():parseInt(i)+parseInt(e.css(nextend.rtl.marginLeft))-20,t.offsetXToDuration(i+e.outerWidth())},a.prototype.specialZeroInChanged=function(){this.isLayerSpecialZeroIn()?this["in"].find(".n2-ss-layer-animation-in").css("display","").last().css("display","none"):(this["in"].find(".n2-ss-layer-animation-in").css("display",""),this.fixTimelineTotalDuration())},a.prototype.isLayerSpecialZeroIn=function(){return this.layer.animation.data.specialZeroIn},i.NextendSmartSliderTimelineLayer=a}(nextend.smartSlider,n2,window),function(t,e,i,n){function a(i){this.layerEditor=i,this.element=e("#n2-ss-timeline-table"),this.element.on({enterPreviewMode:e.proxy(this.onEnterPreview,this),exitPreviewMode:e.proxy(this.onExitPreview,this)}),this.scrollable=this.element.find(".n2-ss-timeline-content-scrollable"),this.contentContainer=e('<div class="n2-ss-timeline-content-layers-container"></div>').appendTo(this.scrollable),this.initTimeFrame(),this.initCurrentTimeIndicator(),this.makeScrollable(),this.sidebar=this.element.find(".n2-ss-timeline-sidebar-layers"),t.timelineManager=this,this.layerEditor.$.on("layerCreated",e.proxy(this.layerCreated,this)),this.control=new o(this),this.initHeight(),this.addContextMenu()}function o(i){this.status=0,t.timelineControl=this,this.timelineManager=i,this.frontendSlideLayers=i.layerEditor.frontendSlideLayers;var n=e(".n2-ss-timeline-control");n.find(".n2-stop").on("click",e.proxy(this.onStopButton,this)),this.$playButton=n.find(".n2-play").on("click",e.proxy(this.onPlayButton,this)),e(window).on("keydown",e.proxy(function(t){"INPUT"!=t.target.tagName&&"TEXTAREA"!=t.target.tagName&&(0==t.keyCode||32==t.keyCode?this.onPlayButton(t):27==t.keyCode&&this.onStopButton(t))},this)),e(".n2-ss-timeline-content-layers-container, .n2-ss-timeline-duration-marker").on("mousedown",e.proxy(this.exitPreviewMode,this,!1)),e(".n2-ss-timeline-sidebar-top").on("click",e.proxy(this.exitPreviewMode,this,!1))}a.prototype.initHeight=function(){var t=e.jStorage.get("smartsliderTimelineHeight",200),i=e(".n2-ss-timeline-sidebar-layers"),n=e(".n2-ss-timeline-content-layers-container").height(t);i.on("scroll",function(){n.scrollTop(i.scrollTop())}),e(".n2-ss-timeline-sidebar-layers-container").height(t).resizable({minHeight:200,alsoResize:n,handles:"s",create:function(t){e(t.target).find(".ui-resizable-s").append('<i class="n2-i n2-it n2-i-drag"></i>')},stop:function(t,i){e.jStorage.set("smartsliderTimelineHeight",i.size.height)}})},a.prototype.initTimeFrame=function(){this.timeMarker=this.element.find(".n2-ss-timeline-content-timeframe").on("mousedown",e.proxy(function(i){if(nextend.rtl.isRtl)var n=this.timeMarker.width()-(i.pageX-e(i.currentTarget).offset().left);else var n=i.pageX-e(i.currentTarget).offset().left-20;var a=t.offsetXToDuration(n);this.disablePreviewModeWidthCTI(a)||this.setCTI(a),this.slideCTI.trigger(i),e(document).one("mouseup",e.proxy(function(t){this.control.unHold(),this.slideCTI.trigger(t)},this))},this)),this._extendTimeFrame(0)},a.prototype.refreshDuration=NextendDeBounce(function(){this._extendTimeFrame(this.getMinimumSlideDuration())},200),a.prototype._extendTimeFrame=function(i){i=Math.floor(i)+1;var n=this.timeMarker.find(".n2-time-marker"),a=n.length;for(10>i&&(i=10),a>i&&(n.slice(i).remove(),a=i);i>=a;a++)e('<div class="n2-time-marker n2-h5">'+a+"s</div>").appendTo(this.timeMarker);this.scrollable.css("width",a*t.oneSecWidth+20),e(window).trigger("resize")},a.prototype.getMinimumSlideDuration=function(){for(var t=this.layerEditor.layerList,e=0,i=0;i<t.length;i++)e=Math.max(e,t[i].timelineLayerManager.getTotalDuration());return e},a.prototype.initCurrentTimeIndicator=function(){this.slideCTI=e('<div class="n2-ss-timeline-cti"></div>').append('<div class="n2-ss-timeline-cti-dot"></div>').appendTo(this.scrollable).draggable({axis:"x",cursor:"ew-resize",start:e.proxy(function(e,i){this.control.enterPreviewMode(),this.control.pause(),this.slideDurationPx=this.control.timeline.totalDuration()*t.oneSecWidth},this),drag:e.proxy(function(e,i){nextend.rtl.isRtl&&(i.position.left=this.scrollable.width()-i.position.left-21),i.position.left=Math.max(i.position.left,-.05*t.oneSecWidth),i.position.left=Math.min(i.position.left,this.slideDurationPx),this.setCTI(t.offsetXToDuration(i.position.left))},this),stop:e.proxy(function(e,i){this.control.unHold(),this.disablePreviewModeWidthCTI(t.offsetXToDuration(i.position.left)),delete this.slideDurationPx},this)})},a.prototype.disablePreviewModeWidthCTI=function(t){return null==t||0>t?this.control.exitPreviewMode():!1},a.prototype.setCTI=function(t){this.control.setPosition(Math.max(0,t)),this.control.hold()},a.prototype.onEnterPreview=function(){},a.prototype.onExitPreview=function(){this.slideCTI.css(nextend.rtl.left,-10)},a.prototype.makeScrollable=function(){var t=e(".n2-ss-timeline-content");this.tinyscrollbar=t.tinyscrollbar({axis:"x",wheel:!1,wheelLock:!1}).data("plugin_tinyscrollbar"),"function"==typeof t.get(0).move&&(t.get(0).move=null)},a.prototype.layerCreated=function(t,e){new NextendSmartSliderTimelineLayer(e)},a.prototype.appendRow=function(t,e){this.sidebar.append(t),this.contentContainer.append(e)},a.prototype.addContextMenu=function(){var t=this;e.contextMenu({selector:".n2-ss-timeline-layer",build:function(i,n){var a={},o=t.layerEditor.getSelectedLayer();if(!o)return!1;var r=o.timelineLayer;a.Animations={html:"<span>Animations</span>",type:"html"},a.sep0="---------",a.copy={name:"Copy",icon:"copy"};var s=e.jStorage.get("layerAnimationCopied");return null!==s&&(a.paste={name:"Paste",icon:"paste",callback:function(){o.animation.loadData(JSON.parse(s))}}),a.sep1="---------",0==r["in"].find(".n2-ss-layer-animation").length?a.inAdd={name:"Add IN animation",icon:"in",callback:function(){o.animation.edit("in",0)}}:a.inDelete={name:"Remove IN animations",icon:"delete",callback:function(){o.animation.clear("in")}},0==r.loop.find(".n2-ss-layer-animation").length?a.loopAdd={name:"Add LOOP animation",icon:"loop",callback:function(){o.animation.edit("loop",0)}}:a.loopDelete={name:"Remove LOOP animations",icon:"delete",callback:function(){o.animation.clear("loop")}},0==r.out.find(".n2-ss-layer-animation").length?a.outAdd={name:"Add OUT animation",icon:"out",callback:function(){o.animation.edit("out",0)}}:a.outDelete={name:"Remove OUT animations",icon:"delete",callback:function(){o.animation.clear("out")}},{animation:{duration:0,show:"show",hide:"hide"},zIndex:1e6,callback:function(t,i){e.jStorage.set("layerAnimationCopied",JSON.stringify(o.animation.getData()))},items:a}}})},i.NextendSmartSliderAdminTimelineManager=a;var r={DISABLED:0,PAUSED:1,HOLD_PAUSED:2,PLAYING:3,HOLD_PLAYING:4};o.prototype.isActivated=function(){return this.status!=r.DISABLED},o.prototype.onStopButton=function(t){t.preventDefault(),t.stopPropagation(),this.status!=r.DISABLED&&this.exitPreviewMode()},o.prototype.onPlayButton=function(t){switch(t.preventDefault(),t.stopPropagation(),this.status){case r.DISABLED:this.enterPreviewMode();case r.PAUSED:this.play();break;case r.PLAYING:this.pause()}},o.prototype.enterPreviewMode=function(){if(this.status==r.DISABLED){e("body").on("mousedown.n2-ss-preview",e.proxy(function(t){e.contains(document.getElementById("n2-ss-timeline"),t.target)||this.exitPreviewMode()},this)),t.$currentSlideElement.find(".n2-ss-layer").nextenddraggable("option","disabled",!0),e("body").addClass("n2-ss-preview-mode"),this.frontendSlideLayers.findLayers(),this.frontendSlideLayers.refresh(),this.timeline=this.frontendSlideLayers.getTimeline("layerAnimationPlayIn"),this.timeline.eventCallback("onComplete",e.proxy(function(){this.timeline.totalDuration()>0&&this.timeline.restart()},this));var i=this.timeline.totalDuration(),n={};n[nextend.rtl.left]=0;var a={ease:"linear"};a[nextend.rtl.left]=t.durationToOffsetX(i),this.timeline.fromTo(this.timelineManager.slideCTI,i,n,a,0),this.timeline.pause(0),this.$playButton.addClass("n2-button-blue"),this.timelineManager.element.triggerHandler("enterPreviewMode"),this.status=r.PAUSED}},o.prototype.exitPreviewMode=function(i){return this.status!=r.DISABLED?(i&&(i.preventDefault(),i.stopPropagation()),e("body").off(".n2-ss-preview"),this.status==r.PLAYING&&this.pause(),this.timeline.clear(),this.frontendSlideLayers.setZero(),t.$currentSlideElement.find(".n2-ss-layer").nextenddraggable("option","disabled",!1),e("body").removeClass("n2-ss-preview-mode"),this.$playButton.removeClass("n2-button-blue"),this.timelineManager.element.triggerHandler("exitPreviewMode"),this.status=r.DISABLED,!0):!1},o.prototype.play=function(){return this.status==r.PAUSED?(this.status=r.PLAYING,this.$playButton.addClass("n2-active"),this.timeline.play(),!0):!1},o.prototype.pause=function(){return this.status==r.PLAYING?(this.status=r.PAUSED,this.$playButton.removeClass("n2-active"),this.timeline.pause(),!0):!1},o.prototype.hold=function(){this.status==r.PAUSED?this.status=r.HOLD_PAUSED:this.status==r.PLAYING&&(this.status=r.HOLD_PLAYING,this.timeline.pause())},o.prototype.unHold=function(){this.status==r.HOLD_PAUSED?this.status=r.PAUSED:this.status==r.HOLD_PLAYING&&(this.status=r.PLAYING,this.timeline.play())},o.prototype.setPosition=function(t){this.enterPreviewMode(),this.timeline.seek(t)},i.NextendSmartSliderAdminTimelineControl=o}(nextend.smartSlider,n2,window);